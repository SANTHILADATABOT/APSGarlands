/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./Modules/Media/node_modules/dropzone/dist/dropzone.js":
/*!**************************************************************!*\
  !*** ./Modules/Media/node_modules/dropzone/dist/dropzone.js ***!
  \**************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\n\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\r\n\r\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\n/*\r\n *\r\n * More info at [www.dropzonejs.com](http://www.dropzonejs.com)\r\n *\r\n * Copyright (c) 2012, Matias Meno\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n *\r\n */\r\n\r\n// The Emitter class provides the ability to call `.on()` on Dropzone to listen\r\n// to events.\r\n// It is strongly based on component's emitter class, and I removed the\r\n// functionality because of the dependency hell with different frameworks.\r\nvar Emitter = function () {\r\n  function Emitter() {\r\n    _classCallCheck(this, Emitter);\r\n  }\r\n\r\n  _createClass(Emitter, [{\r\n    key: \"on\",\r\n\r\n    // Add an event listener for given event\r\n    value: function on(event, fn) {\r\n      this._callbacks = this._callbacks || {};\r\n      // Create namespace for this event\r\n      if (!this._callbacks[event]) {\r\n        this._callbacks[event] = [];\r\n      }\r\n      this._callbacks[event].push(fn);\r\n      return this;\r\n    }\r\n  }, {\r\n    key: \"emit\",\r\n    value: function emit(event) {\r\n      this._callbacks = this._callbacks || {};\r\n      var callbacks = this._callbacks[event];\r\n\r\n      if (callbacks) {\r\n        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n          args[_key - 1] = arguments[_key];\r\n        }\r\n\r\n        for (var _iterator = callbacks, _isArray = true, _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\r\n          var _ref;\r\n\r\n          if (_isArray) {\r\n            if (_i >= _iterator.length) break;\r\n            _ref = _iterator[_i++];\r\n          } else {\r\n            _i = _iterator.next();\r\n            if (_i.done) break;\r\n            _ref = _i.value;\r\n          }\r\n\r\n          var callback = _ref;\r\n\r\n          callback.apply(this, args);\r\n        }\r\n      }\r\n\r\n      return this;\r\n    }\r\n\r\n    // Remove event listener for given event. If fn is not provided, all event\r\n    // listeners for that event will be removed. If neither is provided, all\r\n    // event listeners will be removed.\r\n\r\n  }, {\r\n    key: \"off\",\r\n    value: function off(event, fn) {\r\n      if (!this._callbacks || arguments.length === 0) {\r\n        this._callbacks = {};\r\n        return this;\r\n      }\r\n\r\n      // specific event\r\n      var callbacks = this._callbacks[event];\r\n      if (!callbacks) {\r\n        return this;\r\n      }\r\n\r\n      // remove all handlers\r\n      if (arguments.length === 1) {\r\n        delete this._callbacks[event];\r\n        return this;\r\n      }\r\n\r\n      // remove specific handler\r\n      for (var i = 0; i < callbacks.length; i++) {\r\n        var callback = callbacks[i];\r\n        if (callback === fn) {\r\n          callbacks.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n\r\n      return this;\r\n    }\r\n  }]);\r\n\r\n  return Emitter;\r\n}();\r\n\r\nvar Dropzone = function (_Emitter) {\r\n  _inherits(Dropzone, _Emitter);\r\n\r\n  _createClass(Dropzone, null, [{\r\n    key: \"initClass\",\r\n    value: function initClass() {\r\n\r\n      // Exposing the emitter class, mainly for tests\r\n      this.prototype.Emitter = Emitter;\r\n\r\n      /*\r\n       This is a list of all available events you can register on a dropzone object.\r\n        You can register an event handler like this:\r\n        dropzone.on(\"dragEnter\", function() { });\r\n        */\r\n      this.prototype.events = [\"drop\", \"dragstart\", \"dragend\", \"dragenter\", \"dragover\", \"dragleave\", \"addedfile\", \"addedfiles\", \"removedfile\", \"thumbnail\", \"error\", \"errormultiple\", \"processing\", \"processingmultiple\", \"uploadprogress\", \"totaluploadprogress\", \"sending\", \"sendingmultiple\", \"success\", \"successmultiple\", \"canceled\", \"canceledmultiple\", \"complete\", \"completemultiple\", \"reset\", \"maxfilesexceeded\", \"maxfilesreached\", \"queuecomplete\"];\r\n\r\n      this.prototype.defaultOptions = {\r\n        /**\r\n         * Has to be specified on elements other than form (or when the form\r\n         * doesn't have an `action` attribute). You can also\r\n         * provide a function that will be called with `files` and\r\n         * must return the url (since `v3.12.0`)\r\n         */\r\n        url: null,\r\n\r\n        /**\r\n         * Can be changed to `\"put\"` if necessary. You can also provide a function\r\n         * that will be called with `files` and must return the method (since `v3.12.0`).\r\n         */\r\n        method: \"post\",\r\n\r\n        /**\r\n         * Will be set on the XHRequest.\r\n         */\r\n        withCredentials: false,\r\n\r\n        /**\r\n         * The timeout for the XHR requests in milliseconds (since `v4.4.0`).\r\n         */\r\n        timeout: 30000,\r\n\r\n        /**\r\n         * How many file uploads to process in parallel (See the\r\n         * Enqueuing file uploads* documentation section for more info)\r\n         */\r\n        parallelUploads: 2,\r\n\r\n        /**\r\n         * Whether to send multiple files in one request. If\r\n         * this it set to true, then the fallback file input element will\r\n         * have the `multiple` attribute as well. This option will\r\n         * also trigger additional events (like `processingmultiple`). See the events\r\n         * documentation section for more information.\r\n         */\r\n        uploadMultiple: false,\r\n\r\n        /**\r\n         * Whether you want files to be uploaded in chunks to your server. This can't be\r\n         * used in combination with `uploadMultiple`.\r\n         *\r\n         * See [chunksUploaded](#config-chunksUploaded) for the callback to finalise an upload.\r\n         */\r\n        chunking: false,\r\n\r\n        /**\r\n         * If `chunking` is enabled, this defines whether **every** file should be chunked,\r\n         * even if the file size is below chunkSize. This means, that the additional chunk\r\n         * form data will be submitted and the `chunksUploaded` callback will be invoked.\r\n         */\r\n        forceChunking: false,\r\n\r\n        /**\r\n         * If `chunking` is `true`, then this defines the chunk size in bytes.\r\n         */\r\n        chunkSize: 2000000,\r\n\r\n        /**\r\n         * If `true`, the individual chunks of a file are being uploaded simultaneously.\r\n         */\r\n        parallelChunkUploads: false,\r\n\r\n        /**\r\n         * Whether a chunk should be retried if it fails.\r\n         */\r\n        retryChunks: false,\r\n\r\n        /**\r\n         * If `retryChunks` is true, how many times should it be retried.\r\n         */\r\n        retryChunksLimit: 3,\r\n\r\n        /**\r\n         * If not `null` defines how many files this Dropzone handles. If it exceeds,\r\n         * the event `maxfilesexceeded` will be called. The dropzone element gets the\r\n         * class `dz-max-files-reached` accordingly so you can provide visual feedback.\r\n         */\r\n        maxFilesize: 256,\r\n\r\n        /**\r\n         * The name of the file param that gets transferred.\r\n         * **NOTE**: If you have the option  `uploadMultiple` set to `true`, then\r\n         * Dropzone will append `[]` to the name.\r\n         */\r\n        paramName: \"file\",\r\n\r\n        /**\r\n         * Whether thumbnails for images should be generated\r\n         */\r\n        createImageThumbnails: true,\r\n\r\n        /**\r\n         * In MB. When the filename exceeds this limit, the thumbnail will not be generated.\r\n         */\r\n        maxThumbnailFilesize: 10,\r\n\r\n        /**\r\n         * If `null`, the ratio of the image will be used to calculate it.\r\n         */\r\n        thumbnailWidth: 120,\r\n\r\n        /**\r\n         * The same as `thumbnailWidth`. If both are null, images will not be resized.\r\n         */\r\n        thumbnailHeight: 120,\r\n\r\n        /**\r\n         * How the images should be scaled down in case both, `thumbnailWidth` and `thumbnailHeight` are provided.\r\n         * Can be either `contain` or `crop`.\r\n         */\r\n        thumbnailMethod: 'crop',\r\n\r\n        /**\r\n         * If set, images will be resized to these dimensions before being **uploaded**.\r\n         * If only one, `resizeWidth` **or** `resizeHeight` is provided, the original aspect\r\n         * ratio of the file will be preserved.\r\n         *\r\n         * The `options.transformFile` function uses these options, so if the `transformFile` function\r\n         * is overridden, these options don't do anything.\r\n         */\r\n        resizeWidth: null,\r\n\r\n        /**\r\n         * See `resizeWidth`.\r\n         */\r\n        resizeHeight: null,\r\n\r\n        /**\r\n         * The mime type of the resized image (before it gets uploaded to the server).\r\n         * If `null` the original mime type will be used. To force jpeg, for example, use `image/jpeg`.\r\n         * See `resizeWidth` for more information.\r\n         */\r\n        resizeMimeType: null,\r\n\r\n        /**\r\n         * The quality of the resized images. See `resizeWidth`.\r\n         */\r\n        resizeQuality: 0.8,\r\n\r\n        /**\r\n         * How the images should be scaled down in case both, `resizeWidth` and `resizeHeight` are provided.\r\n         * Can be either `contain` or `crop`.\r\n         */\r\n        resizeMethod: 'contain',\r\n\r\n        /**\r\n         * The base that is used to calculate the filesize. You can change this to\r\n         * 1024 if you would rather display kibibytes, mebibytes, etc...\r\n         * 1024 is technically incorrect, because `1024 bytes` are `1 kibibyte` not `1 kilobyte`.\r\n         * You can change this to `1024` if you don't care about validity.\r\n         */\r\n        filesizeBase: 1000,\r\n\r\n        /**\r\n         * Can be used to limit the maximum number of files that will be handled by this Dropzone\r\n         */\r\n        maxFiles: null,\r\n\r\n        /**\r\n         * An optional object to send additional headers to the server. Eg:\r\n         * `{ \"My-Awesome-Header\": \"header value\" }`\r\n         */\r\n        headers: null,\r\n\r\n        /**\r\n         * If `true`, the dropzone element itself will be clickable, if `false`\r\n         * nothing will be clickable.\r\n         *\r\n         * You can also pass an HTML element, a CSS selector (for multiple elements)\r\n         * or an array of those. In that case, all of those elements will trigger an\r\n         * upload when clicked.\r\n         */\r\n        clickable: true,\r\n\r\n        /**\r\n         * Whether hidden files in directories should be ignored.\r\n         */\r\n        ignoreHiddenFiles: true,\r\n\r\n        /**\r\n         * The default implementation of `accept` checks the file's mime type or\r\n         * extension against this list. This is a comma separated list of mime\r\n         * types or file extensions.\r\n         *\r\n         * Eg.: `image/*,application/pdf,.psd`\r\n         *\r\n         * If the Dropzone is `clickable` this option will also be used as\r\n         * [`accept`](https://developer.mozilla.org/en-US/docs/HTML/Element/input#attr-accept)\r\n         * parameter on the hidden file input as well.\r\n         */\r\n        acceptedFiles: null,\r\n\r\n        /**\r\n         * **Deprecated!**\r\n         * Use acceptedFiles instead.\r\n         */\r\n        acceptedMimeTypes: null,\r\n\r\n        /**\r\n         * If false, files will be added to the queue but the queue will not be\r\n         * processed automatically.\r\n         * This can be useful if you need some additional user input before sending\r\n         * files (or if you want want all files sent at once).\r\n         * If you're ready to send the file simply call `myDropzone.processQueue()`.\r\n         *\r\n         * See the [enqueuing file uploads](#enqueuing-file-uploads) documentation\r\n         * section for more information.\r\n         */\r\n        autoProcessQueue: true,\r\n\r\n        /**\r\n         * If false, files added to the dropzone will not be queued by default.\r\n         * You'll have to call `enqueueFile(file)` manually.\r\n         */\r\n        autoQueue: true,\r\n\r\n        /**\r\n         * If `true`, this will add a link to every file preview to remove or cancel (if\r\n         * already uploading) the file. The `dictCancelUpload`, `dictCancelUploadConfirmation`\r\n         * and `dictRemoveFile` options are used for the wording.\r\n         */\r\n        addRemoveLinks: false,\r\n\r\n        /**\r\n         * Defines where to display the file previews – if `null` the\r\n         * Dropzone element itself is used. Can be a plain `HTMLElement` or a CSS\r\n         * selector. The element should have the `dropzone-previews` class so\r\n         * the previews are displayed properly.\r\n         */\r\n        previewsContainer: null,\r\n\r\n        /**\r\n         * This is the element the hidden input field (which is used when clicking on the\r\n         * dropzone to trigger file selection) will be appended to. This might\r\n         * be important in case you use frameworks to switch the content of your page.\r\n         */\r\n        hiddenInputContainer: \"body\",\r\n\r\n        /**\r\n         * If null, no capture type will be specified\r\n         * If camera, mobile devices will skip the file selection and choose camera\r\n         * If microphone, mobile devices will skip the file selection and choose the microphone\r\n         * If camcorder, mobile devices will skip the file selection and choose the camera in video mode\r\n         * On apple devices multiple must be set to false.  AcceptedFiles may need to\r\n         * be set to an appropriate mime type (e.g. \"image/*\", \"audio/*\", or \"video/*\").\r\n         */\r\n        capture: null,\r\n\r\n        /**\r\n         * **Deprecated**. Use `renameFile` instead.\r\n         */\r\n        renameFilename: null,\r\n\r\n        /**\r\n         * A function that is invoked before the file is uploaded to the server and renames the file.\r\n         * This function gets the `File` as argument and can use the `file.name`. The actual name of the\r\n         * file that gets used during the upload can be accessed through `file.upload.filename`.\r\n         */\r\n        renameFile: null,\r\n\r\n        /**\r\n         * If `true` the fallback will be forced. This is very useful to test your server\r\n         * implementations first and make sure that everything works as\r\n         * expected without dropzone if you experience problems, and to test\r\n         * how your fallbacks will look.\r\n         */\r\n        forceFallback: false,\r\n\r\n        /**\r\n         * The text used before any files are dropped.\r\n         */\r\n        dictDefaultMessage: \"Drop files here to upload\",\r\n\r\n        /**\r\n         * The text that replaces the default message text it the browser is not supported.\r\n         */\r\n        dictFallbackMessage: \"Your browser does not support drag'n'drop file uploads.\",\r\n\r\n        /**\r\n         * The text that will be added before the fallback form.\r\n         * If you provide a  fallback element yourself, or if this option is `null` this will\r\n         * be ignored.\r\n         */\r\n        dictFallbackText: \"Please use the fallback form below to upload your files like in the olden days.\",\r\n\r\n        /**\r\n         * If the filesize is too big.\r\n         * `{{filesize}}` and `{{maxFilesize}}` will be replaced with the respective configuration values.\r\n         */\r\n        dictFileTooBig: \"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.\",\r\n\r\n        /**\r\n         * If the file doesn't match the file type.\r\n         */\r\n        dictInvalidFileType: \"You can't upload files of this type.\",\r\n\r\n        /**\r\n         * If the server response was invalid.\r\n         * `{{statusCode}}` will be replaced with the servers status code.\r\n         */\r\n        dictResponseError: \"Server responded with {{statusCode}} code.\",\r\n\r\n        /**\r\n         * If `addRemoveLinks` is true, the text to be used for the cancel upload link.\r\n         */\r\n        dictCancelUpload: \"Cancel upload\",\r\n\r\n        /**\r\n         * The text that is displayed if an upload was manually canceled\r\n         */\r\n        dictUploadCanceled: \"Upload canceled.\",\r\n\r\n        /**\r\n         * If `addRemoveLinks` is true, the text to be used for confirmation when cancelling upload.\r\n         */\r\n        dictCancelUploadConfirmation: \"Are you sure you want to cancel this upload?\",\r\n\r\n        /**\r\n         * If `addRemoveLinks` is true, the text to be used to remove a file.\r\n         */\r\n        dictRemoveFile: \"Remove file\",\r\n\r\n        /**\r\n         * If this is not null, then the user will be prompted before removing a file.\r\n         */\r\n        dictRemoveFileConfirmation: null,\r\n\r\n        /**\r\n         * Displayed if `maxFiles` is st and exceeded.\r\n         * The string `{{maxFiles}}` will be replaced by the configuration value.\r\n         */\r\n        dictMaxFilesExceeded: \"You can not upload any more files.\",\r\n\r\n        /**\r\n         * Allows you to translate the different units. Starting with `tb` for terabytes and going down to\r\n         * `b` for bytes.\r\n         */\r\n        dictFileSizeUnits: { tb: \"TB\", gb: \"GB\", mb: \"MB\", kb: \"KB\", b: \"b\" },\r\n        /**\r\n         * Called when dropzone initialized\r\n         * You can add event listeners here\r\n         */\r\n        init: function init() {},\r\n\r\n\r\n        /**\r\n         * Can be an **object** of additional parameters to transfer to the server, **or** a `Function`\r\n         * that gets invoked with the `files`, `xhr` and, if it's a chunked upload, `chunk` arguments. In case\r\n         * of a function, this needs to return a map.\r\n         *\r\n         * The default implementation does nothing for normal uploads, but adds relevant information for\r\n         * chunked uploads.\r\n         *\r\n         * This is the same as adding hidden input fields in the form element.\r\n         */\r\n        params: function params(files, xhr, chunk) {\r\n          if (chunk) {\r\n            return {\r\n              dzuuid: chunk.file.upload.uuid,\r\n              dzchunkindex: chunk.index,\r\n              dztotalfilesize: chunk.file.size,\r\n              dzchunksize: this.options.chunkSize,\r\n              dztotalchunkcount: chunk.file.upload.totalChunkCount,\r\n              dzchunkbyteoffset: chunk.index * this.options.chunkSize\r\n            };\r\n          }\r\n        },\r\n\r\n\r\n        /**\r\n         * A function that gets a [file](https://developer.mozilla.org/en-US/docs/DOM/File)\r\n         * and a `done` function as parameters.\r\n         *\r\n         * If the done function is invoked without arguments, the file is \"accepted\" and will\r\n         * be processed. If you pass an error message, the file is rejected, and the error\r\n         * message will be displayed.\r\n         * This function will not be called if the file is too big or doesn't match the mime types.\r\n         */\r\n        accept: function accept(file, done) {\r\n          return done();\r\n        },\r\n\r\n\r\n        /**\r\n         * The callback that will be invoked when all chunks have been uploaded for a file.\r\n         * It gets the file for which the chunks have been uploaded as the first parameter,\r\n         * and the `done` function as second. `done()` needs to be invoked when everything\r\n         * needed to finish the upload process is done.\r\n         */\r\n        chunksUploaded: function chunksUploaded(file, done) {\r\n          done();\r\n        },\r\n\r\n        /**\r\n         * Gets called when the browser is not supported.\r\n         * The default implementation shows the fallback input field and adds\r\n         * a text.\r\n         */\r\n        fallback: function fallback() {\r\n          // This code should pass in IE7... :(\r\n          var messageElement = void 0;\r\n          this.element.className = this.element.className + \" dz-browser-not-supported\";\r\n\r\n          for (var _iterator2 = this.element.getElementsByTagName(\"div\"), _isArray2 = true, _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\r\n            var _ref2;\r\n\r\n            if (_isArray2) {\r\n              if (_i2 >= _iterator2.length) break;\r\n              _ref2 = _iterator2[_i2++];\r\n            } else {\r\n              _i2 = _iterator2.next();\r\n              if (_i2.done) break;\r\n              _ref2 = _i2.value;\r\n            }\r\n\r\n            var child = _ref2;\r\n\r\n            if (/(^| )dz-message($| )/.test(child.className)) {\r\n              messageElement = child;\r\n              child.className = \"dz-message\"; // Removes the 'dz-default' class\r\n              break;\r\n            }\r\n          }\r\n          if (!messageElement) {\r\n            messageElement = Dropzone.createElement(\"<div class=\\\"dz-message\\\"><span></span></div>\");\r\n            this.element.appendChild(messageElement);\r\n          }\r\n\r\n          var span = messageElement.getElementsByTagName(\"span\")[0];\r\n          if (span) {\r\n            if (span.textContent != null) {\r\n              span.textContent = this.options.dictFallbackMessage;\r\n            } else if (span.innerText != null) {\r\n              span.innerText = this.options.dictFallbackMessage;\r\n            }\r\n          }\r\n\r\n          return this.element.appendChild(this.getFallbackForm());\r\n        },\r\n\r\n\r\n        /**\r\n         * Gets called to calculate the thumbnail dimensions.\r\n         *\r\n         * It gets `file`, `width` and `height` (both may be `null`) as parameters and must return an object containing:\r\n         *\r\n         *  - `srcWidth` & `srcHeight` (required)\r\n         *  - `trgWidth` & `trgHeight` (required)\r\n         *  - `srcX` & `srcY` (optional, default `0`)\r\n         *  - `trgX` & `trgY` (optional, default `0`)\r\n         *\r\n         * Those values are going to be used by `ctx.drawImage()`.\r\n         */\r\n        resize: function resize(file, width, height, resizeMethod) {\r\n          var info = {\r\n            srcX: 0,\r\n            srcY: 0,\r\n            srcWidth: file.width,\r\n            srcHeight: file.height\r\n          };\r\n\r\n          var srcRatio = file.width / file.height;\r\n\r\n          // Automatically calculate dimensions if not specified\r\n          if (width == null && height == null) {\r\n            width = info.srcWidth;\r\n            height = info.srcHeight;\r\n          } else if (width == null) {\r\n            width = height * srcRatio;\r\n          } else if (height == null) {\r\n            height = width / srcRatio;\r\n          }\r\n\r\n          // Make sure images aren't upscaled\r\n          width = Math.min(width, info.srcWidth);\r\n          height = Math.min(height, info.srcHeight);\r\n\r\n          var trgRatio = width / height;\r\n\r\n          if (info.srcWidth > width || info.srcHeight > height) {\r\n            // Image is bigger and needs rescaling\r\n            if (resizeMethod === 'crop') {\r\n              if (srcRatio > trgRatio) {\r\n                info.srcHeight = file.height;\r\n                info.srcWidth = info.srcHeight * trgRatio;\r\n              } else {\r\n                info.srcWidth = file.width;\r\n                info.srcHeight = info.srcWidth / trgRatio;\r\n              }\r\n            } else if (resizeMethod === 'contain') {\r\n              // Method 'contain'\r\n              if (srcRatio > trgRatio) {\r\n                height = width / srcRatio;\r\n              } else {\r\n                width = height * srcRatio;\r\n              }\r\n            } else {\r\n              throw new Error(\"Unknown resizeMethod '\" + resizeMethod + \"'\");\r\n            }\r\n          }\r\n\r\n          info.srcX = (file.width - info.srcWidth) / 2;\r\n          info.srcY = (file.height - info.srcHeight) / 2;\r\n\r\n          info.trgWidth = width;\r\n          info.trgHeight = height;\r\n\r\n          return info;\r\n        },\r\n\r\n\r\n        /**\r\n         * Can be used to transform the file (for example, resize an image if necessary).\r\n         *\r\n         * The default implementation uses `resizeWidth` and `resizeHeight` (if provided) and resizes\r\n         * images according to those dimensions.\r\n         *\r\n         * Gets the `file` as the first parameter, and a `done()` function as the second, that needs\r\n         * to be invoked with the file when the transformation is done.\r\n         */\r\n        transformFile: function transformFile(file, done) {\r\n          if ((this.options.resizeWidth || this.options.resizeHeight) && file.type.match(/image.*/)) {\r\n            return this.resizeImage(file, this.options.resizeWidth, this.options.resizeHeight, this.options.resizeMethod, done);\r\n          } else {\r\n            return done(file);\r\n          }\r\n        },\r\n\r\n\r\n        /**\r\n         * A string that contains the template used for each dropped\r\n         * file. Change it to fulfill your needs but make sure to properly\r\n         * provide all elements.\r\n         *\r\n         * If you want to use an actual HTML element instead of providing a String\r\n         * as a config option, you could create a div with the id `tpl`,\r\n         * put the template inside it and provide the element like this:\r\n         *\r\n         *     document\r\n         *       .querySelector('#tpl')\r\n         *       .innerHTML\r\n         *\r\n         */\r\n        previewTemplate: \"<div class=\\\"dz-preview dz-file-preview\\\">\\n  <div class=\\\"dz-image\\\"><img data-dz-thumbnail /></div>\\n  <div class=\\\"dz-details\\\">\\n    <div class=\\\"dz-size\\\"><span data-dz-size></span></div>\\n    <div class=\\\"dz-filename\\\"><span data-dz-name></span></div>\\n  </div>\\n  <div class=\\\"dz-progress\\\"><span class=\\\"dz-upload\\\" data-dz-uploadprogress></span></div>\\n  <div class=\\\"dz-error-message\\\"><span data-dz-errormessage></span></div>\\n  <div class=\\\"dz-success-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Check</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <path d=\\\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" stroke-opacity=\\\"0.198794158\\\" stroke=\\\"#747474\\\" fill-opacity=\\\"0.816519475\\\" fill=\\\"#FFFFFF\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n      </g>\\n    </svg>\\n  </div>\\n  <div class=\\\"dz-error-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Error</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <g id=\\\"Check-+-Oval-2\\\" sketch:type=\\\"MSLayerGroup\\\" stroke=\\\"#747474\\\" stroke-opacity=\\\"0.198794158\\\" fill=\\\"#FFFFFF\\\" fill-opacity=\\\"0.816519475\\\">\\n          <path d=\\\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n        </g>\\n      </g>\\n    </svg>\\n  </div>\\n</div>\",\r\n\r\n        // END OPTIONS\r\n        // (Required by the dropzone documentation parser)\r\n\r\n\r\n        /*\r\n         Those functions register themselves to the events on init and handle all\r\n         the user interface specific stuff. Overwriting them won't break the upload\r\n         but can break the way it's displayed.\r\n         You can overwrite them if you don't like the default behavior. If you just\r\n         want to add an additional event handler, register it on the dropzone object\r\n         and don't overwrite those options.\r\n         */\r\n\r\n        // Those are self explanatory and simply concern the DragnDrop.\r\n        drop: function drop(e) {\r\n          return this.element.classList.remove(\"dz-drag-hover\");\r\n        },\r\n        dragstart: function dragstart(e) {},\r\n        dragend: function dragend(e) {\r\n          return this.element.classList.remove(\"dz-drag-hover\");\r\n        },\r\n        dragenter: function dragenter(e) {\r\n          return this.element.classList.add(\"dz-drag-hover\");\r\n        },\r\n        dragover: function dragover(e) {\r\n          return this.element.classList.add(\"dz-drag-hover\");\r\n        },\r\n        dragleave: function dragleave(e) {\r\n          return this.element.classList.remove(\"dz-drag-hover\");\r\n        },\r\n        paste: function paste(e) {},\r\n\r\n\r\n        // Called whenever there are no files left in the dropzone anymore, and the\r\n        // dropzone should be displayed as if in the initial state.\r\n        reset: function reset() {\r\n          return this.element.classList.remove(\"dz-started\");\r\n        },\r\n\r\n\r\n        // Called when a file is added to the queue\r\n        // Receives `file`\r\n        addedfile: function addedfile(file) {\r\n          var _this2 = this;\r\n\r\n          if (this.element === this.previewsContainer) {\r\n            this.element.classList.add(\"dz-started\");\r\n          }\r\n\r\n          if (this.previewsContainer) {\r\n            file.previewElement = Dropzone.createElement(this.options.previewTemplate.trim());\r\n            file.previewTemplate = file.previewElement; // Backwards compatibility\r\n\r\n            this.previewsContainer.appendChild(file.previewElement);\r\n            for (var _iterator3 = file.previewElement.querySelectorAll(\"[data-dz-name]\"), _isArray3 = true, _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\r\n              var _ref3;\r\n\r\n              if (_isArray3) {\r\n                if (_i3 >= _iterator3.length) break;\r\n                _ref3 = _iterator3[_i3++];\r\n              } else {\r\n                _i3 = _iterator3.next();\r\n                if (_i3.done) break;\r\n                _ref3 = _i3.value;\r\n              }\r\n\r\n              var node = _ref3;\r\n\r\n              node.textContent = file.name;\r\n            }\r\n            for (var _iterator4 = file.previewElement.querySelectorAll(\"[data-dz-size]\"), _isArray4 = true, _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\r\n              if (_isArray4) {\r\n                if (_i4 >= _iterator4.length) break;\r\n                node = _iterator4[_i4++];\r\n              } else {\r\n                _i4 = _iterator4.next();\r\n                if (_i4.done) break;\r\n                node = _i4.value;\r\n              }\r\n\r\n              node.innerHTML = this.filesize(file.size);\r\n            }\r\n\r\n            if (this.options.addRemoveLinks) {\r\n              file._removeLink = Dropzone.createElement(\"<a class=\\\"dz-remove\\\" href=\\\"javascript:undefined;\\\" data-dz-remove>\" + this.options.dictRemoveFile + \"</a>\");\r\n              file.previewElement.appendChild(file._removeLink);\r\n            }\r\n\r\n            var removeFileEvent = function removeFileEvent(e) {\r\n              e.preventDefault();\r\n              e.stopPropagation();\r\n              if (file.status === Dropzone.UPLOADING) {\r\n                return Dropzone.confirm(_this2.options.dictCancelUploadConfirmation, function () {\r\n                  return _this2.removeFile(file);\r\n                });\r\n              } else {\r\n                if (_this2.options.dictRemoveFileConfirmation) {\r\n                  return Dropzone.confirm(_this2.options.dictRemoveFileConfirmation, function () {\r\n                    return _this2.removeFile(file);\r\n                  });\r\n                } else {\r\n                  return _this2.removeFile(file);\r\n                }\r\n              }\r\n            };\r\n\r\n            for (var _iterator5 = file.previewElement.querySelectorAll(\"[data-dz-remove]\"), _isArray5 = true, _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {\r\n              var _ref4;\r\n\r\n              if (_isArray5) {\r\n                if (_i5 >= _iterator5.length) break;\r\n                _ref4 = _iterator5[_i5++];\r\n              } else {\r\n                _i5 = _iterator5.next();\r\n                if (_i5.done) break;\r\n                _ref4 = _i5.value;\r\n              }\r\n\r\n              var removeLink = _ref4;\r\n\r\n              removeLink.addEventListener(\"click\", removeFileEvent);\r\n            }\r\n          }\r\n        },\r\n\r\n\r\n        // Called whenever a file is removed.\r\n        removedfile: function removedfile(file) {\r\n          if (file.previewElement != null && file.previewElement.parentNode != null) {\r\n            file.previewElement.parentNode.removeChild(file.previewElement);\r\n          }\r\n          return this._updateMaxFilesReachedClass();\r\n        },\r\n\r\n\r\n        // Called when a thumbnail has been generated\r\n        // Receives `file` and `dataUrl`\r\n        thumbnail: function thumbnail(file, dataUrl) {\r\n          if (file.previewElement) {\r\n            file.previewElement.classList.remove(\"dz-file-preview\");\r\n            for (var _iterator6 = file.previewElement.querySelectorAll(\"[data-dz-thumbnail]\"), _isArray6 = true, _i6 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {\r\n              var _ref5;\r\n\r\n              if (_isArray6) {\r\n                if (_i6 >= _iterator6.length) break;\r\n                _ref5 = _iterator6[_i6++];\r\n              } else {\r\n                _i6 = _iterator6.next();\r\n                if (_i6.done) break;\r\n                _ref5 = _i6.value;\r\n              }\r\n\r\n              var thumbnailElement = _ref5;\r\n\r\n              thumbnailElement.alt = file.name;\r\n              thumbnailElement.src = dataUrl;\r\n            }\r\n\r\n            return setTimeout(function () {\r\n              return file.previewElement.classList.add(\"dz-image-preview\");\r\n            }, 1);\r\n          }\r\n        },\r\n\r\n\r\n        // Called whenever an error occurs\r\n        // Receives `file` and `message`\r\n        error: function error(file, message) {\r\n          if (file.previewElement) {\r\n            file.previewElement.classList.add(\"dz-error\");\r\n            if (typeof message !== \"String\" && message.error) {\r\n              message = message.error;\r\n            }\r\n            for (var _iterator7 = file.previewElement.querySelectorAll(\"[data-dz-errormessage]\"), _isArray7 = true, _i7 = 0, _iterator7 = _isArray7 ? _iterator7 : _iterator7[Symbol.iterator]();;) {\r\n              var _ref6;\r\n\r\n              if (_isArray7) {\r\n                if (_i7 >= _iterator7.length) break;\r\n                _ref6 = _iterator7[_i7++];\r\n              } else {\r\n                _i7 = _iterator7.next();\r\n                if (_i7.done) break;\r\n                _ref6 = _i7.value;\r\n              }\r\n\r\n              var node = _ref6;\r\n\r\n              node.textContent = message;\r\n            }\r\n          }\r\n        },\r\n        errormultiple: function errormultiple() {},\r\n\r\n\r\n        // Called when a file gets processed. Since there is a cue, not all added\r\n        // files are processed immediately.\r\n        // Receives `file`\r\n        processing: function processing(file) {\r\n          if (file.previewElement) {\r\n            file.previewElement.classList.add(\"dz-processing\");\r\n            if (file._removeLink) {\r\n              return file._removeLink.textContent = this.options.dictCancelUpload;\r\n            }\r\n          }\r\n        },\r\n        processingmultiple: function processingmultiple() {},\r\n\r\n\r\n        // Called whenever the upload progress gets updated.\r\n        // Receives `file`, `progress` (percentage 0-100) and `bytesSent`.\r\n        // To get the total number of bytes of the file, use `file.size`\r\n        uploadprogress: function uploadprogress(file, progress, bytesSent) {\r\n          if (file.previewElement) {\r\n            for (var _iterator8 = file.previewElement.querySelectorAll(\"[data-dz-uploadprogress]\"), _isArray8 = true, _i8 = 0, _iterator8 = _isArray8 ? _iterator8 : _iterator8[Symbol.iterator]();;) {\r\n              var _ref7;\r\n\r\n              if (_isArray8) {\r\n                if (_i8 >= _iterator8.length) break;\r\n                _ref7 = _iterator8[_i8++];\r\n              } else {\r\n                _i8 = _iterator8.next();\r\n                if (_i8.done) break;\r\n                _ref7 = _i8.value;\r\n              }\r\n\r\n              var node = _ref7;\r\n\r\n              node.nodeName === 'PROGRESS' ? node.value = progress : node.style.width = progress + \"%\";\r\n            }\r\n          }\r\n        },\r\n\r\n\r\n        // Called whenever the total upload progress gets updated.\r\n        // Called with totalUploadProgress (0-100), totalBytes and totalBytesSent\r\n        totaluploadprogress: function totaluploadprogress() {},\r\n\r\n\r\n        // Called just before the file is sent. Gets the `xhr` object as second\r\n        // parameter, so you can modify it (for example to add a CSRF token) and a\r\n        // `formData` object to add additional information.\r\n        sending: function sending() {},\r\n        sendingmultiple: function sendingmultiple() {},\r\n\r\n\r\n        // When the complete upload is finished and successful\r\n        // Receives `file`\r\n        success: function success(file) {\r\n          if (file.previewElement) {\r\n            return file.previewElement.classList.add(\"dz-success\");\r\n          }\r\n        },\r\n        successmultiple: function successmultiple() {},\r\n\r\n\r\n        // When the upload is canceled.\r\n        canceled: function canceled(file) {\r\n          return this.emit(\"error\", file, this.options.dictUploadCanceled);\r\n        },\r\n        canceledmultiple: function canceledmultiple() {},\r\n\r\n\r\n        // When the upload is finished, either with success or an error.\r\n        // Receives `file`\r\n        complete: function complete(file) {\r\n          if (file._removeLink) {\r\n            file._removeLink.textContent = this.options.dictRemoveFile;\r\n          }\r\n          if (file.previewElement) {\r\n            return file.previewElement.classList.add(\"dz-complete\");\r\n          }\r\n        },\r\n        completemultiple: function completemultiple() {},\r\n        maxfilesexceeded: function maxfilesexceeded() {},\r\n        maxfilesreached: function maxfilesreached() {},\r\n        queuecomplete: function queuecomplete() {},\r\n        addedfiles: function addedfiles() {}\r\n      };\r\n\r\n      this.prototype._thumbnailQueue = [];\r\n      this.prototype._processingThumbnail = false;\r\n    }\r\n\r\n    // global utility\r\n\r\n  }, {\r\n    key: \"extend\",\r\n    value: function extend(target) {\r\n      for (var _len2 = arguments.length, objects = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\r\n        objects[_key2 - 1] = arguments[_key2];\r\n      }\r\n\r\n      for (var _iterator9 = objects, _isArray9 = true, _i9 = 0, _iterator9 = _isArray9 ? _iterator9 : _iterator9[Symbol.iterator]();;) {\r\n        var _ref8;\r\n\r\n        if (_isArray9) {\r\n          if (_i9 >= _iterator9.length) break;\r\n          _ref8 = _iterator9[_i9++];\r\n        } else {\r\n          _i9 = _iterator9.next();\r\n          if (_i9.done) break;\r\n          _ref8 = _i9.value;\r\n        }\r\n\r\n        var object = _ref8;\r\n\r\n        for (var key in object) {\r\n          var val = object[key];\r\n          target[key] = val;\r\n        }\r\n      }\r\n      return target;\r\n    }\r\n  }]);\r\n\r\n  function Dropzone(el, options) {\r\n    _classCallCheck(this, Dropzone);\r\n\r\n    var _this = _possibleConstructorReturn(this, (Dropzone.__proto__ || Object.getPrototypeOf(Dropzone)).call(this));\r\n\r\n    var fallback = void 0,\r\n        left = void 0;\r\n    _this.element = el;\r\n    // For backwards compatibility since the version was in the prototype previously\r\n    _this.version = Dropzone.version;\r\n\r\n    _this.defaultOptions.previewTemplate = _this.defaultOptions.previewTemplate.replace(/\\n*/g, \"\");\r\n\r\n    _this.clickableElements = [];\r\n    _this.listeners = [];\r\n    _this.files = []; // All files\r\n\r\n    if (typeof _this.element === \"string\") {\r\n      _this.element = document.querySelector(_this.element);\r\n    }\r\n\r\n    // Not checking if instance of HTMLElement or Element since IE9 is extremely weird.\r\n    if (!_this.element || _this.element.nodeType == null) {\r\n      throw new Error(\"Invalid dropzone element.\");\r\n    }\r\n\r\n    if (_this.element.dropzone) {\r\n      throw new Error(\"Dropzone already attached.\");\r\n    }\r\n\r\n    // Now add this dropzone to the instances.\r\n    Dropzone.instances.push(_this);\r\n\r\n    // Put the dropzone inside the element itself.\r\n    _this.element.dropzone = _this;\r\n\r\n    var elementOptions = (left = Dropzone.optionsForElement(_this.element)) != null ? left : {};\r\n\r\n    _this.options = Dropzone.extend({}, _this.defaultOptions, elementOptions, options != null ? options : {});\r\n\r\n    // If the browser failed, just call the fallback and leave\r\n    if (_this.options.forceFallback || !Dropzone.isBrowserSupported()) {\r\n      var _ret;\r\n\r\n      return _ret = _this.options.fallback.call(_this), _possibleConstructorReturn(_this, _ret);\r\n    }\r\n\r\n    // @options.url = @element.getAttribute \"action\" unless @options.url?\r\n    if (_this.options.url == null) {\r\n      _this.options.url = _this.element.getAttribute(\"action\");\r\n    }\r\n\r\n    if (!_this.options.url) {\r\n      throw new Error(\"No URL provided.\");\r\n    }\r\n\r\n    if (_this.options.acceptedFiles && _this.options.acceptedMimeTypes) {\r\n      throw new Error(\"You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.\");\r\n    }\r\n\r\n    if (_this.options.uploadMultiple && _this.options.chunking) {\r\n      throw new Error('You cannot set both: uploadMultiple and chunking.');\r\n    }\r\n\r\n    // Backwards compatibility\r\n    if (_this.options.acceptedMimeTypes) {\r\n      _this.options.acceptedFiles = _this.options.acceptedMimeTypes;\r\n      delete _this.options.acceptedMimeTypes;\r\n    }\r\n\r\n    // Backwards compatibility\r\n    if (_this.options.renameFilename != null) {\r\n      _this.options.renameFile = function (file) {\r\n        return _this.options.renameFilename.call(_this, file.name, file);\r\n      };\r\n    }\r\n\r\n    _this.options.method = _this.options.method.toUpperCase();\r\n\r\n    if ((fallback = _this.getExistingFallback()) && fallback.parentNode) {\r\n      // Remove the fallback\r\n      fallback.parentNode.removeChild(fallback);\r\n    }\r\n\r\n    // Display previews in the previewsContainer element or the Dropzone element unless explicitly set to false\r\n    if (_this.options.previewsContainer !== false) {\r\n      if (_this.options.previewsContainer) {\r\n        _this.previewsContainer = Dropzone.getElement(_this.options.previewsContainer, \"previewsContainer\");\r\n      } else {\r\n        _this.previewsContainer = _this.element;\r\n      }\r\n    }\r\n\r\n    if (_this.options.clickable) {\r\n      if (_this.options.clickable === true) {\r\n        _this.clickableElements = [_this.element];\r\n      } else {\r\n        _this.clickableElements = Dropzone.getElements(_this.options.clickable, \"clickable\");\r\n      }\r\n    }\r\n\r\n    _this.init();\r\n    return _this;\r\n  }\r\n\r\n  // Returns all files that have been accepted\r\n\r\n\r\n  _createClass(Dropzone, [{\r\n    key: \"getAcceptedFiles\",\r\n    value: function getAcceptedFiles() {\r\n      return this.files.filter(function (file) {\r\n        return file.accepted;\r\n      }).map(function (file) {\r\n        return file;\r\n      });\r\n    }\r\n\r\n    // Returns all files that have been rejected\r\n    // Not sure when that's going to be useful, but added for completeness.\r\n\r\n  }, {\r\n    key: \"getRejectedFiles\",\r\n    value: function getRejectedFiles() {\r\n      return this.files.filter(function (file) {\r\n        return !file.accepted;\r\n      }).map(function (file) {\r\n        return file;\r\n      });\r\n    }\r\n  }, {\r\n    key: \"getFilesWithStatus\",\r\n    value: function getFilesWithStatus(status) {\r\n      return this.files.filter(function (file) {\r\n        return file.status === status;\r\n      }).map(function (file) {\r\n        return file;\r\n      });\r\n    }\r\n\r\n    // Returns all files that are in the queue\r\n\r\n  }, {\r\n    key: \"getQueuedFiles\",\r\n    value: function getQueuedFiles() {\r\n      return this.getFilesWithStatus(Dropzone.QUEUED);\r\n    }\r\n  }, {\r\n    key: \"getUploadingFiles\",\r\n    value: function getUploadingFiles() {\r\n      return this.getFilesWithStatus(Dropzone.UPLOADING);\r\n    }\r\n  }, {\r\n    key: \"getAddedFiles\",\r\n    value: function getAddedFiles() {\r\n      return this.getFilesWithStatus(Dropzone.ADDED);\r\n    }\r\n\r\n    // Files that are either queued or uploading\r\n\r\n  }, {\r\n    key: \"getActiveFiles\",\r\n    value: function getActiveFiles() {\r\n      return this.files.filter(function (file) {\r\n        return file.status === Dropzone.UPLOADING || file.status === Dropzone.QUEUED;\r\n      }).map(function (file) {\r\n        return file;\r\n      });\r\n    }\r\n\r\n    // The function that gets called when Dropzone is initialized. You\r\n    // can (and should) setup event listeners inside this function.\r\n\r\n  }, {\r\n    key: \"init\",\r\n    value: function init() {\r\n      var _this3 = this;\r\n\r\n      // In case it isn't set already\r\n      if (this.element.tagName === \"form\") {\r\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\r\n      }\r\n\r\n      if (this.element.classList.contains(\"dropzone\") && !this.element.querySelector(\".dz-message\")) {\r\n        this.element.appendChild(Dropzone.createElement(\"<div class=\\\"dz-default dz-message\\\"><span>\" + this.options.dictDefaultMessage + \"</span></div>\"));\r\n      }\r\n\r\n      if (this.clickableElements.length) {\r\n        var setupHiddenFileInput = function setupHiddenFileInput() {\r\n          if (_this3.hiddenFileInput) {\r\n            _this3.hiddenFileInput.parentNode.removeChild(_this3.hiddenFileInput);\r\n          }\r\n          _this3.hiddenFileInput = document.createElement(\"input\");\r\n          _this3.hiddenFileInput.setAttribute(\"type\", \"file\");\r\n          if (_this3.options.maxFiles === null || _this3.options.maxFiles > 1) {\r\n            _this3.hiddenFileInput.setAttribute(\"multiple\", \"multiple\");\r\n          }\r\n          _this3.hiddenFileInput.className = \"dz-hidden-input\";\r\n\r\n          if (_this3.options.acceptedFiles !== null) {\r\n            _this3.hiddenFileInput.setAttribute(\"accept\", _this3.options.acceptedFiles);\r\n          }\r\n          if (_this3.options.capture !== null) {\r\n            _this3.hiddenFileInput.setAttribute(\"capture\", _this3.options.capture);\r\n          }\r\n\r\n          // Not setting `display=\"none\"` because some browsers don't accept clicks\r\n          // on elements that aren't displayed.\r\n          _this3.hiddenFileInput.style.visibility = \"hidden\";\r\n          _this3.hiddenFileInput.style.position = \"absolute\";\r\n          _this3.hiddenFileInput.style.top = \"0\";\r\n          _this3.hiddenFileInput.style.left = \"0\";\r\n          _this3.hiddenFileInput.style.height = \"0\";\r\n          _this3.hiddenFileInput.style.width = \"0\";\r\n          document.querySelector(_this3.options.hiddenInputContainer).appendChild(_this3.hiddenFileInput);\r\n          return _this3.hiddenFileInput.addEventListener(\"change\", function () {\r\n            var files = _this3.hiddenFileInput.files;\r\n\r\n            if (files.length) {\r\n              for (var _iterator10 = files, _isArray10 = true, _i10 = 0, _iterator10 = _isArray10 ? _iterator10 : _iterator10[Symbol.iterator]();;) {\r\n                var _ref9;\r\n\r\n                if (_isArray10) {\r\n                  if (_i10 >= _iterator10.length) break;\r\n                  _ref9 = _iterator10[_i10++];\r\n                } else {\r\n                  _i10 = _iterator10.next();\r\n                  if (_i10.done) break;\r\n                  _ref9 = _i10.value;\r\n                }\r\n\r\n                var file = _ref9;\r\n\r\n                _this3.addFile(file);\r\n              }\r\n            }\r\n            _this3.emit(\"addedfiles\", files);\r\n            return setupHiddenFileInput();\r\n          });\r\n        };\r\n        setupHiddenFileInput();\r\n      }\r\n\r\n      this.URL = window.URL !== null ? window.URL : window.webkitURL;\r\n\r\n      // Setup all event listeners on the Dropzone object itself.\r\n      // They're not in @setupEventListeners() because they shouldn't be removed\r\n      // again when the dropzone gets disabled.\r\n      for (var _iterator11 = this.events, _isArray11 = true, _i11 = 0, _iterator11 = _isArray11 ? _iterator11 : _iterator11[Symbol.iterator]();;) {\r\n        var _ref10;\r\n\r\n        if (_isArray11) {\r\n          if (_i11 >= _iterator11.length) break;\r\n          _ref10 = _iterator11[_i11++];\r\n        } else {\r\n          _i11 = _iterator11.next();\r\n          if (_i11.done) break;\r\n          _ref10 = _i11.value;\r\n        }\r\n\r\n        var eventName = _ref10;\r\n\r\n        this.on(eventName, this.options[eventName]);\r\n      }\r\n\r\n      this.on(\"uploadprogress\", function () {\r\n        return _this3.updateTotalUploadProgress();\r\n      });\r\n\r\n      this.on(\"removedfile\", function () {\r\n        return _this3.updateTotalUploadProgress();\r\n      });\r\n\r\n      this.on(\"canceled\", function (file) {\r\n        return _this3.emit(\"complete\", file);\r\n      });\r\n\r\n      // Emit a `queuecomplete` event if all files finished uploading.\r\n      this.on(\"complete\", function (file) {\r\n        if (_this3.getAddedFiles().length === 0 && _this3.getUploadingFiles().length === 0 && _this3.getQueuedFiles().length === 0) {\r\n          // This needs to be deferred so that `queuecomplete` really triggers after `complete`\r\n          return setTimeout(function () {\r\n            return _this3.emit(\"queuecomplete\");\r\n          }, 0);\r\n        }\r\n      });\r\n\r\n      var noPropagation = function noPropagation(e) {\r\n        e.stopPropagation();\r\n        if (e.preventDefault) {\r\n          return e.preventDefault();\r\n        } else {\r\n          return e.returnValue = false;\r\n        }\r\n      };\r\n\r\n      // Create the listeners\r\n      this.listeners = [{\r\n        element: this.element,\r\n        events: {\r\n          \"dragstart\": function dragstart(e) {\r\n            return _this3.emit(\"dragstart\", e);\r\n          },\r\n          \"dragenter\": function dragenter(e) {\r\n            noPropagation(e);\r\n            return _this3.emit(\"dragenter\", e);\r\n          },\r\n          \"dragover\": function dragover(e) {\r\n            // Makes it possible to drag files from chrome's download bar\r\n            // http://stackoverflow.com/questions/19526430/drag-and-drop-file-uploads-from-chrome-downloads-bar\r\n            // Try is required to prevent bug in Internet Explorer 11 (SCRIPT65535 exception)\r\n            var efct = void 0;\r\n            try {\r\n              efct = e.dataTransfer.effectAllowed;\r\n            } catch (error) {}\r\n            e.dataTransfer.dropEffect = 'move' === efct || 'linkMove' === efct ? 'move' : 'copy';\r\n\r\n            noPropagation(e);\r\n            return _this3.emit(\"dragover\", e);\r\n          },\r\n          \"dragleave\": function dragleave(e) {\r\n            return _this3.emit(\"dragleave\", e);\r\n          },\r\n          \"drop\": function drop(e) {\r\n            noPropagation(e);\r\n            return _this3.drop(e);\r\n          },\r\n          \"dragend\": function dragend(e) {\r\n            return _this3.emit(\"dragend\", e);\r\n          }\r\n\r\n          // This is disabled right now, because the browsers don't implement it properly.\r\n          // \"paste\": (e) =>\r\n          //   noPropagation e\r\n          //   @paste e\r\n        } }];\r\n\r\n      this.clickableElements.forEach(function (clickableElement) {\r\n        return _this3.listeners.push({\r\n          element: clickableElement,\r\n          events: {\r\n            \"click\": function click(evt) {\r\n              // Only the actual dropzone or the message element should trigger file selection\r\n              if (clickableElement !== _this3.element || evt.target === _this3.element || Dropzone.elementInside(evt.target, _this3.element.querySelector(\".dz-message\"))) {\r\n                _this3.hiddenFileInput.click(); // Forward the click\r\n              }\r\n              return true;\r\n            }\r\n          }\r\n        });\r\n      });\r\n\r\n      this.enable();\r\n\r\n      return this.options.init.call(this);\r\n    }\r\n\r\n    // Not fully tested yet\r\n\r\n  }, {\r\n    key: \"destroy\",\r\n    value: function destroy() {\r\n      this.disable();\r\n      this.removeAllFiles(true);\r\n      if (this.hiddenFileInput != null ? this.hiddenFileInput.parentNode : undefined) {\r\n        this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);\r\n        this.hiddenFileInput = null;\r\n      }\r\n      delete this.element.dropzone;\r\n      return Dropzone.instances.splice(Dropzone.instances.indexOf(this), 1);\r\n    }\r\n  }, {\r\n    key: \"updateTotalUploadProgress\",\r\n    value: function updateTotalUploadProgress() {\r\n      var totalUploadProgress = void 0;\r\n      var totalBytesSent = 0;\r\n      var totalBytes = 0;\r\n\r\n      var activeFiles = this.getActiveFiles();\r\n\r\n      if (activeFiles.length) {\r\n        for (var _iterator12 = this.getActiveFiles(), _isArray12 = true, _i12 = 0, _iterator12 = _isArray12 ? _iterator12 : _iterator12[Symbol.iterator]();;) {\r\n          var _ref11;\r\n\r\n          if (_isArray12) {\r\n            if (_i12 >= _iterator12.length) break;\r\n            _ref11 = _iterator12[_i12++];\r\n          } else {\r\n            _i12 = _iterator12.next();\r\n            if (_i12.done) break;\r\n            _ref11 = _i12.value;\r\n          }\r\n\r\n          var file = _ref11;\r\n\r\n          totalBytesSent += file.upload.bytesSent;\r\n          totalBytes += file.upload.total;\r\n        }\r\n        totalUploadProgress = 100 * totalBytesSent / totalBytes;\r\n      } else {\r\n        totalUploadProgress = 100;\r\n      }\r\n\r\n      return this.emit(\"totaluploadprogress\", totalUploadProgress, totalBytes, totalBytesSent);\r\n    }\r\n\r\n    // @options.paramName can be a function taking one parameter rather than a string.\r\n    // A parameter name for a file is obtained simply by calling this with an index number.\r\n\r\n  }, {\r\n    key: \"_getParamName\",\r\n    value: function _getParamName(n) {\r\n      if (typeof this.options.paramName === \"function\") {\r\n        return this.options.paramName(n);\r\n      } else {\r\n        return \"\" + this.options.paramName + (this.options.uploadMultiple ? \"[\" + n + \"]\" : \"\");\r\n      }\r\n    }\r\n\r\n    // If @options.renameFile is a function,\r\n    // the function will be used to rename the file.name before appending it to the formData\r\n\r\n  }, {\r\n    key: \"_renameFile\",\r\n    value: function _renameFile(file) {\r\n      if (typeof this.options.renameFile !== \"function\") {\r\n        return file.name;\r\n      }\r\n      return this.options.renameFile(file);\r\n    }\r\n\r\n    // Returns a form that can be used as fallback if the browser does not support DragnDrop\r\n    //\r\n    // If the dropzone is already a form, only the input field and button are returned. Otherwise a complete form element is provided.\r\n    // This code has to pass in IE7 :(\r\n\r\n  }, {\r\n    key: \"getFallbackForm\",\r\n    value: function getFallbackForm() {\r\n      var existingFallback = void 0,\r\n          form = void 0;\r\n      if (existingFallback = this.getExistingFallback()) {\r\n        return existingFallback;\r\n      }\r\n\r\n      var fieldsString = \"<div class=\\\"dz-fallback\\\">\";\r\n      if (this.options.dictFallbackText) {\r\n        fieldsString += \"<p>\" + this.options.dictFallbackText + \"</p>\";\r\n      }\r\n      fieldsString += \"<input type=\\\"file\\\" name=\\\"\" + this._getParamName(0) + \"\\\" \" + (this.options.uploadMultiple ? 'multiple=\"multiple\"' : undefined) + \" /><input type=\\\"submit\\\" value=\\\"Upload!\\\"></div>\";\r\n\r\n      var fields = Dropzone.createElement(fieldsString);\r\n      if (this.element.tagName !== \"FORM\") {\r\n        form = Dropzone.createElement(\"<form action=\\\"\" + this.options.url + \"\\\" enctype=\\\"multipart/form-data\\\" method=\\\"\" + this.options.method + \"\\\"></form>\");\r\n        form.appendChild(fields);\r\n      } else {\r\n        // Make sure that the enctype and method attributes are set properly\r\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\r\n        this.element.setAttribute(\"method\", this.options.method);\r\n      }\r\n      return form != null ? form : fields;\r\n    }\r\n\r\n    // Returns the fallback elements if they exist already\r\n    //\r\n    // This code has to pass in IE7 :(\r\n\r\n  }, {\r\n    key: \"getExistingFallback\",\r\n    value: function getExistingFallback() {\r\n      var getFallback = function getFallback(elements) {\r\n        for (var _iterator13 = elements, _isArray13 = true, _i13 = 0, _iterator13 = _isArray13 ? _iterator13 : _iterator13[Symbol.iterator]();;) {\r\n          var _ref12;\r\n\r\n          if (_isArray13) {\r\n            if (_i13 >= _iterator13.length) break;\r\n            _ref12 = _iterator13[_i13++];\r\n          } else {\r\n            _i13 = _iterator13.next();\r\n            if (_i13.done) break;\r\n            _ref12 = _i13.value;\r\n          }\r\n\r\n          var el = _ref12;\r\n\r\n          if (/(^| )fallback($| )/.test(el.className)) {\r\n            return el;\r\n          }\r\n        }\r\n      };\r\n\r\n      var _arr = [\"div\", \"form\"];\r\n      for (var _i14 = 0; _i14 < _arr.length; _i14++) {\r\n        var tagName = _arr[_i14];\r\n        var fallback;\r\n        if (fallback = getFallback(this.element.getElementsByTagName(tagName))) {\r\n          return fallback;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Activates all listeners stored in @listeners\r\n\r\n  }, {\r\n    key: \"setupEventListeners\",\r\n    value: function setupEventListeners() {\r\n      return this.listeners.map(function (elementListeners) {\r\n        return function () {\r\n          var result = [];\r\n          for (var event in elementListeners.events) {\r\n            var listener = elementListeners.events[event];\r\n            result.push(elementListeners.element.addEventListener(event, listener, false));\r\n          }\r\n          return result;\r\n        }();\r\n      });\r\n    }\r\n\r\n    // Deactivates all listeners stored in @listeners\r\n\r\n  }, {\r\n    key: \"removeEventListeners\",\r\n    value: function removeEventListeners() {\r\n      return this.listeners.map(function (elementListeners) {\r\n        return function () {\r\n          var result = [];\r\n          for (var event in elementListeners.events) {\r\n            var listener = elementListeners.events[event];\r\n            result.push(elementListeners.element.removeEventListener(event, listener, false));\r\n          }\r\n          return result;\r\n        }();\r\n      });\r\n    }\r\n\r\n    // Removes all event listeners and cancels all files in the queue or being processed.\r\n\r\n  }, {\r\n    key: \"disable\",\r\n    value: function disable() {\r\n      var _this4 = this;\r\n\r\n      this.clickableElements.forEach(function (element) {\r\n        return element.classList.remove(\"dz-clickable\");\r\n      });\r\n      this.removeEventListeners();\r\n      this.disabled = true;\r\n\r\n      return this.files.map(function (file) {\r\n        return _this4.cancelUpload(file);\r\n      });\r\n    }\r\n  }, {\r\n    key: \"enable\",\r\n    value: function enable() {\r\n      delete this.disabled;\r\n      this.clickableElements.forEach(function (element) {\r\n        return element.classList.add(\"dz-clickable\");\r\n      });\r\n      return this.setupEventListeners();\r\n    }\r\n\r\n    // Returns a nicely formatted filesize\r\n\r\n  }, {\r\n    key: \"filesize\",\r\n    value: function filesize(size) {\r\n      var selectedSize = 0;\r\n      var selectedUnit = \"b\";\r\n\r\n      if (size > 0) {\r\n        var units = ['tb', 'gb', 'mb', 'kb', 'b'];\r\n\r\n        for (var i = 0; i < units.length; i++) {\r\n          var unit = units[i];\r\n          var cutoff = Math.pow(this.options.filesizeBase, 4 - i) / 10;\r\n\r\n          if (size >= cutoff) {\r\n            selectedSize = size / Math.pow(this.options.filesizeBase, 4 - i);\r\n            selectedUnit = unit;\r\n            break;\r\n          }\r\n        }\r\n\r\n        selectedSize = Math.round(10 * selectedSize) / 10; // Cutting of digits\r\n      }\r\n\r\n      return \"<strong>\" + selectedSize + \"</strong> \" + this.options.dictFileSizeUnits[selectedUnit];\r\n    }\r\n\r\n    // Adds or removes the `dz-max-files-reached` class from the form.\r\n\r\n  }, {\r\n    key: \"_updateMaxFilesReachedClass\",\r\n    value: function _updateMaxFilesReachedClass() {\r\n      if (this.options.maxFiles != null && this.getAcceptedFiles().length >= this.options.maxFiles) {\r\n        if (this.getAcceptedFiles().length === this.options.maxFiles) {\r\n          this.emit('maxfilesreached', this.files);\r\n        }\r\n        return this.element.classList.add(\"dz-max-files-reached\");\r\n      } else {\r\n        return this.element.classList.remove(\"dz-max-files-reached\");\r\n      }\r\n    }\r\n  }, {\r\n    key: \"drop\",\r\n    value: function drop(e) {\r\n      if (!e.dataTransfer) {\r\n        return;\r\n      }\r\n      this.emit(\"drop\", e);\r\n\r\n      // Convert the FileList to an Array\r\n      // This is necessary for IE11\r\n      var files = [];\r\n      for (var i = 0; i < e.dataTransfer.files.length; i++) {\r\n        files[i] = e.dataTransfer.files[i];\r\n      }\r\n\r\n      this.emit(\"addedfiles\", files);\r\n\r\n      // Even if it's a folder, files.length will contain the folders.\r\n      if (files.length) {\r\n        var items = e.dataTransfer.items;\r\n\r\n        if (items && items.length && items[0].webkitGetAsEntry != null) {\r\n          // The browser supports dropping of folders, so handle items instead of files\r\n          this._addFilesFromItems(items);\r\n        } else {\r\n          this.handleFiles(files);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: \"paste\",\r\n    value: function paste(e) {\r\n      if (__guard__(e != null ? e.clipboardData : undefined, function (x) {\r\n        return x.items;\r\n      }) == null) {\r\n        return;\r\n      }\r\n\r\n      this.emit(\"paste\", e);\r\n      var items = e.clipboardData.items;\r\n\r\n\r\n      if (items.length) {\r\n        return this._addFilesFromItems(items);\r\n      }\r\n    }\r\n  }, {\r\n    key: \"handleFiles\",\r\n    value: function handleFiles(files) {\r\n      for (var _iterator14 = files, _isArray14 = true, _i15 = 0, _iterator14 = _isArray14 ? _iterator14 : _iterator14[Symbol.iterator]();;) {\r\n        var _ref13;\r\n\r\n        if (_isArray14) {\r\n          if (_i15 >= _iterator14.length) break;\r\n          _ref13 = _iterator14[_i15++];\r\n        } else {\r\n          _i15 = _iterator14.next();\r\n          if (_i15.done) break;\r\n          _ref13 = _i15.value;\r\n        }\r\n\r\n        var file = _ref13;\r\n\r\n        this.addFile(file);\r\n      }\r\n    }\r\n\r\n    // When a folder is dropped (or files are pasted), items must be handled\r\n    // instead of files.\r\n\r\n  }, {\r\n    key: \"_addFilesFromItems\",\r\n    value: function _addFilesFromItems(items) {\r\n      var _this5 = this;\r\n\r\n      return function () {\r\n        var result = [];\r\n        for (var _iterator15 = items, _isArray15 = true, _i16 = 0, _iterator15 = _isArray15 ? _iterator15 : _iterator15[Symbol.iterator]();;) {\r\n          var _ref14;\r\n\r\n          if (_isArray15) {\r\n            if (_i16 >= _iterator15.length) break;\r\n            _ref14 = _iterator15[_i16++];\r\n          } else {\r\n            _i16 = _iterator15.next();\r\n            if (_i16.done) break;\r\n            _ref14 = _i16.value;\r\n          }\r\n\r\n          var item = _ref14;\r\n\r\n          var entry;\r\n          if (item.webkitGetAsEntry != null && (entry = item.webkitGetAsEntry())) {\r\n            if (entry.isFile) {\r\n              result.push(_this5.addFile(item.getAsFile()));\r\n            } else if (entry.isDirectory) {\r\n              // Append all files from that directory to files\r\n              result.push(_this5._addFilesFromDirectory(entry, entry.name));\r\n            } else {\r\n              result.push(undefined);\r\n            }\r\n          } else if (item.getAsFile != null) {\r\n            if (item.kind == null || item.kind === \"file\") {\r\n              result.push(_this5.addFile(item.getAsFile()));\r\n            } else {\r\n              result.push(undefined);\r\n            }\r\n          } else {\r\n            result.push(undefined);\r\n          }\r\n        }\r\n        return result;\r\n      }();\r\n    }\r\n\r\n    // Goes through the directory, and adds each file it finds recursively\r\n\r\n  }, {\r\n    key: \"_addFilesFromDirectory\",\r\n    value: function _addFilesFromDirectory(directory, path) {\r\n      var _this6 = this;\r\n\r\n      var dirReader = directory.createReader();\r\n\r\n      var errorHandler = function errorHandler(error) {\r\n        return __guardMethod__(console, 'log', function (o) {\r\n          return o.log(error);\r\n        });\r\n      };\r\n\r\n      var readEntries = function readEntries() {\r\n        return dirReader.readEntries(function (entries) {\r\n          if (entries.length > 0) {\r\n            for (var _iterator16 = entries, _isArray16 = true, _i17 = 0, _iterator16 = _isArray16 ? _iterator16 : _iterator16[Symbol.iterator]();;) {\r\n              var _ref15;\r\n\r\n              if (_isArray16) {\r\n                if (_i17 >= _iterator16.length) break;\r\n                _ref15 = _iterator16[_i17++];\r\n              } else {\r\n                _i17 = _iterator16.next();\r\n                if (_i17.done) break;\r\n                _ref15 = _i17.value;\r\n              }\r\n\r\n              var entry = _ref15;\r\n\r\n              if (entry.isFile) {\r\n                entry.file(function (file) {\r\n                  if (_this6.options.ignoreHiddenFiles && file.name.substring(0, 1) === '.') {\r\n                    return;\r\n                  }\r\n                  file.fullPath = path + \"/\" + file.name;\r\n                  return _this6.addFile(file);\r\n                });\r\n              } else if (entry.isDirectory) {\r\n                _this6._addFilesFromDirectory(entry, path + \"/\" + entry.name);\r\n              }\r\n            }\r\n\r\n            // Recursively call readEntries() again, since browser only handle\r\n            // the first 100 entries.\r\n            // See: https://developer.mozilla.org/en-US/docs/Web/API/DirectoryReader#readEntries\r\n            readEntries();\r\n          }\r\n          return null;\r\n        }, errorHandler);\r\n      };\r\n\r\n      return readEntries();\r\n    }\r\n\r\n    // If `done()` is called without argument the file is accepted\r\n    // If you call it with an error message, the file is rejected\r\n    // (This allows for asynchronous validation)\r\n    //\r\n    // This function checks the filesize, and if the file.type passes the\r\n    // `acceptedFiles` check.\r\n\r\n  }, {\r\n    key: \"accept\",\r\n    value: function accept(file, done) {\r\n      if (file.size > this.options.maxFilesize * 1024 * 1024) {\r\n        return done(this.options.dictFileTooBig.replace(\"{{filesize}}\", Math.round(file.size / 1024 / 10.24) / 100).replace(\"{{maxFilesize}}\", this.options.maxFilesize));\r\n      } else if (!Dropzone.isValidFile(file, this.options.acceptedFiles)) {\r\n        return done(this.options.dictInvalidFileType);\r\n      } else if (this.options.maxFiles != null && this.getAcceptedFiles().length >= this.options.maxFiles) {\r\n        done(this.options.dictMaxFilesExceeded.replace(\"{{maxFiles}}\", this.options.maxFiles));\r\n        return this.emit(\"maxfilesexceeded\", file);\r\n      } else {\r\n        return this.options.accept.call(this, file, done);\r\n      }\r\n    }\r\n  }, {\r\n    key: \"addFile\",\r\n    value: function addFile(file) {\r\n      var _this7 = this;\r\n\r\n      file.upload = {\r\n        uuid: Dropzone.uuidv4(),\r\n        progress: 0,\r\n        // Setting the total upload size to file.size for the beginning\r\n        // It's actual different than the size to be transmitted.\r\n        total: file.size,\r\n        bytesSent: 0,\r\n        filename: this._renameFile(file),\r\n        chunked: this.options.chunking && (this.options.forceChunking || file.size > this.options.chunkSize),\r\n        totalChunkCount: Math.ceil(file.size / this.options.chunkSize)\r\n      };\r\n      this.files.push(file);\r\n\r\n      file.status = Dropzone.ADDED;\r\n\r\n      this.emit(\"addedfile\", file);\r\n\r\n      this._enqueueThumbnail(file);\r\n\r\n      return this.accept(file, function (error) {\r\n        if (error) {\r\n          file.accepted = false;\r\n          _this7._errorProcessing([file], error); // Will set the file.status\r\n        } else {\r\n          file.accepted = true;\r\n          if (_this7.options.autoQueue) {\r\n            _this7.enqueueFile(file);\r\n          } // Will set .accepted = true\r\n        }\r\n        return _this7._updateMaxFilesReachedClass();\r\n      });\r\n    }\r\n\r\n    // Wrapper for enqueueFile\r\n\r\n  }, {\r\n    key: \"enqueueFiles\",\r\n    value: function enqueueFiles(files) {\r\n      for (var _iterator17 = files, _isArray17 = true, _i18 = 0, _iterator17 = _isArray17 ? _iterator17 : _iterator17[Symbol.iterator]();;) {\r\n        var _ref16;\r\n\r\n        if (_isArray17) {\r\n          if (_i18 >= _iterator17.length) break;\r\n          _ref16 = _iterator17[_i18++];\r\n        } else {\r\n          _i18 = _iterator17.next();\r\n          if (_i18.done) break;\r\n          _ref16 = _i18.value;\r\n        }\r\n\r\n        var file = _ref16;\r\n\r\n        this.enqueueFile(file);\r\n      }\r\n      return null;\r\n    }\r\n  }, {\r\n    key: \"enqueueFile\",\r\n    value: function enqueueFile(file) {\r\n      var _this8 = this;\r\n\r\n      if (file.status === Dropzone.ADDED && file.accepted === true) {\r\n        file.status = Dropzone.QUEUED;\r\n        if (this.options.autoProcessQueue) {\r\n          return setTimeout(function () {\r\n            return _this8.processQueue();\r\n          }, 0); // Deferring the call\r\n        }\r\n      } else {\r\n        throw new Error(\"This file can't be queued because it has already been processed or was rejected.\");\r\n      }\r\n    }\r\n  }, {\r\n    key: \"_enqueueThumbnail\",\r\n    value: function _enqueueThumbnail(file) {\r\n      var _this9 = this;\r\n\r\n      if (this.options.createImageThumbnails && file.type.match(/image.*/) && file.size <= this.options.maxThumbnailFilesize * 1024 * 1024) {\r\n        this._thumbnailQueue.push(file);\r\n        return setTimeout(function () {\r\n          return _this9._processThumbnailQueue();\r\n        }, 0); // Deferring the call\r\n      }\r\n    }\r\n  }, {\r\n    key: \"_processThumbnailQueue\",\r\n    value: function _processThumbnailQueue() {\r\n      var _this10 = this;\r\n\r\n      if (this._processingThumbnail || this._thumbnailQueue.length === 0) {\r\n        return;\r\n      }\r\n\r\n      this._processingThumbnail = true;\r\n      var file = this._thumbnailQueue.shift();\r\n      return this.createThumbnail(file, this.options.thumbnailWidth, this.options.thumbnailHeight, this.options.thumbnailMethod, true, function (dataUrl) {\r\n        _this10.emit(\"thumbnail\", file, dataUrl);\r\n        _this10._processingThumbnail = false;\r\n        return _this10._processThumbnailQueue();\r\n      });\r\n    }\r\n\r\n    // Can be called by the user to remove a file\r\n\r\n  }, {\r\n    key: \"removeFile\",\r\n    value: function removeFile(file) {\r\n      if (file.status === Dropzone.UPLOADING) {\r\n        this.cancelUpload(file);\r\n      }\r\n      this.files = without(this.files, file);\r\n\r\n      this.emit(\"removedfile\", file);\r\n      if (this.files.length === 0) {\r\n        return this.emit(\"reset\");\r\n      }\r\n    }\r\n\r\n    // Removes all files that aren't currently processed from the list\r\n\r\n  }, {\r\n    key: \"removeAllFiles\",\r\n    value: function removeAllFiles(cancelIfNecessary) {\r\n      // Create a copy of files since removeFile() changes the @files array.\r\n      if (cancelIfNecessary == null) {\r\n        cancelIfNecessary = false;\r\n      }\r\n      for (var _iterator18 = this.files.slice(), _isArray18 = true, _i19 = 0, _iterator18 = _isArray18 ? _iterator18 : _iterator18[Symbol.iterator]();;) {\r\n        var _ref17;\r\n\r\n        if (_isArray18) {\r\n          if (_i19 >= _iterator18.length) break;\r\n          _ref17 = _iterator18[_i19++];\r\n        } else {\r\n          _i19 = _iterator18.next();\r\n          if (_i19.done) break;\r\n          _ref17 = _i19.value;\r\n        }\r\n\r\n        var file = _ref17;\r\n\r\n        if (file.status !== Dropzone.UPLOADING || cancelIfNecessary) {\r\n          this.removeFile(file);\r\n        }\r\n      }\r\n      return null;\r\n    }\r\n\r\n    // Resizes an image before it gets sent to the server. This function is the default behavior of\r\n    // `options.transformFile` if `resizeWidth` or `resizeHeight` are set. The callback is invoked with\r\n    // the resized blob.\r\n\r\n  }, {\r\n    key: \"resizeImage\",\r\n    value: function resizeImage(file, width, height, resizeMethod, callback) {\r\n      var _this11 = this;\r\n\r\n      return this.createThumbnail(file, width, height, resizeMethod, false, function (dataUrl, canvas) {\r\n        if (canvas == null) {\r\n          // The image has not been resized\r\n          return callback(file);\r\n        } else {\r\n          var resizeMimeType = _this11.options.resizeMimeType;\r\n\r\n          if (resizeMimeType == null) {\r\n            resizeMimeType = file.type;\r\n          }\r\n          var resizedDataURL = canvas.toDataURL(resizeMimeType, _this11.options.resizeQuality);\r\n          if (resizeMimeType === 'image/jpeg' || resizeMimeType === 'image/jpg') {\r\n            // Now add the original EXIF information\r\n            resizedDataURL = ExifRestore.restore(file.dataURL, resizedDataURL);\r\n          }\r\n          return callback(Dropzone.dataURItoBlob(resizedDataURL));\r\n        }\r\n      });\r\n    }\r\n  }, {\r\n    key: \"createThumbnail\",\r\n    value: function createThumbnail(file, width, height, resizeMethod, fixOrientation, callback) {\r\n      var _this12 = this;\r\n\r\n      var fileReader = new FileReader();\r\n\r\n      fileReader.onload = function () {\r\n\r\n        file.dataURL = fileReader.result;\r\n\r\n        // Don't bother creating a thumbnail for SVG images since they're vector\r\n        if (file.type === \"image/svg+xml\") {\r\n          if (callback != null) {\r\n            callback(fileReader.result);\r\n          }\r\n          return;\r\n        }\r\n\r\n        return _this12.createThumbnailFromUrl(file, width, height, resizeMethod, fixOrientation, callback);\r\n      };\r\n\r\n      return fileReader.readAsDataURL(file);\r\n    }\r\n  }, {\r\n    key: \"createThumbnailFromUrl\",\r\n    value: function createThumbnailFromUrl(file, width, height, resizeMethod, fixOrientation, callback, crossOrigin) {\r\n      var _this13 = this;\r\n\r\n      // Not using `new Image` here because of a bug in latest Chrome versions.\r\n      // See https://github.com/enyo/dropzone/pull/226\r\n      var img = document.createElement(\"img\");\r\n\r\n      if (crossOrigin) {\r\n        img.crossOrigin = crossOrigin;\r\n      }\r\n\r\n      img.onload = function () {\r\n        var loadExif = function loadExif(callback) {\r\n          return callback(1);\r\n        };\r\n        if (typeof EXIF !== 'undefined' && EXIF !== null && fixOrientation) {\r\n          loadExif = function loadExif(callback) {\r\n            return EXIF.getData(img, function () {\r\n              return callback(EXIF.getTag(this, 'Orientation'));\r\n            });\r\n          };\r\n        }\r\n\r\n        return loadExif(function (orientation) {\r\n          file.width = img.width;\r\n          file.height = img.height;\r\n\r\n          var resizeInfo = _this13.options.resize.call(_this13, file, width, height, resizeMethod);\r\n\r\n          var canvas = document.createElement(\"canvas\");\r\n          var ctx = canvas.getContext(\"2d\");\r\n\r\n          canvas.width = resizeInfo.trgWidth;\r\n          canvas.height = resizeInfo.trgHeight;\r\n\r\n          if (orientation > 4) {\r\n            canvas.width = resizeInfo.trgHeight;\r\n            canvas.height = resizeInfo.trgWidth;\r\n          }\r\n\r\n          switch (orientation) {\r\n            case 2:\r\n              // horizontal flip\r\n              ctx.translate(canvas.width, 0);\r\n              ctx.scale(-1, 1);\r\n              break;\r\n            case 3:\r\n              // 180° rotate left\r\n              ctx.translate(canvas.width, canvas.height);\r\n              ctx.rotate(Math.PI);\r\n              break;\r\n            case 4:\r\n              // vertical flip\r\n              ctx.translate(0, canvas.height);\r\n              ctx.scale(1, -1);\r\n              break;\r\n            case 5:\r\n              // vertical flip + 90 rotate right\r\n              ctx.rotate(0.5 * Math.PI);\r\n              ctx.scale(1, -1);\r\n              break;\r\n            case 6:\r\n              // 90° rotate right\r\n              ctx.rotate(0.5 * Math.PI);\r\n              ctx.translate(0, -canvas.height);\r\n              break;\r\n            case 7:\r\n              // horizontal flip + 90 rotate right\r\n              ctx.rotate(0.5 * Math.PI);\r\n              ctx.translate(canvas.width, -canvas.height);\r\n              ctx.scale(-1, 1);\r\n              break;\r\n            case 8:\r\n              // 90° rotate left\r\n              ctx.rotate(-0.5 * Math.PI);\r\n              ctx.translate(-canvas.width, 0);\r\n              break;\r\n          }\r\n\r\n          // This is a bugfix for iOS' scaling bug.\r\n          drawImageIOSFix(ctx, img, resizeInfo.srcX != null ? resizeInfo.srcX : 0, resizeInfo.srcY != null ? resizeInfo.srcY : 0, resizeInfo.srcWidth, resizeInfo.srcHeight, resizeInfo.trgX != null ? resizeInfo.trgX : 0, resizeInfo.trgY != null ? resizeInfo.trgY : 0, resizeInfo.trgWidth, resizeInfo.trgHeight);\r\n\r\n          var thumbnail = canvas.toDataURL(\"image/png\");\r\n\r\n          if (callback != null) {\r\n            return callback(thumbnail, canvas);\r\n          }\r\n        });\r\n      };\r\n\r\n      if (callback != null) {\r\n        img.onerror = callback;\r\n      }\r\n\r\n      return img.src = file.dataURL;\r\n    }\r\n\r\n    // Goes through the queue and processes files if there aren't too many already.\r\n\r\n  }, {\r\n    key: \"processQueue\",\r\n    value: function processQueue() {\r\n      var parallelUploads = this.options.parallelUploads;\r\n\r\n      var processingLength = this.getUploadingFiles().length;\r\n      var i = processingLength;\r\n\r\n      // There are already at least as many files uploading than should be\r\n      if (processingLength >= parallelUploads) {\r\n        return;\r\n      }\r\n\r\n      var queuedFiles = this.getQueuedFiles();\r\n\r\n      if (!(queuedFiles.length > 0)) {\r\n        return;\r\n      }\r\n\r\n      if (this.options.uploadMultiple) {\r\n        // The files should be uploaded in one request\r\n        return this.processFiles(queuedFiles.slice(0, parallelUploads - processingLength));\r\n      } else {\r\n        while (i < parallelUploads) {\r\n          if (!queuedFiles.length) {\r\n            return;\r\n          } // Nothing left to process\r\n          this.processFile(queuedFiles.shift());\r\n          i++;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Wrapper for `processFiles`\r\n\r\n  }, {\r\n    key: \"processFile\",\r\n    value: function processFile(file) {\r\n      return this.processFiles([file]);\r\n    }\r\n\r\n    // Loads the file, then calls finishedLoading()\r\n\r\n  }, {\r\n    key: \"processFiles\",\r\n    value: function processFiles(files) {\r\n      for (var _iterator19 = files, _isArray19 = true, _i20 = 0, _iterator19 = _isArray19 ? _iterator19 : _iterator19[Symbol.iterator]();;) {\r\n        var _ref18;\r\n\r\n        if (_isArray19) {\r\n          if (_i20 >= _iterator19.length) break;\r\n          _ref18 = _iterator19[_i20++];\r\n        } else {\r\n          _i20 = _iterator19.next();\r\n          if (_i20.done) break;\r\n          _ref18 = _i20.value;\r\n        }\r\n\r\n        var file = _ref18;\r\n\r\n        file.processing = true; // Backwards compatibility\r\n        file.status = Dropzone.UPLOADING;\r\n\r\n        this.emit(\"processing\", file);\r\n      }\r\n\r\n      if (this.options.uploadMultiple) {\r\n        this.emit(\"processingmultiple\", files);\r\n      }\r\n\r\n      return this.uploadFiles(files);\r\n    }\r\n  }, {\r\n    key: \"_getFilesWithXhr\",\r\n    value: function _getFilesWithXhr(xhr) {\r\n      var files = void 0;\r\n      return files = this.files.filter(function (file) {\r\n        return file.xhr === xhr;\r\n      }).map(function (file) {\r\n        return file;\r\n      });\r\n    }\r\n\r\n    // Cancels the file upload and sets the status to CANCELED\r\n    // **if** the file is actually being uploaded.\r\n    // If it's still in the queue, the file is being removed from it and the status\r\n    // set to CANCELED.\r\n\r\n  }, {\r\n    key: \"cancelUpload\",\r\n    value: function cancelUpload(file) {\r\n      if (file.status === Dropzone.UPLOADING) {\r\n        var groupedFiles = this._getFilesWithXhr(file.xhr);\r\n        for (var _iterator20 = groupedFiles, _isArray20 = true, _i21 = 0, _iterator20 = _isArray20 ? _iterator20 : _iterator20[Symbol.iterator]();;) {\r\n          var _ref19;\r\n\r\n          if (_isArray20) {\r\n            if (_i21 >= _iterator20.length) break;\r\n            _ref19 = _iterator20[_i21++];\r\n          } else {\r\n            _i21 = _iterator20.next();\r\n            if (_i21.done) break;\r\n            _ref19 = _i21.value;\r\n          }\r\n\r\n          var groupedFile = _ref19;\r\n\r\n          groupedFile.status = Dropzone.CANCELED;\r\n        }\r\n        if (typeof file.xhr !== 'undefined') {\r\n          file.xhr.abort();\r\n        }\r\n        for (var _iterator21 = groupedFiles, _isArray21 = true, _i22 = 0, _iterator21 = _isArray21 ? _iterator21 : _iterator21[Symbol.iterator]();;) {\r\n          var _ref20;\r\n\r\n          if (_isArray21) {\r\n            if (_i22 >= _iterator21.length) break;\r\n            _ref20 = _iterator21[_i22++];\r\n          } else {\r\n            _i22 = _iterator21.next();\r\n            if (_i22.done) break;\r\n            _ref20 = _i22.value;\r\n          }\r\n\r\n          var _groupedFile = _ref20;\r\n\r\n          this.emit(\"canceled\", _groupedFile);\r\n        }\r\n        if (this.options.uploadMultiple) {\r\n          this.emit(\"canceledmultiple\", groupedFiles);\r\n        }\r\n      } else if (file.status === Dropzone.ADDED || file.status === Dropzone.QUEUED) {\r\n        file.status = Dropzone.CANCELED;\r\n        this.emit(\"canceled\", file);\r\n        if (this.options.uploadMultiple) {\r\n          this.emit(\"canceledmultiple\", [file]);\r\n        }\r\n      }\r\n\r\n      if (this.options.autoProcessQueue) {\r\n        return this.processQueue();\r\n      }\r\n    }\r\n  }, {\r\n    key: \"resolveOption\",\r\n    value: function resolveOption(option) {\r\n      if (typeof option === 'function') {\r\n        for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\r\n          args[_key3 - 1] = arguments[_key3];\r\n        }\r\n\r\n        return option.apply(this, args);\r\n      }\r\n      return option;\r\n    }\r\n  }, {\r\n    key: \"uploadFile\",\r\n    value: function uploadFile(file) {\r\n      return this.uploadFiles([file]);\r\n    }\r\n  }, {\r\n    key: \"uploadFiles\",\r\n    value: function uploadFiles(files) {\r\n      var _this14 = this;\r\n\r\n      this._transformFiles(files, function (transformedFiles) {\r\n        if (files[0].upload.chunked) {\r\n          // This file should be sent in chunks!\r\n\r\n          // If the chunking option is set, we **know** that there can only be **one** file, since\r\n          // uploadMultiple is not allowed with this option.\r\n          var file = files[0];\r\n          var transformedFile = transformedFiles[0];\r\n          var startedChunkCount = 0;\r\n\r\n          file.upload.chunks = [];\r\n\r\n          var handleNextChunk = function handleNextChunk() {\r\n            var chunkIndex = 0;\r\n\r\n            // Find the next item in file.upload.chunks that is not defined yet.\r\n            while (file.upload.chunks[chunkIndex] !== undefined) {\r\n              chunkIndex++;\r\n            }\r\n\r\n            // This means, that all chunks have already been started.\r\n            if (chunkIndex >= file.upload.totalChunkCount) return;\r\n\r\n            startedChunkCount++;\r\n\r\n            var start = chunkIndex * _this14.options.chunkSize;\r\n            var end = Math.min(start + _this14.options.chunkSize, file.size);\r\n\r\n            var dataBlock = {\r\n              name: _this14._getParamName(0),\r\n              data: transformedFile.webkitSlice ? transformedFile.webkitSlice(start, end) : transformedFile.slice(start, end),\r\n              filename: file.upload.filename,\r\n              chunkIndex: chunkIndex\r\n            };\r\n\r\n            file.upload.chunks[chunkIndex] = {\r\n              file: file,\r\n              index: chunkIndex,\r\n              dataBlock: dataBlock, // In case we want to retry.\r\n              status: Dropzone.UPLOADING,\r\n              progress: 0,\r\n              retries: 0 // The number of times this block has been retried.\r\n            };\r\n\r\n            _this14._uploadData(files, [dataBlock]);\r\n          };\r\n\r\n          file.upload.finishedChunkUpload = function (chunk) {\r\n            var allFinished = true;\r\n            chunk.status = Dropzone.SUCCESS;\r\n\r\n            // Clear the data from the chunk\r\n            chunk.dataBlock = null;\r\n\r\n            for (var i = 0; i < file.upload.totalChunkCount; i++) {\r\n              if (file.upload.chunks[i] === undefined) {\r\n                return handleNextChunk();\r\n              }\r\n              if (file.upload.chunks[i].status !== Dropzone.SUCCESS) {\r\n                allFinished = false;\r\n              }\r\n            }\r\n\r\n            if (allFinished) {\r\n              _this14.options.chunksUploaded(file, function () {\r\n                _this14._finished(files, '', null);\r\n              });\r\n            }\r\n          };\r\n\r\n          if (_this14.options.parallelChunkUploads) {\r\n            for (var i = 0; i < file.upload.totalChunkCount; i++) {\r\n              handleNextChunk();\r\n            }\r\n          } else {\r\n            handleNextChunk();\r\n          }\r\n        } else {\r\n          var dataBlocks = [];\r\n          for (var _i23 = 0; _i23 < files.length; _i23++) {\r\n            dataBlocks[_i23] = {\r\n              name: _this14._getParamName(_i23),\r\n              data: transformedFiles[_i23],\r\n              filename: files[_i23].upload.filename\r\n            };\r\n          }\r\n          _this14._uploadData(files, dataBlocks);\r\n        }\r\n      });\r\n    }\r\n\r\n    /// Returns the right chunk for given file and xhr\r\n\r\n  }, {\r\n    key: \"_getChunk\",\r\n    value: function _getChunk(file, xhr) {\r\n      for (var i = 0; i < file.upload.totalChunkCount; i++) {\r\n        if (file.upload.chunks[i] !== undefined && file.upload.chunks[i].xhr === xhr) {\r\n          return file.upload.chunks[i];\r\n        }\r\n      }\r\n    }\r\n\r\n    // This function actually uploads the file(s) to the server.\r\n    // If dataBlocks contains the actual data to upload (meaning, that this could either be transformed\r\n    // files, or individual chunks for chunked upload).\r\n\r\n  }, {\r\n    key: \"_uploadData\",\r\n    value: function _uploadData(files, dataBlocks) {\r\n      var _this15 = this;\r\n\r\n      var xhr = new XMLHttpRequest();\r\n\r\n      // Put the xhr object in the file objects to be able to reference it later.\r\n      for (var _iterator22 = files, _isArray22 = true, _i24 = 0, _iterator22 = _isArray22 ? _iterator22 : _iterator22[Symbol.iterator]();;) {\r\n        var _ref21;\r\n\r\n        if (_isArray22) {\r\n          if (_i24 >= _iterator22.length) break;\r\n          _ref21 = _iterator22[_i24++];\r\n        } else {\r\n          _i24 = _iterator22.next();\r\n          if (_i24.done) break;\r\n          _ref21 = _i24.value;\r\n        }\r\n\r\n        var file = _ref21;\r\n\r\n        file.xhr = xhr;\r\n      }\r\n      if (files[0].upload.chunked) {\r\n        // Put the xhr object in the right chunk object, so it can be associated later, and found with _getChunk\r\n        files[0].upload.chunks[dataBlocks[0].chunkIndex].xhr = xhr;\r\n      }\r\n\r\n      var method = this.resolveOption(this.options.method, files);\r\n      var url = this.resolveOption(this.options.url, files);\r\n      xhr.open(method, url, true);\r\n\r\n      // Setting the timeout after open because of IE11 issue: https://gitlab.com/meno/dropzone/issues/8\r\n      xhr.timeout = this.resolveOption(this.options.timeout, files);\r\n\r\n      // Has to be after `.open()`. See https://github.com/enyo/dropzone/issues/179\r\n      xhr.withCredentials = !!this.options.withCredentials;\r\n\r\n      xhr.onload = function (e) {\r\n        _this15._finishedUploading(files, xhr, e);\r\n      };\r\n\r\n      xhr.onerror = function () {\r\n        _this15._handleUploadError(files, xhr);\r\n      };\r\n\r\n      // Some browsers do not have the .upload property\r\n      var progressObj = xhr.upload != null ? xhr.upload : xhr;\r\n      progressObj.onprogress = function (e) {\r\n        return _this15._updateFilesUploadProgress(files, xhr, e);\r\n      };\r\n\r\n      var headers = {\r\n        \"Accept\": \"application/json\",\r\n        \"Cache-Control\": \"no-cache\",\r\n        \"X-Requested-With\": \"XMLHttpRequest\"\r\n      };\r\n\r\n      if (this.options.headers) {\r\n        Dropzone.extend(headers, this.options.headers);\r\n      }\r\n\r\n      for (var headerName in headers) {\r\n        var headerValue = headers[headerName];\r\n        if (headerValue) {\r\n          xhr.setRequestHeader(headerName, headerValue);\r\n        }\r\n      }\r\n\r\n      var formData = new FormData();\r\n\r\n      // Adding all @options parameters\r\n      if (this.options.params) {\r\n        var additionalParams = this.options.params;\r\n        if (typeof additionalParams === 'function') {\r\n          additionalParams = additionalParams.call(this, files, xhr, files[0].upload.chunked ? this._getChunk(files[0], xhr) : null);\r\n        }\r\n\r\n        for (var key in additionalParams) {\r\n          var value = additionalParams[key];\r\n          formData.append(key, value);\r\n        }\r\n      }\r\n\r\n      // Let the user add additional data if necessary\r\n      for (var _iterator23 = files, _isArray23 = true, _i25 = 0, _iterator23 = _isArray23 ? _iterator23 : _iterator23[Symbol.iterator]();;) {\r\n        var _ref22;\r\n\r\n        if (_isArray23) {\r\n          if (_i25 >= _iterator23.length) break;\r\n          _ref22 = _iterator23[_i25++];\r\n        } else {\r\n          _i25 = _iterator23.next();\r\n          if (_i25.done) break;\r\n          _ref22 = _i25.value;\r\n        }\r\n\r\n        var _file = _ref22;\r\n\r\n        this.emit(\"sending\", _file, xhr, formData);\r\n      }\r\n      if (this.options.uploadMultiple) {\r\n        this.emit(\"sendingmultiple\", files, xhr, formData);\r\n      }\r\n\r\n      this._addFormElementData(formData);\r\n\r\n      // Finally add the files\r\n      // Has to be last because some servers (eg: S3) expect the file to be the last parameter\r\n      for (var i = 0; i < dataBlocks.length; i++) {\r\n        var dataBlock = dataBlocks[i];\r\n        formData.append(dataBlock.name, dataBlock.data, dataBlock.filename);\r\n      }\r\n\r\n      this.submitRequest(xhr, formData, files);\r\n    }\r\n\r\n    // Transforms all files with this.options.transformFile and invokes done with the transformed files when done.\r\n\r\n  }, {\r\n    key: \"_transformFiles\",\r\n    value: function _transformFiles(files, done) {\r\n      var _this16 = this;\r\n\r\n      var transformedFiles = [];\r\n      // Clumsy way of handling asynchronous calls, until I get to add a proper Future library.\r\n      var doneCounter = 0;\r\n\r\n      var _loop = function _loop(i) {\r\n        _this16.options.transformFile.call(_this16, files[i], function (transformedFile) {\r\n          transformedFiles[i] = transformedFile;\r\n          if (++doneCounter === files.length) {\r\n            done(transformedFiles);\r\n          }\r\n        });\r\n      };\r\n\r\n      for (var i = 0; i < files.length; i++) {\r\n        _loop(i);\r\n      }\r\n    }\r\n\r\n    // Takes care of adding other input elements of the form to the AJAX request\r\n\r\n  }, {\r\n    key: \"_addFormElementData\",\r\n    value: function _addFormElementData(formData) {\r\n      // Take care of other input elements\r\n      if (this.element.tagName === \"FORM\") {\r\n        for (var _iterator24 = this.element.querySelectorAll(\"input, textarea, select, button\"), _isArray24 = true, _i26 = 0, _iterator24 = _isArray24 ? _iterator24 : _iterator24[Symbol.iterator]();;) {\r\n          var _ref23;\r\n\r\n          if (_isArray24) {\r\n            if (_i26 >= _iterator24.length) break;\r\n            _ref23 = _iterator24[_i26++];\r\n          } else {\r\n            _i26 = _iterator24.next();\r\n            if (_i26.done) break;\r\n            _ref23 = _i26.value;\r\n          }\r\n\r\n          var input = _ref23;\r\n\r\n          var inputName = input.getAttribute(\"name\");\r\n          var inputType = input.getAttribute(\"type\");\r\n          if (inputType) inputType = inputType.toLowerCase();\r\n\r\n          // If the input doesn't have a name, we can't use it.\r\n          if (typeof inputName === 'undefined' || inputName === null) continue;\r\n\r\n          if (input.tagName === \"SELECT\" && input.hasAttribute(\"multiple\")) {\r\n            // Possibly multiple values\r\n            for (var _iterator25 = input.options, _isArray25 = true, _i27 = 0, _iterator25 = _isArray25 ? _iterator25 : _iterator25[Symbol.iterator]();;) {\r\n              var _ref24;\r\n\r\n              if (_isArray25) {\r\n                if (_i27 >= _iterator25.length) break;\r\n                _ref24 = _iterator25[_i27++];\r\n              } else {\r\n                _i27 = _iterator25.next();\r\n                if (_i27.done) break;\r\n                _ref24 = _i27.value;\r\n              }\r\n\r\n              var option = _ref24;\r\n\r\n              if (option.selected) {\r\n                formData.append(inputName, option.value);\r\n              }\r\n            }\r\n          } else if (!inputType || inputType !== \"checkbox\" && inputType !== \"radio\" || input.checked) {\r\n            formData.append(inputName, input.value);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Invoked when there is new progress information about given files.\r\n    // If e is not provided, it is assumed that the upload is finished.\r\n\r\n  }, {\r\n    key: \"_updateFilesUploadProgress\",\r\n    value: function _updateFilesUploadProgress(files, xhr, e) {\r\n      var progress = void 0;\r\n      if (typeof e !== 'undefined') {\r\n        progress = 100 * e.loaded / e.total;\r\n\r\n        if (files[0].upload.chunked) {\r\n          var file = files[0];\r\n          // Since this is a chunked upload, we need to update the appropriate chunk progress.\r\n          var chunk = this._getChunk(file, xhr);\r\n          chunk.progress = progress;\r\n          chunk.total = e.total;\r\n          chunk.bytesSent = e.loaded;\r\n          var fileProgress = 0,\r\n              fileTotal = void 0,\r\n              fileBytesSent = void 0;\r\n          file.upload.progress = 0;\r\n          file.upload.total = 0;\r\n          file.upload.bytesSent = 0;\r\n          for (var i = 0; i < file.upload.totalChunkCount; i++) {\r\n            if (file.upload.chunks[i] !== undefined && file.upload.chunks[i].progress !== undefined) {\r\n              file.upload.progress += file.upload.chunks[i].progress;\r\n              file.upload.total += file.upload.chunks[i].total;\r\n              file.upload.bytesSent += file.upload.chunks[i].bytesSent;\r\n            }\r\n          }\r\n          file.upload.progress = file.upload.progress / file.upload.totalChunkCount;\r\n        } else {\r\n          for (var _iterator26 = files, _isArray26 = true, _i28 = 0, _iterator26 = _isArray26 ? _iterator26 : _iterator26[Symbol.iterator]();;) {\r\n            var _ref25;\r\n\r\n            if (_isArray26) {\r\n              if (_i28 >= _iterator26.length) break;\r\n              _ref25 = _iterator26[_i28++];\r\n            } else {\r\n              _i28 = _iterator26.next();\r\n              if (_i28.done) break;\r\n              _ref25 = _i28.value;\r\n            }\r\n\r\n            var _file2 = _ref25;\r\n\r\n            _file2.upload.progress = progress;\r\n            _file2.upload.total = e.total;\r\n            _file2.upload.bytesSent = e.loaded;\r\n          }\r\n        }\r\n        for (var _iterator27 = files, _isArray27 = true, _i29 = 0, _iterator27 = _isArray27 ? _iterator27 : _iterator27[Symbol.iterator]();;) {\r\n          var _ref26;\r\n\r\n          if (_isArray27) {\r\n            if (_i29 >= _iterator27.length) break;\r\n            _ref26 = _iterator27[_i29++];\r\n          } else {\r\n            _i29 = _iterator27.next();\r\n            if (_i29.done) break;\r\n            _ref26 = _i29.value;\r\n          }\r\n\r\n          var _file3 = _ref26;\r\n\r\n          this.emit(\"uploadprogress\", _file3, _file3.upload.progress, _file3.upload.bytesSent);\r\n        }\r\n      } else {\r\n        // Called when the file finished uploading\r\n\r\n        var allFilesFinished = true;\r\n\r\n        progress = 100;\r\n\r\n        for (var _iterator28 = files, _isArray28 = true, _i30 = 0, _iterator28 = _isArray28 ? _iterator28 : _iterator28[Symbol.iterator]();;) {\r\n          var _ref27;\r\n\r\n          if (_isArray28) {\r\n            if (_i30 >= _iterator28.length) break;\r\n            _ref27 = _iterator28[_i30++];\r\n          } else {\r\n            _i30 = _iterator28.next();\r\n            if (_i30.done) break;\r\n            _ref27 = _i30.value;\r\n          }\r\n\r\n          var _file4 = _ref27;\r\n\r\n          if (_file4.upload.progress !== 100 || _file4.upload.bytesSent !== _file4.upload.total) {\r\n            allFilesFinished = false;\r\n          }\r\n          _file4.upload.progress = progress;\r\n          _file4.upload.bytesSent = _file4.upload.total;\r\n        }\r\n\r\n        // Nothing to do, all files already at 100%\r\n        if (allFilesFinished) {\r\n          return;\r\n        }\r\n\r\n        for (var _iterator29 = files, _isArray29 = true, _i31 = 0, _iterator29 = _isArray29 ? _iterator29 : _iterator29[Symbol.iterator]();;) {\r\n          var _ref28;\r\n\r\n          if (_isArray29) {\r\n            if (_i31 >= _iterator29.length) break;\r\n            _ref28 = _iterator29[_i31++];\r\n          } else {\r\n            _i31 = _iterator29.next();\r\n            if (_i31.done) break;\r\n            _ref28 = _i31.value;\r\n          }\r\n\r\n          var _file5 = _ref28;\r\n\r\n          this.emit(\"uploadprogress\", _file5, progress, _file5.upload.bytesSent);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: \"_finishedUploading\",\r\n    value: function _finishedUploading(files, xhr, e) {\r\n      var response = void 0;\r\n\r\n      if (files[0].status === Dropzone.CANCELED) {\r\n        return;\r\n      }\r\n\r\n      if (xhr.readyState !== 4) {\r\n        return;\r\n      }\r\n\r\n      if (xhr.responseType !== 'arraybuffer' && xhr.responseType !== 'blob') {\r\n        response = xhr.responseText;\r\n\r\n        if (xhr.getResponseHeader(\"content-type\") && ~xhr.getResponseHeader(\"content-type\").indexOf(\"application/json\")) {\r\n          try {\r\n            response = JSON.parse(response);\r\n          } catch (error) {\r\n            e = error;\r\n            response = \"Invalid JSON response from server.\";\r\n          }\r\n        }\r\n      }\r\n\r\n      this._updateFilesUploadProgress(files);\r\n\r\n      if (!(200 <= xhr.status && xhr.status < 300)) {\r\n        this._handleUploadError(files, xhr, response);\r\n      } else {\r\n        if (files[0].upload.chunked) {\r\n          files[0].upload.finishedChunkUpload(this._getChunk(files[0], xhr));\r\n        } else {\r\n          this._finished(files, response, e);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: \"_handleUploadError\",\r\n    value: function _handleUploadError(files, xhr, response) {\r\n      if (files[0].status === Dropzone.CANCELED) {\r\n        return;\r\n      }\r\n\r\n      if (files[0].upload.chunked && this.options.retryChunks) {\r\n        var chunk = this._getChunk(files[0], xhr);\r\n        if (chunk.retries++ < this.options.retryChunksLimit) {\r\n          this._uploadData(files, [chunk.dataBlock]);\r\n          return;\r\n        } else {\r\n          console.warn('Retried this chunk too often. Giving up.');\r\n        }\r\n      }\r\n\r\n      for (var _iterator30 = files, _isArray30 = true, _i32 = 0, _iterator30 = _isArray30 ? _iterator30 : _iterator30[Symbol.iterator]();;) {\r\n        var _ref29;\r\n\r\n        if (_isArray30) {\r\n          if (_i32 >= _iterator30.length) break;\r\n          _ref29 = _iterator30[_i32++];\r\n        } else {\r\n          _i32 = _iterator30.next();\r\n          if (_i32.done) break;\r\n          _ref29 = _i32.value;\r\n        }\r\n\r\n        var file = _ref29;\r\n\r\n        this._errorProcessing(files, response || this.options.dictResponseError.replace(\"{{statusCode}}\", xhr.status), xhr);\r\n      }\r\n    }\r\n  }, {\r\n    key: \"submitRequest\",\r\n    value: function submitRequest(xhr, formData, files) {\r\n      xhr.send(formData);\r\n    }\r\n\r\n    // Called internally when processing is finished.\r\n    // Individual callbacks have to be called in the appropriate sections.\r\n\r\n  }, {\r\n    key: \"_finished\",\r\n    value: function _finished(files, responseText, e) {\r\n      for (var _iterator31 = files, _isArray31 = true, _i33 = 0, _iterator31 = _isArray31 ? _iterator31 : _iterator31[Symbol.iterator]();;) {\r\n        var _ref30;\r\n\r\n        if (_isArray31) {\r\n          if (_i33 >= _iterator31.length) break;\r\n          _ref30 = _iterator31[_i33++];\r\n        } else {\r\n          _i33 = _iterator31.next();\r\n          if (_i33.done) break;\r\n          _ref30 = _i33.value;\r\n        }\r\n\r\n        var file = _ref30;\r\n\r\n        file.status = Dropzone.SUCCESS;\r\n        this.emit(\"success\", file, responseText, e);\r\n        this.emit(\"complete\", file);\r\n      }\r\n      if (this.options.uploadMultiple) {\r\n        this.emit(\"successmultiple\", files, responseText, e);\r\n        this.emit(\"completemultiple\", files);\r\n      }\r\n\r\n      if (this.options.autoProcessQueue) {\r\n        return this.processQueue();\r\n      }\r\n    }\r\n\r\n    // Called internally when processing is finished.\r\n    // Individual callbacks have to be called in the appropriate sections.\r\n\r\n  }, {\r\n    key: \"_errorProcessing\",\r\n    value: function _errorProcessing(files, message, xhr) {\r\n      for (var _iterator32 = files, _isArray32 = true, _i34 = 0, _iterator32 = _isArray32 ? _iterator32 : _iterator32[Symbol.iterator]();;) {\r\n        var _ref31;\r\n\r\n        if (_isArray32) {\r\n          if (_i34 >= _iterator32.length) break;\r\n          _ref31 = _iterator32[_i34++];\r\n        } else {\r\n          _i34 = _iterator32.next();\r\n          if (_i34.done) break;\r\n          _ref31 = _i34.value;\r\n        }\r\n\r\n        var file = _ref31;\r\n\r\n        file.status = Dropzone.ERROR;\r\n        this.emit(\"error\", file, message, xhr);\r\n        this.emit(\"complete\", file);\r\n      }\r\n      if (this.options.uploadMultiple) {\r\n        this.emit(\"errormultiple\", files, message, xhr);\r\n        this.emit(\"completemultiple\", files);\r\n      }\r\n\r\n      if (this.options.autoProcessQueue) {\r\n        return this.processQueue();\r\n      }\r\n    }\r\n  }], [{\r\n    key: \"uuidv4\",\r\n    value: function uuidv4() {\r\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        var r = Math.random() * 16 | 0,\r\n            v = c === 'x' ? r : r & 0x3 | 0x8;\r\n        return v.toString(16);\r\n      });\r\n    }\r\n  }]);\r\n\r\n  return Dropzone;\r\n}(Emitter);\r\n\r\nDropzone.initClass();\r\n\r\nDropzone.version = \"5.4.0\";\r\n\r\n// This is a map of options for your different dropzones. Add configurations\r\n// to this object for your different dropzone elemens.\r\n//\r\n// Example:\r\n//\r\n//     Dropzone.options.myDropzoneElementId = { maxFilesize: 1 };\r\n//\r\n// To disable autoDiscover for a specific element, you can set `false` as an option:\r\n//\r\n//     Dropzone.options.myDisabledElementId = false;\r\n//\r\n// And in html:\r\n//\r\n//     <form action=\"/upload\" id=\"my-dropzone-element-id\" class=\"dropzone\"></form>\r\nDropzone.options = {};\r\n\r\n// Returns the options for an element or undefined if none available.\r\nDropzone.optionsForElement = function (element) {\r\n  // Get the `Dropzone.options.elementId` for this element if it exists\r\n  if (element.getAttribute(\"id\")) {\r\n    return Dropzone.options[camelize(element.getAttribute(\"id\"))];\r\n  } else {\r\n    return undefined;\r\n  }\r\n};\r\n\r\n// Holds a list of all dropzone instances\r\nDropzone.instances = [];\r\n\r\n// Returns the dropzone for given element if any\r\nDropzone.forElement = function (element) {\r\n  if (typeof element === \"string\") {\r\n    element = document.querySelector(element);\r\n  }\r\n  if ((element != null ? element.dropzone : undefined) == null) {\r\n    throw new Error(\"No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.\");\r\n  }\r\n  return element.dropzone;\r\n};\r\n\r\n// Set to false if you don't want Dropzone to automatically find and attach to .dropzone elements.\r\nDropzone.autoDiscover = true;\r\n\r\n// Looks for all .dropzone elements and creates a dropzone for them\r\nDropzone.discover = function () {\r\n  var dropzones = void 0;\r\n  if (document.querySelectorAll) {\r\n    dropzones = document.querySelectorAll(\".dropzone\");\r\n  } else {\r\n    dropzones = [];\r\n    // IE :(\r\n    var checkElements = function checkElements(elements) {\r\n      return function () {\r\n        var result = [];\r\n        for (var _iterator33 = elements, _isArray33 = true, _i35 = 0, _iterator33 = _isArray33 ? _iterator33 : _iterator33[Symbol.iterator]();;) {\r\n          var _ref32;\r\n\r\n          if (_isArray33) {\r\n            if (_i35 >= _iterator33.length) break;\r\n            _ref32 = _iterator33[_i35++];\r\n          } else {\r\n            _i35 = _iterator33.next();\r\n            if (_i35.done) break;\r\n            _ref32 = _i35.value;\r\n          }\r\n\r\n          var el = _ref32;\r\n\r\n          if (/(^| )dropzone($| )/.test(el.className)) {\r\n            result.push(dropzones.push(el));\r\n          } else {\r\n            result.push(undefined);\r\n          }\r\n        }\r\n        return result;\r\n      }();\r\n    };\r\n    checkElements(document.getElementsByTagName(\"div\"));\r\n    checkElements(document.getElementsByTagName(\"form\"));\r\n  }\r\n\r\n  return function () {\r\n    var result = [];\r\n    for (var _iterator34 = dropzones, _isArray34 = true, _i36 = 0, _iterator34 = _isArray34 ? _iterator34 : _iterator34[Symbol.iterator]();;) {\r\n      var _ref33;\r\n\r\n      if (_isArray34) {\r\n        if (_i36 >= _iterator34.length) break;\r\n        _ref33 = _iterator34[_i36++];\r\n      } else {\r\n        _i36 = _iterator34.next();\r\n        if (_i36.done) break;\r\n        _ref33 = _i36.value;\r\n      }\r\n\r\n      var dropzone = _ref33;\r\n\r\n      // Create a dropzone unless auto discover has been disabled for specific element\r\n      if (Dropzone.optionsForElement(dropzone) !== false) {\r\n        result.push(new Dropzone(dropzone));\r\n      } else {\r\n        result.push(undefined);\r\n      }\r\n    }\r\n    return result;\r\n  }();\r\n};\r\n\r\n// Since the whole Drag'n'Drop API is pretty new, some browsers implement it,\r\n// but not correctly.\r\n// So I created a blacklist of userAgents. Yes, yes. Browser sniffing, I know.\r\n// But what to do when browsers *theoretically* support an API, but crash\r\n// when using it.\r\n//\r\n// This is a list of regular expressions tested against navigator.userAgent\r\n//\r\n// ** It should only be used on browser that *do* support the API, but\r\n// incorrectly **\r\n//\r\nDropzone.blacklistedBrowsers = [\r\n// The mac os and windows phone version of opera 12 seems to have a problem with the File drag'n'drop API.\r\n/opera.*(Macintosh|Windows Phone).*version\\/12/i];\r\n\r\n// Checks if the browser is supported\r\nDropzone.isBrowserSupported = function () {\r\n  var capableBrowser = true;\r\n\r\n  if (window.File && window.FileReader && window.FileList && window.Blob && window.FormData && document.querySelector) {\r\n    if (!(\"classList\" in document.createElement(\"a\"))) {\r\n      capableBrowser = false;\r\n    } else {\r\n      // The browser supports the API, but may be blacklisted.\r\n      for (var _iterator35 = Dropzone.blacklistedBrowsers, _isArray35 = true, _i37 = 0, _iterator35 = _isArray35 ? _iterator35 : _iterator35[Symbol.iterator]();;) {\r\n        var _ref34;\r\n\r\n        if (_isArray35) {\r\n          if (_i37 >= _iterator35.length) break;\r\n          _ref34 = _iterator35[_i37++];\r\n        } else {\r\n          _i37 = _iterator35.next();\r\n          if (_i37.done) break;\r\n          _ref34 = _i37.value;\r\n        }\r\n\r\n        var regex = _ref34;\r\n\r\n        if (regex.test(navigator.userAgent)) {\r\n          capableBrowser = false;\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    capableBrowser = false;\r\n  }\r\n\r\n  return capableBrowser;\r\n};\r\n\r\nDropzone.dataURItoBlob = function (dataURI) {\r\n  // convert base64 to raw binary data held in a string\r\n  // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\r\n  var byteString = atob(dataURI.split(',')[1]);\r\n\r\n  // separate out the mime component\r\n  var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\r\n\r\n  // write the bytes of the string to an ArrayBuffer\r\n  var ab = new ArrayBuffer(byteString.length);\r\n  var ia = new Uint8Array(ab);\r\n  for (var i = 0, end = byteString.length, asc = 0 <= end; asc ? i <= end : i >= end; asc ? i++ : i--) {\r\n    ia[i] = byteString.charCodeAt(i);\r\n  }\r\n\r\n  // write the ArrayBuffer to a blob\r\n  return new Blob([ab], { type: mimeString });\r\n};\r\n\r\n// Returns an array without the rejected item\r\nvar without = function without(list, rejectedItem) {\r\n  return list.filter(function (item) {\r\n    return item !== rejectedItem;\r\n  }).map(function (item) {\r\n    return item;\r\n  });\r\n};\r\n\r\n// abc-def_ghi -> abcDefGhi\r\nvar camelize = function camelize(str) {\r\n  return str.replace(/[\\-_](\\w)/g, function (match) {\r\n    return match.charAt(1).toUpperCase();\r\n  });\r\n};\r\n\r\n// Creates an element from string\r\nDropzone.createElement = function (string) {\r\n  var div = document.createElement(\"div\");\r\n  div.innerHTML = string;\r\n  return div.childNodes[0];\r\n};\r\n\r\n// Tests if given element is inside (or simply is) the container\r\nDropzone.elementInside = function (element, container) {\r\n  if (element === container) {\r\n    return true;\r\n  } // Coffeescript doesn't support do/while loops\r\n  while (element = element.parentNode) {\r\n    if (element === container) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nDropzone.getElement = function (el, name) {\r\n  var element = void 0;\r\n  if (typeof el === \"string\") {\r\n    element = document.querySelector(el);\r\n  } else if (el.nodeType != null) {\r\n    element = el;\r\n  }\r\n  if (element == null) {\r\n    throw new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector or a plain HTML element.\");\r\n  }\r\n  return element;\r\n};\r\n\r\nDropzone.getElements = function (els, name) {\r\n  var el = void 0,\r\n      elements = void 0;\r\n  if (els instanceof Array) {\r\n    elements = [];\r\n    try {\r\n      for (var _iterator36 = els, _isArray36 = true, _i38 = 0, _iterator36 = _isArray36 ? _iterator36 : _iterator36[Symbol.iterator]();;) {\r\n        if (_isArray36) {\r\n          if (_i38 >= _iterator36.length) break;\r\n          el = _iterator36[_i38++];\r\n        } else {\r\n          _i38 = _iterator36.next();\r\n          if (_i38.done) break;\r\n          el = _i38.value;\r\n        }\r\n\r\n        elements.push(this.getElement(el, name));\r\n      }\r\n    } catch (e) {\r\n      elements = null;\r\n    }\r\n  } else if (typeof els === \"string\") {\r\n    elements = [];\r\n    for (var _iterator37 = document.querySelectorAll(els), _isArray37 = true, _i39 = 0, _iterator37 = _isArray37 ? _iterator37 : _iterator37[Symbol.iterator]();;) {\r\n      if (_isArray37) {\r\n        if (_i39 >= _iterator37.length) break;\r\n        el = _iterator37[_i39++];\r\n      } else {\r\n        _i39 = _iterator37.next();\r\n        if (_i39.done) break;\r\n        el = _i39.value;\r\n      }\r\n\r\n      elements.push(el);\r\n    }\r\n  } else if (els.nodeType != null) {\r\n    elements = [els];\r\n  }\r\n\r\n  if (elements == null || !elements.length) {\r\n    throw new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.\");\r\n  }\r\n\r\n  return elements;\r\n};\r\n\r\n// Asks the user the question and calls accepted or rejected accordingly\r\n//\r\n// The default implementation just uses `window.confirm` and then calls the\r\n// appropriate callback.\r\nDropzone.confirm = function (question, accepted, rejected) {\r\n  if (window.confirm(question)) {\r\n    return accepted();\r\n  } else if (rejected != null) {\r\n    return rejected();\r\n  }\r\n};\r\n\r\n// Validates the mime type like this:\r\n//\r\n// https://developer.mozilla.org/en-US/docs/HTML/Element/input#attr-accept\r\nDropzone.isValidFile = function (file, acceptedFiles) {\r\n  if (!acceptedFiles) {\r\n    return true;\r\n  } // If there are no accepted mime types, it's OK\r\n  acceptedFiles = acceptedFiles.split(\",\");\r\n\r\n  var mimeType = file.type;\r\n  var baseMimeType = mimeType.replace(/\\/.*$/, \"\");\r\n\r\n  for (var _iterator38 = acceptedFiles, _isArray38 = true, _i40 = 0, _iterator38 = _isArray38 ? _iterator38 : _iterator38[Symbol.iterator]();;) {\r\n    var _ref35;\r\n\r\n    if (_isArray38) {\r\n      if (_i40 >= _iterator38.length) break;\r\n      _ref35 = _iterator38[_i40++];\r\n    } else {\r\n      _i40 = _iterator38.next();\r\n      if (_i40.done) break;\r\n      _ref35 = _i40.value;\r\n    }\r\n\r\n    var validType = _ref35;\r\n\r\n    validType = validType.trim();\r\n    if (validType.charAt(0) === \".\") {\r\n      if (file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.length - validType.length) !== -1) {\r\n        return true;\r\n      }\r\n    } else if (/\\/\\*$/.test(validType)) {\r\n      // This is something like a image/* mime type\r\n      if (baseMimeType === validType.replace(/\\/.*$/, \"\")) {\r\n        return true;\r\n      }\r\n    } else {\r\n      if (mimeType === validType) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\n// Augment jQuery\r\nif (typeof jQuery !== 'undefined' && jQuery !== null) {\r\n  jQuery.fn.dropzone = function (options) {\r\n    return this.each(function () {\r\n      return new Dropzone(this, options);\r\n    });\r\n  };\r\n}\r\n\r\nif ( true && module !== null) {\r\n  module.exports = Dropzone;\r\n} else {\r\n  window.Dropzone = Dropzone;\r\n}\r\n\r\n// Dropzone file status codes\r\nDropzone.ADDED = \"added\";\r\n\r\nDropzone.QUEUED = \"queued\";\r\n// For backwards compatibility. Now, if a file is accepted, it's either queued\r\n// or uploading.\r\nDropzone.ACCEPTED = Dropzone.QUEUED;\r\n\r\nDropzone.UPLOADING = \"uploading\";\r\nDropzone.PROCESSING = Dropzone.UPLOADING; // alias\r\n\r\nDropzone.CANCELED = \"canceled\";\r\nDropzone.ERROR = \"error\";\r\nDropzone.SUCCESS = \"success\";\r\n\r\n/*\r\n\r\n Bugfix for iOS 6 and 7\r\n Source: http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\r\n based on the work of https://github.com/stomita/ios-imagefile-megapixel\r\n\r\n */\r\n\r\n// Detecting vertical squash in loaded image.\r\n// Fixes a bug which squash image vertically while drawing into canvas for some images.\r\n// This is a bug in iOS6 devices. This function from https://github.com/stomita/ios-imagefile-megapixel\r\nvar detectVerticalSquash = function detectVerticalSquash(img) {\r\n  var iw = img.naturalWidth;\r\n  var ih = img.naturalHeight;\r\n  var canvas = document.createElement(\"canvas\");\r\n  canvas.width = 1;\r\n  canvas.height = ih;\r\n  var ctx = canvas.getContext(\"2d\");\r\n  ctx.drawImage(img, 0, 0);\r\n\r\n  var _ctx$getImageData = ctx.getImageData(1, 0, 1, ih),\r\n      data = _ctx$getImageData.data;\r\n\r\n  // search image edge pixel position in case it is squashed vertically.\r\n\r\n\r\n  var sy = 0;\r\n  var ey = ih;\r\n  var py = ih;\r\n  while (py > sy) {\r\n    var alpha = data[(py - 1) * 4 + 3];\r\n\r\n    if (alpha === 0) {\r\n      ey = py;\r\n    } else {\r\n      sy = py;\r\n    }\r\n\r\n    py = ey + sy >> 1;\r\n  }\r\n  var ratio = py / ih;\r\n\r\n  if (ratio === 0) {\r\n    return 1;\r\n  } else {\r\n    return ratio;\r\n  }\r\n};\r\n\r\n// A replacement for context.drawImage\r\n// (args are for source and destination).\r\nvar drawImageIOSFix = function drawImageIOSFix(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh) {\r\n  var vertSquashRatio = detectVerticalSquash(img);\r\n  return ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);\r\n};\r\n\r\n// Based on MinifyJpeg\r\n// Source: http://www.perry.cz/files/ExifRestorer.js\r\n// http://elicon.blog57.fc2.com/blog-entry-206.html\r\n\r\nvar ExifRestore = function () {\r\n  function ExifRestore() {\r\n    _classCallCheck(this, ExifRestore);\r\n  }\r\n\r\n  _createClass(ExifRestore, null, [{\r\n    key: \"initClass\",\r\n    value: function initClass() {\r\n      this.KEY_STR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\n    }\r\n  }, {\r\n    key: \"encode64\",\r\n    value: function encode64(input) {\r\n      var output = '';\r\n      var chr1 = undefined;\r\n      var chr2 = undefined;\r\n      var chr3 = '';\r\n      var enc1 = undefined;\r\n      var enc2 = undefined;\r\n      var enc3 = undefined;\r\n      var enc4 = '';\r\n      var i = 0;\r\n      while (true) {\r\n        chr1 = input[i++];\r\n        chr2 = input[i++];\r\n        chr3 = input[i++];\r\n        enc1 = chr1 >> 2;\r\n        enc2 = (chr1 & 3) << 4 | chr2 >> 4;\r\n        enc3 = (chr2 & 15) << 2 | chr3 >> 6;\r\n        enc4 = chr3 & 63;\r\n        if (isNaN(chr2)) {\r\n          enc3 = enc4 = 64;\r\n        } else if (isNaN(chr3)) {\r\n          enc4 = 64;\r\n        }\r\n        output = output + this.KEY_STR.charAt(enc1) + this.KEY_STR.charAt(enc2) + this.KEY_STR.charAt(enc3) + this.KEY_STR.charAt(enc4);\r\n        chr1 = chr2 = chr3 = '';\r\n        enc1 = enc2 = enc3 = enc4 = '';\r\n        if (!(i < input.length)) {\r\n          break;\r\n        }\r\n      }\r\n      return output;\r\n    }\r\n  }, {\r\n    key: \"restore\",\r\n    value: function restore(origFileBase64, resizedFileBase64) {\r\n      if (!origFileBase64.match('data:image/jpeg;base64,')) {\r\n        return resizedFileBase64;\r\n      }\r\n      var rawImage = this.decode64(origFileBase64.replace('data:image/jpeg;base64,', ''));\r\n      var segments = this.slice2Segments(rawImage);\r\n      var image = this.exifManipulation(resizedFileBase64, segments);\r\n      return \"data:image/jpeg;base64,\" + this.encode64(image);\r\n    }\r\n  }, {\r\n    key: \"exifManipulation\",\r\n    value: function exifManipulation(resizedFileBase64, segments) {\r\n      var exifArray = this.getExifArray(segments);\r\n      var newImageArray = this.insertExif(resizedFileBase64, exifArray);\r\n      var aBuffer = new Uint8Array(newImageArray);\r\n      return aBuffer;\r\n    }\r\n  }, {\r\n    key: \"getExifArray\",\r\n    value: function getExifArray(segments) {\r\n      var seg = undefined;\r\n      var x = 0;\r\n      while (x < segments.length) {\r\n        seg = segments[x];\r\n        if (seg[0] === 255 & seg[1] === 225) {\r\n          return seg;\r\n        }\r\n        x++;\r\n      }\r\n      return [];\r\n    }\r\n  }, {\r\n    key: \"insertExif\",\r\n    value: function insertExif(resizedFileBase64, exifArray) {\r\n      var imageData = resizedFileBase64.replace('data:image/jpeg;base64,', '');\r\n      var buf = this.decode64(imageData);\r\n      var separatePoint = buf.indexOf(255, 3);\r\n      var mae = buf.slice(0, separatePoint);\r\n      var ato = buf.slice(separatePoint);\r\n      var array = mae;\r\n      array = array.concat(exifArray);\r\n      array = array.concat(ato);\r\n      return array;\r\n    }\r\n  }, {\r\n    key: \"slice2Segments\",\r\n    value: function slice2Segments(rawImageArray) {\r\n      var head = 0;\r\n      var segments = [];\r\n      while (true) {\r\n        var length;\r\n        if (rawImageArray[head] === 255 & rawImageArray[head + 1] === 218) {\r\n          break;\r\n        }\r\n        if (rawImageArray[head] === 255 & rawImageArray[head + 1] === 216) {\r\n          head += 2;\r\n        } else {\r\n          length = rawImageArray[head + 2] * 256 + rawImageArray[head + 3];\r\n          var endPoint = head + length + 2;\r\n          var seg = rawImageArray.slice(head, endPoint);\r\n          segments.push(seg);\r\n          head = endPoint;\r\n        }\r\n        if (head > rawImageArray.length) {\r\n          break;\r\n        }\r\n      }\r\n      return segments;\r\n    }\r\n  }, {\r\n    key: \"decode64\",\r\n    value: function decode64(input) {\r\n      var output = '';\r\n      var chr1 = undefined;\r\n      var chr2 = undefined;\r\n      var chr3 = '';\r\n      var enc1 = undefined;\r\n      var enc2 = undefined;\r\n      var enc3 = undefined;\r\n      var enc4 = '';\r\n      var i = 0;\r\n      var buf = [];\r\n      // remove all characters that are not A-Z, a-z, 0-9, +, /, or =\r\n      var base64test = /[^A-Za-z0-9\\+\\/\\=]/g;\r\n      if (base64test.exec(input)) {\r\n        console.warn('There were invalid base64 characters in the input text.\\nValid base64 characters are A-Z, a-z, 0-9, \\'+\\', \\'/\\',and \\'=\\'\\nExpect errors in decoding.');\r\n      }\r\n      input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\r\n      while (true) {\r\n        enc1 = this.KEY_STR.indexOf(input.charAt(i++));\r\n        enc2 = this.KEY_STR.indexOf(input.charAt(i++));\r\n        enc3 = this.KEY_STR.indexOf(input.charAt(i++));\r\n        enc4 = this.KEY_STR.indexOf(input.charAt(i++));\r\n        chr1 = enc1 << 2 | enc2 >> 4;\r\n        chr2 = (enc2 & 15) << 4 | enc3 >> 2;\r\n        chr3 = (enc3 & 3) << 6 | enc4;\r\n        buf.push(chr1);\r\n        if (enc3 !== 64) {\r\n          buf.push(chr2);\r\n        }\r\n        if (enc4 !== 64) {\r\n          buf.push(chr3);\r\n        }\r\n        chr1 = chr2 = chr3 = '';\r\n        enc1 = enc2 = enc3 = enc4 = '';\r\n        if (!(i < input.length)) {\r\n          break;\r\n        }\r\n      }\r\n      return buf;\r\n    }\r\n  }]);\r\n\r\n  return ExifRestore;\r\n}();\r\n\r\nExifRestore.initClass();\r\n\r\n/*\r\n * contentloaded.js\r\n *\r\n * Author: Diego Perini (diego.perini at gmail.com)\r\n * Summary: cross-browser wrapper for DOMContentLoaded\r\n * Updated: 20101020\r\n * License: MIT\r\n * Version: 1.2\r\n *\r\n * URL:\r\n * http://javascript.nwbox.com/ContentLoaded/\r\n * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE\r\n */\r\n\r\n// @win window reference\r\n// @fn function reference\r\nvar contentLoaded = function contentLoaded(win, fn) {\r\n  var done = false;\r\n  var top = true;\r\n  var doc = win.document;\r\n  var root = doc.documentElement;\r\n  var add = doc.addEventListener ? \"addEventListener\" : \"attachEvent\";\r\n  var rem = doc.addEventListener ? \"removeEventListener\" : \"detachEvent\";\r\n  var pre = doc.addEventListener ? \"\" : \"on\";\r\n  var init = function init(e) {\r\n    if (e.type === \"readystatechange\" && doc.readyState !== \"complete\") {\r\n      return;\r\n    }\r\n    (e.type === \"load\" ? win : doc)[rem](pre + e.type, init, false);\r\n    if (!done && (done = true)) {\r\n      return fn.call(win, e.type || e);\r\n    }\r\n  };\r\n\r\n  var poll = function poll() {\r\n    try {\r\n      root.doScroll(\"left\");\r\n    } catch (e) {\r\n      setTimeout(poll, 50);\r\n      return;\r\n    }\r\n    return init(\"poll\");\r\n  };\r\n\r\n  if (doc.readyState !== \"complete\") {\r\n    if (doc.createEventObject && root.doScroll) {\r\n      try {\r\n        top = !win.frameElement;\r\n      } catch (error) {}\r\n      if (top) {\r\n        poll();\r\n      }\r\n    }\r\n    doc[add](pre + \"DOMContentLoaded\", init, false);\r\n    doc[add](pre + \"readystatechange\", init, false);\r\n    return win[add](pre + \"load\", init, false);\r\n  }\r\n};\r\n\r\n// As a single function to be able to write tests.\r\nDropzone._autoDiscoverFunction = function () {\r\n  if (Dropzone.autoDiscover) {\r\n    return Dropzone.discover();\r\n  }\r\n};\r\ncontentLoaded(window, Dropzone._autoDiscoverFunction);\r\n\r\nfunction __guard__(value, transform) {\r\n  return typeof value !== 'undefined' && value !== null ? transform(value) : undefined;\r\n}\r\nfunction __guardMethod__(obj, methodName, transform) {\r\n  if (typeof obj !== 'undefined' && obj !== null && typeof obj[methodName] === 'function') {\r\n    return transform(obj, methodName);\r\n  } else {\r\n    return undefined;\r\n  }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9Nb2R1bGVzL01lZGlhL25vZGVfbW9kdWxlcy9kcm9wem9uZS9kaXN0L2Ryb3B6b25lLmpzIiwibWFwcGluZ3MiOiI7QUFBYTtBQUNiO0FBQ0EsaUNBQWlDLDJDQUEyQyxnQkFBZ0Isa0JBQWtCLE9BQU8sMkJBQTJCLHdEQUF3RCxnQ0FBZ0MsdURBQXVELCtEQUErRCx5REFBeUQscUVBQXFFLDZEQUE2RCx3QkFBd0I7QUFDampCO0FBQ0Esa0RBQWtELGFBQWEseUZBQXlGO0FBQ3hKO0FBQ0EsMkNBQTJDLCtEQUErRCx1R0FBdUcseUVBQXlFLGVBQWUsMEVBQTBFLEdBQUc7QUFDdFg7QUFDQSxrREFBa0QsMENBQTBDO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJGQUEyRixhQUFhO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBLGtJQUFrSTtBQUNsSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHNCQUFzQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxxQ0FBcUM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxVQUFVLFNBQVMsYUFBYTtBQUM5QztBQUNBLDRDQUE0QyxVQUFVLHNCQUFzQixhQUFhO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFlBQVk7QUFDMUI7QUFDQSxvREFBb0QsYUFBYTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixVQUFVO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGdEQUFnRDtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwS0FBMEs7QUFDMUs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQSwwTEFBMEw7QUFDMUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwTEFBMEw7QUFDMUw7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRHQUE0RztBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQixrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRMQUE0TDtBQUM1TDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrTEFBK0w7QUFDL0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtNQUFrTTtBQUNsTTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsNERBQTREO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb01BQW9NO0FBQ3BNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQ7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QyxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCx3REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCx3REFBd0Q7QUFDeEQsd0RBQXdEO0FBQ3hELHNEQUFzRDtBQUN0RCxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxnR0FBZ0csZUFBZTtBQUMvRztBQUNBO0FBQ0E7QUFDQSxxSUFBcUk7QUFDckk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHNFQUFzRTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0pBQWtKO0FBQ2xKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdKQUFnSjtBQUNoSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRKQUE0SjtBQUM1SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLCtJQUErSTtBQUMvSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsb0JBQW9CO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixpQ0FBaUM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLDBJQUEwSTtBQUMxSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNElBQTRJO0FBQzVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0pBQWtKO0FBQ2xKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxVQUFVLDBEQUEwRCxhQUFhO0FBQzVJLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUiwwREFBMEQsVUFBVTtBQUNwRTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRCxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLDBJQUEwSTtBQUMxSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxNQUFNO0FBQ2pCO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxNQUFNO0FBQ2Y7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1SkFBdUo7QUFDdko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSwwSUFBMEk7QUFDMUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtSkFBbUo7QUFDbko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtSkFBbUo7QUFDbko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSwrRkFBK0YsZUFBZTtBQUM5RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixpQ0FBaUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixpQ0FBaUM7QUFDN0Q7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsNkJBQTZCLHFCQUFxQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxzQkFBc0IsaUNBQWlDO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMElBQTBJO0FBQzFJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBJQUEwSTtBQUMxSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsdUJBQXVCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxzQkFBc0Isa0JBQWtCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVNQUF1TTtBQUN2TTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0pBQXdKO0FBQ3hKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsaUNBQWlDO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDhJQUE4STtBQUM5STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRJQUE0STtBQUM1STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0SUFBNEk7QUFDNUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRJQUE0STtBQUM1STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBJQUEwSTtBQUMxSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkZBQTJGLFlBQVk7QUFDdkc7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSwwSUFBMEk7QUFDMUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLDBJQUEwSTtBQUMxSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtJQUErSTtBQUMvSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRJQUE0STtBQUM1STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLGlLQUFpSztBQUNqSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRDtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCwyQkFBMkI7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsa0JBQWtCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3SUFBd0k7QUFDeEk7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxpS0FBaUs7QUFDaks7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhJQUE4STtBQUM5STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUksS0FBNkI7QUFDakM7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0EsMkVBQTJFO0FBQzNFO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGlFQUFpRTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mbGVldGNhcnQvLi9Nb2R1bGVzL01lZGlhL25vZGVfbW9kdWxlcy9kcm9wem9uZS9kaXN0L2Ryb3B6b25lLmpzPzIwMjIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xyXG5cclxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XHJcblxyXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cclxuXHJcbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XHJcblxyXG4vKlxyXG4gKlxyXG4gKiBNb3JlIGluZm8gYXQgW3d3dy5kcm9wem9uZWpzLmNvbV0oaHR0cDovL3d3dy5kcm9wem9uZWpzLmNvbSlcclxuICpcclxuICogQ29weXJpZ2h0IChjKSAyMDEyLCBNYXRpYXMgTWVub1xyXG4gKlxyXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcclxuICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xyXG4gKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXHJcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xyXG4gKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG4gKlxyXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxyXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuICpcclxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcclxuICogT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxyXG4gKiBUSEUgU09GVFdBUkUuXHJcbiAqXHJcbiAqL1xyXG5cclxuLy8gVGhlIEVtaXR0ZXIgY2xhc3MgcHJvdmlkZXMgdGhlIGFiaWxpdHkgdG8gY2FsbCBgLm9uKClgIG9uIERyb3B6b25lIHRvIGxpc3RlblxyXG4vLyB0byBldmVudHMuXHJcbi8vIEl0IGlzIHN0cm9uZ2x5IGJhc2VkIG9uIGNvbXBvbmVudCdzIGVtaXR0ZXIgY2xhc3MsIGFuZCBJIHJlbW92ZWQgdGhlXHJcbi8vIGZ1bmN0aW9uYWxpdHkgYmVjYXVzZSBvZiB0aGUgZGVwZW5kZW5jeSBoZWxsIHdpdGggZGlmZmVyZW50IGZyYW1ld29ya3MuXHJcbnZhciBFbWl0dGVyID0gZnVuY3Rpb24gKCkge1xyXG4gIGZ1bmN0aW9uIEVtaXR0ZXIoKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRW1pdHRlcik7XHJcbiAgfVxyXG5cclxuICBfY3JlYXRlQ2xhc3MoRW1pdHRlciwgW3tcclxuICAgIGtleTogXCJvblwiLFxyXG5cclxuICAgIC8vIEFkZCBhbiBldmVudCBsaXN0ZW5lciBmb3IgZ2l2ZW4gZXZlbnRcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbihldmVudCwgZm4pIHtcclxuICAgICAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG4gICAgICAvLyBDcmVhdGUgbmFtZXNwYWNlIGZvciB0aGlzIGV2ZW50XHJcbiAgICAgIGlmICghdGhpcy5fY2FsbGJhY2tzW2V2ZW50XSkge1xyXG4gICAgICAgIHRoaXMuX2NhbGxiYWNrc1tldmVudF0gPSBbXTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLl9jYWxsYmFja3NbZXZlbnRdLnB1c2goZm4pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICB9LCB7XHJcbiAgICBrZXk6IFwiZW1pdFwiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVtaXQoZXZlbnQpIHtcclxuICAgICAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG4gICAgICB2YXIgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XTtcclxuXHJcbiAgICAgIGlmIChjYWxsYmFja3MpIHtcclxuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcclxuICAgICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gY2FsbGJhY2tzLCBfaXNBcnJheSA9IHRydWUsIF9pID0gMCwgX2l0ZXJhdG9yID0gX2lzQXJyYXkgPyBfaXRlcmF0b3IgOiBfaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcclxuICAgICAgICAgIHZhciBfcmVmO1xyXG5cclxuICAgICAgICAgIGlmIChfaXNBcnJheSkge1xyXG4gICAgICAgICAgICBpZiAoX2kgPj0gX2l0ZXJhdG9yLmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICAgIF9yZWYgPSBfaXRlcmF0b3JbX2krK107XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfaSA9IF9pdGVyYXRvci5uZXh0KCk7XHJcbiAgICAgICAgICAgIGlmIChfaS5kb25lKSBicmVhaztcclxuICAgICAgICAgICAgX3JlZiA9IF9pLnZhbHVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciBjYWxsYmFjayA9IF9yZWY7XHJcblxyXG4gICAgICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZW1vdmUgZXZlbnQgbGlzdGVuZXIgZm9yIGdpdmVuIGV2ZW50LiBJZiBmbiBpcyBub3QgcHJvdmlkZWQsIGFsbCBldmVudFxyXG4gICAgLy8gbGlzdGVuZXJzIGZvciB0aGF0IGV2ZW50IHdpbGwgYmUgcmVtb3ZlZC4gSWYgbmVpdGhlciBpcyBwcm92aWRlZCwgYWxsXHJcbiAgICAvLyBldmVudCBsaXN0ZW5lcnMgd2lsbCBiZSByZW1vdmVkLlxyXG5cclxuICB9LCB7XHJcbiAgICBrZXk6IFwib2ZmXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gb2ZmKGV2ZW50LCBmbikge1xyXG4gICAgICBpZiAoIXRoaXMuX2NhbGxiYWNrcyB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzID0ge307XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHNwZWNpZmljIGV2ZW50XHJcbiAgICAgIHZhciBjYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3NbZXZlbnRdO1xyXG4gICAgICBpZiAoIWNhbGxiYWNrcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyByZW1vdmUgYWxsIGhhbmRsZXJzXHJcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1tldmVudF07XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHJlbW92ZSBzcGVjaWZpYyBoYW5kbGVyXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gY2FsbGJhY2tzW2ldO1xyXG4gICAgICAgIGlmIChjYWxsYmFjayA9PT0gZm4pIHtcclxuICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gIH1dKTtcclxuXHJcbiAgcmV0dXJuIEVtaXR0ZXI7XHJcbn0oKTtcclxuXHJcbnZhciBEcm9wem9uZSA9IGZ1bmN0aW9uIChfRW1pdHRlcikge1xyXG4gIF9pbmhlcml0cyhEcm9wem9uZSwgX0VtaXR0ZXIpO1xyXG5cclxuICBfY3JlYXRlQ2xhc3MoRHJvcHpvbmUsIG51bGwsIFt7XHJcbiAgICBrZXk6IFwiaW5pdENsYXNzXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdENsYXNzKCkge1xyXG5cclxuICAgICAgLy8gRXhwb3NpbmcgdGhlIGVtaXR0ZXIgY2xhc3MsIG1haW5seSBmb3IgdGVzdHNcclxuICAgICAgdGhpcy5wcm90b3R5cGUuRW1pdHRlciA9IEVtaXR0ZXI7XHJcblxyXG4gICAgICAvKlxyXG4gICAgICAgVGhpcyBpcyBhIGxpc3Qgb2YgYWxsIGF2YWlsYWJsZSBldmVudHMgeW91IGNhbiByZWdpc3RlciBvbiBhIGRyb3B6b25lIG9iamVjdC5cclxuICAgICAgICBZb3UgY2FuIHJlZ2lzdGVyIGFuIGV2ZW50IGhhbmRsZXIgbGlrZSB0aGlzOlxyXG4gICAgICAgIGRyb3B6b25lLm9uKFwiZHJhZ0VudGVyXCIsIGZ1bmN0aW9uKCkgeyB9KTtcclxuICAgICAgICAqL1xyXG4gICAgICB0aGlzLnByb3RvdHlwZS5ldmVudHMgPSBbXCJkcm9wXCIsIFwiZHJhZ3N0YXJ0XCIsIFwiZHJhZ2VuZFwiLCBcImRyYWdlbnRlclwiLCBcImRyYWdvdmVyXCIsIFwiZHJhZ2xlYXZlXCIsIFwiYWRkZWRmaWxlXCIsIFwiYWRkZWRmaWxlc1wiLCBcInJlbW92ZWRmaWxlXCIsIFwidGh1bWJuYWlsXCIsIFwiZXJyb3JcIiwgXCJlcnJvcm11bHRpcGxlXCIsIFwicHJvY2Vzc2luZ1wiLCBcInByb2Nlc3NpbmdtdWx0aXBsZVwiLCBcInVwbG9hZHByb2dyZXNzXCIsIFwidG90YWx1cGxvYWRwcm9ncmVzc1wiLCBcInNlbmRpbmdcIiwgXCJzZW5kaW5nbXVsdGlwbGVcIiwgXCJzdWNjZXNzXCIsIFwic3VjY2Vzc211bHRpcGxlXCIsIFwiY2FuY2VsZWRcIiwgXCJjYW5jZWxlZG11bHRpcGxlXCIsIFwiY29tcGxldGVcIiwgXCJjb21wbGV0ZW11bHRpcGxlXCIsIFwicmVzZXRcIiwgXCJtYXhmaWxlc2V4Y2VlZGVkXCIsIFwibWF4ZmlsZXNyZWFjaGVkXCIsIFwicXVldWVjb21wbGV0ZVwiXTtcclxuXHJcbiAgICAgIHRoaXMucHJvdG90eXBlLmRlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhhcyB0byBiZSBzcGVjaWZpZWQgb24gZWxlbWVudHMgb3RoZXIgdGhhbiBmb3JtIChvciB3aGVuIHRoZSBmb3JtXHJcbiAgICAgICAgICogZG9lc24ndCBoYXZlIGFuIGBhY3Rpb25gIGF0dHJpYnV0ZSkuIFlvdSBjYW4gYWxzb1xyXG4gICAgICAgICAqIHByb3ZpZGUgYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdpdGggYGZpbGVzYCBhbmRcclxuICAgICAgICAgKiBtdXN0IHJldHVybiB0aGUgdXJsIChzaW5jZSBgdjMuMTIuMGApXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdXJsOiBudWxsLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYW4gYmUgY2hhbmdlZCB0byBgXCJwdXRcImAgaWYgbmVjZXNzYXJ5LiBZb3UgY2FuIGFsc28gcHJvdmlkZSBhIGZ1bmN0aW9uXHJcbiAgICAgICAgICogdGhhdCB3aWxsIGJlIGNhbGxlZCB3aXRoIGBmaWxlc2AgYW5kIG11c3QgcmV0dXJuIHRoZSBtZXRob2QgKHNpbmNlIGB2My4xMi4wYCkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgbWV0aG9kOiBcInBvc3RcIixcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogV2lsbCBiZSBzZXQgb24gdGhlIFhIUmVxdWVzdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IGZhbHNlLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgdGltZW91dCBmb3IgdGhlIFhIUiByZXF1ZXN0cyBpbiBtaWxsaXNlY29uZHMgKHNpbmNlIGB2NC40LjBgKS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aW1lb3V0OiAzMDAwMCxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSG93IG1hbnkgZmlsZSB1cGxvYWRzIHRvIHByb2Nlc3MgaW4gcGFyYWxsZWwgKFNlZSB0aGVcclxuICAgICAgICAgKiBFbnF1ZXVpbmcgZmlsZSB1cGxvYWRzKiBkb2N1bWVudGF0aW9uIHNlY3Rpb24gZm9yIG1vcmUgaW5mbylcclxuICAgICAgICAgKi9cclxuICAgICAgICBwYXJhbGxlbFVwbG9hZHM6IDIsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdoZXRoZXIgdG8gc2VuZCBtdWx0aXBsZSBmaWxlcyBpbiBvbmUgcmVxdWVzdC4gSWZcclxuICAgICAgICAgKiB0aGlzIGl0IHNldCB0byB0cnVlLCB0aGVuIHRoZSBmYWxsYmFjayBmaWxlIGlucHV0IGVsZW1lbnQgd2lsbFxyXG4gICAgICAgICAqIGhhdmUgdGhlIGBtdWx0aXBsZWAgYXR0cmlidXRlIGFzIHdlbGwuIFRoaXMgb3B0aW9uIHdpbGxcclxuICAgICAgICAgKiBhbHNvIHRyaWdnZXIgYWRkaXRpb25hbCBldmVudHMgKGxpa2UgYHByb2Nlc3NpbmdtdWx0aXBsZWApLiBTZWUgdGhlIGV2ZW50c1xyXG4gICAgICAgICAqIGRvY3VtZW50YXRpb24gc2VjdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cclxuICAgICAgICAgKi9cclxuICAgICAgICB1cGxvYWRNdWx0aXBsZTogZmFsc2UsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdoZXRoZXIgeW91IHdhbnQgZmlsZXMgdG8gYmUgdXBsb2FkZWQgaW4gY2h1bmtzIHRvIHlvdXIgc2VydmVyLiBUaGlzIGNhbid0IGJlXHJcbiAgICAgICAgICogdXNlZCBpbiBjb21iaW5hdGlvbiB3aXRoIGB1cGxvYWRNdWx0aXBsZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBTZWUgW2NodW5rc1VwbG9hZGVkXSgjY29uZmlnLWNodW5rc1VwbG9hZGVkKSBmb3IgdGhlIGNhbGxiYWNrIHRvIGZpbmFsaXNlIGFuIHVwbG9hZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjaHVua2luZzogZmFsc2UsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIElmIGBjaHVua2luZ2AgaXMgZW5hYmxlZCwgdGhpcyBkZWZpbmVzIHdoZXRoZXIgKipldmVyeSoqIGZpbGUgc2hvdWxkIGJlIGNodW5rZWQsXHJcbiAgICAgICAgICogZXZlbiBpZiB0aGUgZmlsZSBzaXplIGlzIGJlbG93IGNodW5rU2l6ZS4gVGhpcyBtZWFucywgdGhhdCB0aGUgYWRkaXRpb25hbCBjaHVua1xyXG4gICAgICAgICAqIGZvcm0gZGF0YSB3aWxsIGJlIHN1Ym1pdHRlZCBhbmQgdGhlIGBjaHVua3NVcGxvYWRlZGAgY2FsbGJhY2sgd2lsbCBiZSBpbnZva2VkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZvcmNlQ2h1bmtpbmc6IGZhbHNlLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJZiBgY2h1bmtpbmdgIGlzIGB0cnVlYCwgdGhlbiB0aGlzIGRlZmluZXMgdGhlIGNodW5rIHNpemUgaW4gYnl0ZXMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY2h1bmtTaXplOiAyMDAwMDAwLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJZiBgdHJ1ZWAsIHRoZSBpbmRpdmlkdWFsIGNodW5rcyBvZiBhIGZpbGUgYXJlIGJlaW5nIHVwbG9hZGVkIHNpbXVsdGFuZW91c2x5LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHBhcmFsbGVsQ2h1bmtVcGxvYWRzOiBmYWxzZSxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogV2hldGhlciBhIGNodW5rIHNob3VsZCBiZSByZXRyaWVkIGlmIGl0IGZhaWxzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJldHJ5Q2h1bmtzOiBmYWxzZSxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgYHJldHJ5Q2h1bmtzYCBpcyB0cnVlLCBob3cgbWFueSB0aW1lcyBzaG91bGQgaXQgYmUgcmV0cmllZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICByZXRyeUNodW5rc0xpbWl0OiAzLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJZiBub3QgYG51bGxgIGRlZmluZXMgaG93IG1hbnkgZmlsZXMgdGhpcyBEcm9wem9uZSBoYW5kbGVzLiBJZiBpdCBleGNlZWRzLFxyXG4gICAgICAgICAqIHRoZSBldmVudCBgbWF4ZmlsZXNleGNlZWRlZGAgd2lsbCBiZSBjYWxsZWQuIFRoZSBkcm9wem9uZSBlbGVtZW50IGdldHMgdGhlXHJcbiAgICAgICAgICogY2xhc3MgYGR6LW1heC1maWxlcy1yZWFjaGVkYCBhY2NvcmRpbmdseSBzbyB5b3UgY2FuIHByb3ZpZGUgdmlzdWFsIGZlZWRiYWNrLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG1heEZpbGVzaXplOiAyNTYsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmaWxlIHBhcmFtIHRoYXQgZ2V0cyB0cmFuc2ZlcnJlZC5cclxuICAgICAgICAgKiAqKk5PVEUqKjogSWYgeW91IGhhdmUgdGhlIG9wdGlvbiAgYHVwbG9hZE11bHRpcGxlYCBzZXQgdG8gYHRydWVgLCB0aGVuXHJcbiAgICAgICAgICogRHJvcHpvbmUgd2lsbCBhcHBlbmQgYFtdYCB0byB0aGUgbmFtZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwYXJhbU5hbWU6IFwiZmlsZVwiLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXaGV0aGVyIHRodW1ibmFpbHMgZm9yIGltYWdlcyBzaG91bGQgYmUgZ2VuZXJhdGVkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY3JlYXRlSW1hZ2VUaHVtYm5haWxzOiB0cnVlLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbiBNQi4gV2hlbiB0aGUgZmlsZW5hbWUgZXhjZWVkcyB0aGlzIGxpbWl0LCB0aGUgdGh1bWJuYWlsIHdpbGwgbm90IGJlIGdlbmVyYXRlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBtYXhUaHVtYm5haWxGaWxlc2l6ZTogMTAsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIElmIGBudWxsYCwgdGhlIHJhdGlvIG9mIHRoZSBpbWFnZSB3aWxsIGJlIHVzZWQgdG8gY2FsY3VsYXRlIGl0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRodW1ibmFpbFdpZHRoOiAxMjAsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBzYW1lIGFzIGB0aHVtYm5haWxXaWR0aGAuIElmIGJvdGggYXJlIG51bGwsIGltYWdlcyB3aWxsIG5vdCBiZSByZXNpemVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRodW1ibmFpbEhlaWdodDogMTIwLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIb3cgdGhlIGltYWdlcyBzaG91bGQgYmUgc2NhbGVkIGRvd24gaW4gY2FzZSBib3RoLCBgdGh1bWJuYWlsV2lkdGhgIGFuZCBgdGh1bWJuYWlsSGVpZ2h0YCBhcmUgcHJvdmlkZWQuXHJcbiAgICAgICAgICogQ2FuIGJlIGVpdGhlciBgY29udGFpbmAgb3IgYGNyb3BgLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRodW1ibmFpbE1ldGhvZDogJ2Nyb3AnLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJZiBzZXQsIGltYWdlcyB3aWxsIGJlIHJlc2l6ZWQgdG8gdGhlc2UgZGltZW5zaW9ucyBiZWZvcmUgYmVpbmcgKip1cGxvYWRlZCoqLlxyXG4gICAgICAgICAqIElmIG9ubHkgb25lLCBgcmVzaXplV2lkdGhgICoqb3IqKiBgcmVzaXplSGVpZ2h0YCBpcyBwcm92aWRlZCwgdGhlIG9yaWdpbmFsIGFzcGVjdFxyXG4gICAgICAgICAqIHJhdGlvIG9mIHRoZSBmaWxlIHdpbGwgYmUgcHJlc2VydmVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhlIGBvcHRpb25zLnRyYW5zZm9ybUZpbGVgIGZ1bmN0aW9uIHVzZXMgdGhlc2Ugb3B0aW9ucywgc28gaWYgdGhlIGB0cmFuc2Zvcm1GaWxlYCBmdW5jdGlvblxyXG4gICAgICAgICAqIGlzIG92ZXJyaWRkZW4sIHRoZXNlIG9wdGlvbnMgZG9uJ3QgZG8gYW55dGhpbmcuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVzaXplV2lkdGg6IG51bGwsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNlZSBgcmVzaXplV2lkdGhgLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlc2l6ZUhlaWdodDogbnVsbCxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG1pbWUgdHlwZSBvZiB0aGUgcmVzaXplZCBpbWFnZSAoYmVmb3JlIGl0IGdldHMgdXBsb2FkZWQgdG8gdGhlIHNlcnZlcikuXHJcbiAgICAgICAgICogSWYgYG51bGxgIHRoZSBvcmlnaW5hbCBtaW1lIHR5cGUgd2lsbCBiZSB1c2VkLiBUbyBmb3JjZSBqcGVnLCBmb3IgZXhhbXBsZSwgdXNlIGBpbWFnZS9qcGVnYC5cclxuICAgICAgICAgKiBTZWUgYHJlc2l6ZVdpZHRoYCBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cclxuICAgICAgICAgKi9cclxuICAgICAgICByZXNpemVNaW1lVHlwZTogbnVsbCxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIHF1YWxpdHkgb2YgdGhlIHJlc2l6ZWQgaW1hZ2VzLiBTZWUgYHJlc2l6ZVdpZHRoYC5cclxuICAgICAgICAgKi9cclxuICAgICAgICByZXNpemVRdWFsaXR5OiAwLjgsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhvdyB0aGUgaW1hZ2VzIHNob3VsZCBiZSBzY2FsZWQgZG93biBpbiBjYXNlIGJvdGgsIGByZXNpemVXaWR0aGAgYW5kIGByZXNpemVIZWlnaHRgIGFyZSBwcm92aWRlZC5cclxuICAgICAgICAgKiBDYW4gYmUgZWl0aGVyIGBjb250YWluYCBvciBgY3JvcGAuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVzaXplTWV0aG9kOiAnY29udGFpbicsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBiYXNlIHRoYXQgaXMgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGZpbGVzaXplLiBZb3UgY2FuIGNoYW5nZSB0aGlzIHRvXHJcbiAgICAgICAgICogMTAyNCBpZiB5b3Ugd291bGQgcmF0aGVyIGRpc3BsYXkga2liaWJ5dGVzLCBtZWJpYnl0ZXMsIGV0Yy4uLlxyXG4gICAgICAgICAqIDEwMjQgaXMgdGVjaG5pY2FsbHkgaW5jb3JyZWN0LCBiZWNhdXNlIGAxMDI0IGJ5dGVzYCBhcmUgYDEga2liaWJ5dGVgIG5vdCBgMSBraWxvYnl0ZWAuXHJcbiAgICAgICAgICogWW91IGNhbiBjaGFuZ2UgdGhpcyB0byBgMTAyNGAgaWYgeW91IGRvbid0IGNhcmUgYWJvdXQgdmFsaWRpdHkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZmlsZXNpemVCYXNlOiAxMDAwLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYW4gYmUgdXNlZCB0byBsaW1pdCB0aGUgbWF4aW11bSBudW1iZXIgb2YgZmlsZXMgdGhhdCB3aWxsIGJlIGhhbmRsZWQgYnkgdGhpcyBEcm9wem9uZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG1heEZpbGVzOiBudWxsLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBvcHRpb25hbCBvYmplY3QgdG8gc2VuZCBhZGRpdGlvbmFsIGhlYWRlcnMgdG8gdGhlIHNlcnZlci4gRWc6XHJcbiAgICAgICAgICogYHsgXCJNeS1Bd2Vzb21lLUhlYWRlclwiOiBcImhlYWRlciB2YWx1ZVwiIH1gXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaGVhZGVyczogbnVsbCxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgYHRydWVgLCB0aGUgZHJvcHpvbmUgZWxlbWVudCBpdHNlbGYgd2lsbCBiZSBjbGlja2FibGUsIGlmIGBmYWxzZWBcclxuICAgICAgICAgKiBub3RoaW5nIHdpbGwgYmUgY2xpY2thYmxlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogWW91IGNhbiBhbHNvIHBhc3MgYW4gSFRNTCBlbGVtZW50LCBhIENTUyBzZWxlY3RvciAoZm9yIG11bHRpcGxlIGVsZW1lbnRzKVxyXG4gICAgICAgICAqIG9yIGFuIGFycmF5IG9mIHRob3NlLiBJbiB0aGF0IGNhc2UsIGFsbCBvZiB0aG9zZSBlbGVtZW50cyB3aWxsIHRyaWdnZXIgYW5cclxuICAgICAgICAgKiB1cGxvYWQgd2hlbiBjbGlja2VkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogV2hldGhlciBoaWRkZW4gZmlsZXMgaW4gZGlyZWN0b3JpZXMgc2hvdWxkIGJlIGlnbm9yZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaWdub3JlSGlkZGVuRmlsZXM6IHRydWUsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIGBhY2NlcHRgIGNoZWNrcyB0aGUgZmlsZSdzIG1pbWUgdHlwZSBvclxyXG4gICAgICAgICAqIGV4dGVuc2lvbiBhZ2FpbnN0IHRoaXMgbGlzdC4gVGhpcyBpcyBhIGNvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIG1pbWVcclxuICAgICAgICAgKiB0eXBlcyBvciBmaWxlIGV4dGVuc2lvbnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBFZy46IGBpbWFnZS8qLGFwcGxpY2F0aW9uL3BkZiwucHNkYFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgdGhlIERyb3B6b25lIGlzIGBjbGlja2FibGVgIHRoaXMgb3B0aW9uIHdpbGwgYWxzbyBiZSB1c2VkIGFzXHJcbiAgICAgICAgICogW2BhY2NlcHRgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0hUTUwvRWxlbWVudC9pbnB1dCNhdHRyLWFjY2VwdClcclxuICAgICAgICAgKiBwYXJhbWV0ZXIgb24gdGhlIGhpZGRlbiBmaWxlIGlucHV0IGFzIHdlbGwuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYWNjZXB0ZWRGaWxlczogbnVsbCxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogKipEZXByZWNhdGVkISoqXHJcbiAgICAgICAgICogVXNlIGFjY2VwdGVkRmlsZXMgaW5zdGVhZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBhY2NlcHRlZE1pbWVUeXBlczogbnVsbCxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgZmFsc2UsIGZpbGVzIHdpbGwgYmUgYWRkZWQgdG8gdGhlIHF1ZXVlIGJ1dCB0aGUgcXVldWUgd2lsbCBub3QgYmVcclxuICAgICAgICAgKiBwcm9jZXNzZWQgYXV0b21hdGljYWxseS5cclxuICAgICAgICAgKiBUaGlzIGNhbiBiZSB1c2VmdWwgaWYgeW91IG5lZWQgc29tZSBhZGRpdGlvbmFsIHVzZXIgaW5wdXQgYmVmb3JlIHNlbmRpbmdcclxuICAgICAgICAgKiBmaWxlcyAob3IgaWYgeW91IHdhbnQgd2FudCBhbGwgZmlsZXMgc2VudCBhdCBvbmNlKS5cclxuICAgICAgICAgKiBJZiB5b3UncmUgcmVhZHkgdG8gc2VuZCB0aGUgZmlsZSBzaW1wbHkgY2FsbCBgbXlEcm9wem9uZS5wcm9jZXNzUXVldWUoKWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBTZWUgdGhlIFtlbnF1ZXVpbmcgZmlsZSB1cGxvYWRzXSgjZW5xdWV1aW5nLWZpbGUtdXBsb2FkcykgZG9jdW1lbnRhdGlvblxyXG4gICAgICAgICAqIHNlY3Rpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYXV0b1Byb2Nlc3NRdWV1ZTogdHJ1ZSxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgZmFsc2UsIGZpbGVzIGFkZGVkIHRvIHRoZSBkcm9wem9uZSB3aWxsIG5vdCBiZSBxdWV1ZWQgYnkgZGVmYXVsdC5cclxuICAgICAgICAgKiBZb3UnbGwgaGF2ZSB0byBjYWxsIGBlbnF1ZXVlRmlsZShmaWxlKWAgbWFudWFsbHkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYXV0b1F1ZXVlOiB0cnVlLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJZiBgdHJ1ZWAsIHRoaXMgd2lsbCBhZGQgYSBsaW5rIHRvIGV2ZXJ5IGZpbGUgcHJldmlldyB0byByZW1vdmUgb3IgY2FuY2VsIChpZlxyXG4gICAgICAgICAqIGFscmVhZHkgdXBsb2FkaW5nKSB0aGUgZmlsZS4gVGhlIGBkaWN0Q2FuY2VsVXBsb2FkYCwgYGRpY3RDYW5jZWxVcGxvYWRDb25maXJtYXRpb25gXHJcbiAgICAgICAgICogYW5kIGBkaWN0UmVtb3ZlRmlsZWAgb3B0aW9ucyBhcmUgdXNlZCBmb3IgdGhlIHdvcmRpbmcuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYWRkUmVtb3ZlTGlua3M6IGZhbHNlLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZWZpbmVzIHdoZXJlIHRvIGRpc3BsYXkgdGhlIGZpbGUgcHJldmlld3Mg4oCTIGlmIGBudWxsYCB0aGVcclxuICAgICAgICAgKiBEcm9wem9uZSBlbGVtZW50IGl0c2VsZiBpcyB1c2VkLiBDYW4gYmUgYSBwbGFpbiBgSFRNTEVsZW1lbnRgIG9yIGEgQ1NTXHJcbiAgICAgICAgICogc2VsZWN0b3IuIFRoZSBlbGVtZW50IHNob3VsZCBoYXZlIHRoZSBgZHJvcHpvbmUtcHJldmlld3NgIGNsYXNzIHNvXHJcbiAgICAgICAgICogdGhlIHByZXZpZXdzIGFyZSBkaXNwbGF5ZWQgcHJvcGVybHkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJldmlld3NDb250YWluZXI6IG51bGwsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoaXMgaXMgdGhlIGVsZW1lbnQgdGhlIGhpZGRlbiBpbnB1dCBmaWVsZCAod2hpY2ggaXMgdXNlZCB3aGVuIGNsaWNraW5nIG9uIHRoZVxyXG4gICAgICAgICAqIGRyb3B6b25lIHRvIHRyaWdnZXIgZmlsZSBzZWxlY3Rpb24pIHdpbGwgYmUgYXBwZW5kZWQgdG8uIFRoaXMgbWlnaHRcclxuICAgICAgICAgKiBiZSBpbXBvcnRhbnQgaW4gY2FzZSB5b3UgdXNlIGZyYW1ld29ya3MgdG8gc3dpdGNoIHRoZSBjb250ZW50IG9mIHlvdXIgcGFnZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBoaWRkZW5JbnB1dENvbnRhaW5lcjogXCJib2R5XCIsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIElmIG51bGwsIG5vIGNhcHR1cmUgdHlwZSB3aWxsIGJlIHNwZWNpZmllZFxyXG4gICAgICAgICAqIElmIGNhbWVyYSwgbW9iaWxlIGRldmljZXMgd2lsbCBza2lwIHRoZSBmaWxlIHNlbGVjdGlvbiBhbmQgY2hvb3NlIGNhbWVyYVxyXG4gICAgICAgICAqIElmIG1pY3JvcGhvbmUsIG1vYmlsZSBkZXZpY2VzIHdpbGwgc2tpcCB0aGUgZmlsZSBzZWxlY3Rpb24gYW5kIGNob29zZSB0aGUgbWljcm9waG9uZVxyXG4gICAgICAgICAqIElmIGNhbWNvcmRlciwgbW9iaWxlIGRldmljZXMgd2lsbCBza2lwIHRoZSBmaWxlIHNlbGVjdGlvbiBhbmQgY2hvb3NlIHRoZSBjYW1lcmEgaW4gdmlkZW8gbW9kZVxyXG4gICAgICAgICAqIE9uIGFwcGxlIGRldmljZXMgbXVsdGlwbGUgbXVzdCBiZSBzZXQgdG8gZmFsc2UuICBBY2NlcHRlZEZpbGVzIG1heSBuZWVkIHRvXHJcbiAgICAgICAgICogYmUgc2V0IHRvIGFuIGFwcHJvcHJpYXRlIG1pbWUgdHlwZSAoZS5nLiBcImltYWdlLypcIiwgXCJhdWRpby8qXCIsIG9yIFwidmlkZW8vKlwiKS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjYXB0dXJlOiBudWxsLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiAqKkRlcHJlY2F0ZWQqKi4gVXNlIGByZW5hbWVGaWxlYCBpbnN0ZWFkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlbmFtZUZpbGVuYW1lOiBudWxsLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgaXMgaW52b2tlZCBiZWZvcmUgdGhlIGZpbGUgaXMgdXBsb2FkZWQgdG8gdGhlIHNlcnZlciBhbmQgcmVuYW1lcyB0aGUgZmlsZS5cclxuICAgICAgICAgKiBUaGlzIGZ1bmN0aW9uIGdldHMgdGhlIGBGaWxlYCBhcyBhcmd1bWVudCBhbmQgY2FuIHVzZSB0aGUgYGZpbGUubmFtZWAuIFRoZSBhY3R1YWwgbmFtZSBvZiB0aGVcclxuICAgICAgICAgKiBmaWxlIHRoYXQgZ2V0cyB1c2VkIGR1cmluZyB0aGUgdXBsb2FkIGNhbiBiZSBhY2Nlc3NlZCB0aHJvdWdoIGBmaWxlLnVwbG9hZC5maWxlbmFtZWAuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVuYW1lRmlsZTogbnVsbCxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgYHRydWVgIHRoZSBmYWxsYmFjayB3aWxsIGJlIGZvcmNlZC4gVGhpcyBpcyB2ZXJ5IHVzZWZ1bCB0byB0ZXN0IHlvdXIgc2VydmVyXHJcbiAgICAgICAgICogaW1wbGVtZW50YXRpb25zIGZpcnN0IGFuZCBtYWtlIHN1cmUgdGhhdCBldmVyeXRoaW5nIHdvcmtzIGFzXHJcbiAgICAgICAgICogZXhwZWN0ZWQgd2l0aG91dCBkcm9wem9uZSBpZiB5b3UgZXhwZXJpZW5jZSBwcm9ibGVtcywgYW5kIHRvIHRlc3RcclxuICAgICAgICAgKiBob3cgeW91ciBmYWxsYmFja3Mgd2lsbCBsb29rLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZvcmNlRmFsbGJhY2s6IGZhbHNlLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgdGV4dCB1c2VkIGJlZm9yZSBhbnkgZmlsZXMgYXJlIGRyb3BwZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZGljdERlZmF1bHRNZXNzYWdlOiBcIkRyb3AgZmlsZXMgaGVyZSB0byB1cGxvYWRcIixcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIHRleHQgdGhhdCByZXBsYWNlcyB0aGUgZGVmYXVsdCBtZXNzYWdlIHRleHQgaXQgdGhlIGJyb3dzZXIgaXMgbm90IHN1cHBvcnRlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBkaWN0RmFsbGJhY2tNZXNzYWdlOiBcIllvdXIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IGRyYWcnbidkcm9wIGZpbGUgdXBsb2Fkcy5cIixcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIHRleHQgdGhhdCB3aWxsIGJlIGFkZGVkIGJlZm9yZSB0aGUgZmFsbGJhY2sgZm9ybS5cclxuICAgICAgICAgKiBJZiB5b3UgcHJvdmlkZSBhICBmYWxsYmFjayBlbGVtZW50IHlvdXJzZWxmLCBvciBpZiB0aGlzIG9wdGlvbiBpcyBgbnVsbGAgdGhpcyB3aWxsXHJcbiAgICAgICAgICogYmUgaWdub3JlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBkaWN0RmFsbGJhY2tUZXh0OiBcIlBsZWFzZSB1c2UgdGhlIGZhbGxiYWNrIGZvcm0gYmVsb3cgdG8gdXBsb2FkIHlvdXIgZmlsZXMgbGlrZSBpbiB0aGUgb2xkZW4gZGF5cy5cIixcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgdGhlIGZpbGVzaXplIGlzIHRvbyBiaWcuXHJcbiAgICAgICAgICogYHt7ZmlsZXNpemV9fWAgYW5kIGB7e21heEZpbGVzaXplfX1gIHdpbGwgYmUgcmVwbGFjZWQgd2l0aCB0aGUgcmVzcGVjdGl2ZSBjb25maWd1cmF0aW9uIHZhbHVlcy5cclxuICAgICAgICAgKi9cclxuICAgICAgICBkaWN0RmlsZVRvb0JpZzogXCJGaWxlIGlzIHRvbyBiaWcgKHt7ZmlsZXNpemV9fU1pQikuIE1heCBmaWxlc2l6ZToge3ttYXhGaWxlc2l6ZX19TWlCLlwiLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJZiB0aGUgZmlsZSBkb2Vzbid0IG1hdGNoIHRoZSBmaWxlIHR5cGUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZGljdEludmFsaWRGaWxlVHlwZTogXCJZb3UgY2FuJ3QgdXBsb2FkIGZpbGVzIG9mIHRoaXMgdHlwZS5cIixcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgdGhlIHNlcnZlciByZXNwb25zZSB3YXMgaW52YWxpZC5cclxuICAgICAgICAgKiBge3tzdGF0dXNDb2RlfX1gIHdpbGwgYmUgcmVwbGFjZWQgd2l0aCB0aGUgc2VydmVycyBzdGF0dXMgY29kZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBkaWN0UmVzcG9uc2VFcnJvcjogXCJTZXJ2ZXIgcmVzcG9uZGVkIHdpdGgge3tzdGF0dXNDb2RlfX0gY29kZS5cIixcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgYGFkZFJlbW92ZUxpbmtzYCBpcyB0cnVlLCB0aGUgdGV4dCB0byBiZSB1c2VkIGZvciB0aGUgY2FuY2VsIHVwbG9hZCBsaW5rLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRpY3RDYW5jZWxVcGxvYWQ6IFwiQ2FuY2VsIHVwbG9hZFwiLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgdGV4dCB0aGF0IGlzIGRpc3BsYXllZCBpZiBhbiB1cGxvYWQgd2FzIG1hbnVhbGx5IGNhbmNlbGVkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZGljdFVwbG9hZENhbmNlbGVkOiBcIlVwbG9hZCBjYW5jZWxlZC5cIixcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgYGFkZFJlbW92ZUxpbmtzYCBpcyB0cnVlLCB0aGUgdGV4dCB0byBiZSB1c2VkIGZvciBjb25maXJtYXRpb24gd2hlbiBjYW5jZWxsaW5nIHVwbG9hZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBkaWN0Q2FuY2VsVXBsb2FkQ29uZmlybWF0aW9uOiBcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjYW5jZWwgdGhpcyB1cGxvYWQ/XCIsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIElmIGBhZGRSZW1vdmVMaW5rc2AgaXMgdHJ1ZSwgdGhlIHRleHQgdG8gYmUgdXNlZCB0byByZW1vdmUgYSBmaWxlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRpY3RSZW1vdmVGaWxlOiBcIlJlbW92ZSBmaWxlXCIsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIElmIHRoaXMgaXMgbm90IG51bGwsIHRoZW4gdGhlIHVzZXIgd2lsbCBiZSBwcm9tcHRlZCBiZWZvcmUgcmVtb3ZpbmcgYSBmaWxlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRpY3RSZW1vdmVGaWxlQ29uZmlybWF0aW9uOiBudWxsLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEaXNwbGF5ZWQgaWYgYG1heEZpbGVzYCBpcyBzdCBhbmQgZXhjZWVkZWQuXHJcbiAgICAgICAgICogVGhlIHN0cmluZyBge3ttYXhGaWxlc319YCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHRoZSBjb25maWd1cmF0aW9uIHZhbHVlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRpY3RNYXhGaWxlc0V4Y2VlZGVkOiBcIllvdSBjYW4gbm90IHVwbG9hZCBhbnkgbW9yZSBmaWxlcy5cIixcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWxsb3dzIHlvdSB0byB0cmFuc2xhdGUgdGhlIGRpZmZlcmVudCB1bml0cy4gU3RhcnRpbmcgd2l0aCBgdGJgIGZvciB0ZXJhYnl0ZXMgYW5kIGdvaW5nIGRvd24gdG9cclxuICAgICAgICAgKiBgYmAgZm9yIGJ5dGVzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRpY3RGaWxlU2l6ZVVuaXRzOiB7IHRiOiBcIlRCXCIsIGdiOiBcIkdCXCIsIG1iOiBcIk1CXCIsIGtiOiBcIktCXCIsIGI6IFwiYlwiIH0sXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FsbGVkIHdoZW4gZHJvcHpvbmUgaW5pdGlhbGl6ZWRcclxuICAgICAgICAgKiBZb3UgY2FuIGFkZCBldmVudCBsaXN0ZW5lcnMgaGVyZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7fSxcclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhbiBiZSBhbiAqKm9iamVjdCoqIG9mIGFkZGl0aW9uYWwgcGFyYW1ldGVycyB0byB0cmFuc2ZlciB0byB0aGUgc2VydmVyLCAqKm9yKiogYSBgRnVuY3Rpb25gXHJcbiAgICAgICAgICogdGhhdCBnZXRzIGludm9rZWQgd2l0aCB0aGUgYGZpbGVzYCwgYHhocmAgYW5kLCBpZiBpdCdzIGEgY2h1bmtlZCB1cGxvYWQsIGBjaHVua2AgYXJndW1lbnRzLiBJbiBjYXNlXHJcbiAgICAgICAgICogb2YgYSBmdW5jdGlvbiwgdGhpcyBuZWVkcyB0byByZXR1cm4gYSBtYXAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBkb2VzIG5vdGhpbmcgZm9yIG5vcm1hbCB1cGxvYWRzLCBidXQgYWRkcyByZWxldmFudCBpbmZvcm1hdGlvbiBmb3JcclxuICAgICAgICAgKiBjaHVua2VkIHVwbG9hZHMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGlzIGlzIHRoZSBzYW1lIGFzIGFkZGluZyBoaWRkZW4gaW5wdXQgZmllbGRzIGluIHRoZSBmb3JtIGVsZW1lbnQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcGFyYW1zOiBmdW5jdGlvbiBwYXJhbXMoZmlsZXMsIHhociwgY2h1bmspIHtcclxuICAgICAgICAgIGlmIChjaHVuaykge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgIGR6dXVpZDogY2h1bmsuZmlsZS51cGxvYWQudXVpZCxcclxuICAgICAgICAgICAgICBkemNodW5raW5kZXg6IGNodW5rLmluZGV4LFxyXG4gICAgICAgICAgICAgIGR6dG90YWxmaWxlc2l6ZTogY2h1bmsuZmlsZS5zaXplLFxyXG4gICAgICAgICAgICAgIGR6Y2h1bmtzaXplOiB0aGlzLm9wdGlvbnMuY2h1bmtTaXplLFxyXG4gICAgICAgICAgICAgIGR6dG90YWxjaHVua2NvdW50OiBjaHVuay5maWxlLnVwbG9hZC50b3RhbENodW5rQ291bnQsXHJcbiAgICAgICAgICAgICAgZHpjaHVua2J5dGVvZmZzZXQ6IGNodW5rLmluZGV4ICogdGhpcy5vcHRpb25zLmNodW5rU2l6ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgZ2V0cyBhIFtmaWxlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0RPTS9GaWxlKVxyXG4gICAgICAgICAqIGFuZCBhIGBkb25lYCBmdW5jdGlvbiBhcyBwYXJhbWV0ZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgdGhlIGRvbmUgZnVuY3Rpb24gaXMgaW52b2tlZCB3aXRob3V0IGFyZ3VtZW50cywgdGhlIGZpbGUgaXMgXCJhY2NlcHRlZFwiIGFuZCB3aWxsXHJcbiAgICAgICAgICogYmUgcHJvY2Vzc2VkLiBJZiB5b3UgcGFzcyBhbiBlcnJvciBtZXNzYWdlLCB0aGUgZmlsZSBpcyByZWplY3RlZCwgYW5kIHRoZSBlcnJvclxyXG4gICAgICAgICAqIG1lc3NhZ2Ugd2lsbCBiZSBkaXNwbGF5ZWQuXHJcbiAgICAgICAgICogVGhpcyBmdW5jdGlvbiB3aWxsIG5vdCBiZSBjYWxsZWQgaWYgdGhlIGZpbGUgaXMgdG9vIGJpZyBvciBkb2Vzbid0IG1hdGNoIHRoZSBtaW1lIHR5cGVzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGFjY2VwdDogZnVuY3Rpb24gYWNjZXB0KGZpbGUsIGRvbmUpIHtcclxuICAgICAgICAgIHJldHVybiBkb25lKCk7XHJcbiAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgaW52b2tlZCB3aGVuIGFsbCBjaHVua3MgaGF2ZSBiZWVuIHVwbG9hZGVkIGZvciBhIGZpbGUuXHJcbiAgICAgICAgICogSXQgZ2V0cyB0aGUgZmlsZSBmb3Igd2hpY2ggdGhlIGNodW5rcyBoYXZlIGJlZW4gdXBsb2FkZWQgYXMgdGhlIGZpcnN0IHBhcmFtZXRlcixcclxuICAgICAgICAgKiBhbmQgdGhlIGBkb25lYCBmdW5jdGlvbiBhcyBzZWNvbmQuIGBkb25lKClgIG5lZWRzIHRvIGJlIGludm9rZWQgd2hlbiBldmVyeXRoaW5nXHJcbiAgICAgICAgICogbmVlZGVkIHRvIGZpbmlzaCB0aGUgdXBsb2FkIHByb2Nlc3MgaXMgZG9uZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjaHVua3NVcGxvYWRlZDogZnVuY3Rpb24gY2h1bmtzVXBsb2FkZWQoZmlsZSwgZG9uZSkge1xyXG4gICAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIGJyb3dzZXIgaXMgbm90IHN1cHBvcnRlZC5cclxuICAgICAgICAgKiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBzaG93cyB0aGUgZmFsbGJhY2sgaW5wdXQgZmllbGQgYW5kIGFkZHNcclxuICAgICAgICAgKiBhIHRleHQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZmFsbGJhY2s6IGZ1bmN0aW9uIGZhbGxiYWNrKCkge1xyXG4gICAgICAgICAgLy8gVGhpcyBjb2RlIHNob3VsZCBwYXNzIGluIElFNy4uLiA6KFxyXG4gICAgICAgICAgdmFyIG1lc3NhZ2VFbGVtZW50ID0gdm9pZCAwO1xyXG4gICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuZWxlbWVudC5jbGFzc05hbWUgKyBcIiBkei1icm93c2VyLW5vdC1zdXBwb3J0ZWRcIjtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZGl2XCIpLCBfaXNBcnJheTIgPSB0cnVlLCBfaTIgPSAwLCBfaXRlcmF0b3IyID0gX2lzQXJyYXkyID8gX2l0ZXJhdG9yMiA6IF9pdGVyYXRvcjJbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcclxuICAgICAgICAgICAgdmFyIF9yZWYyO1xyXG5cclxuICAgICAgICAgICAgaWYgKF9pc0FycmF5Mikge1xyXG4gICAgICAgICAgICAgIGlmIChfaTIgPj0gX2l0ZXJhdG9yMi5sZW5ndGgpIGJyZWFrO1xyXG4gICAgICAgICAgICAgIF9yZWYyID0gX2l0ZXJhdG9yMltfaTIrK107XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgX2kyID0gX2l0ZXJhdG9yMi5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgaWYgKF9pMi5kb25lKSBicmVhaztcclxuICAgICAgICAgICAgICBfcmVmMiA9IF9pMi52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGNoaWxkID0gX3JlZjI7XHJcblxyXG4gICAgICAgICAgICBpZiAoLyhefCApZHotbWVzc2FnZSgkfCApLy50ZXN0KGNoaWxkLmNsYXNzTmFtZSkpIHtcclxuICAgICAgICAgICAgICBtZXNzYWdlRWxlbWVudCA9IGNoaWxkO1xyXG4gICAgICAgICAgICAgIGNoaWxkLmNsYXNzTmFtZSA9IFwiZHotbWVzc2FnZVwiOyAvLyBSZW1vdmVzIHRoZSAnZHotZGVmYXVsdCcgY2xhc3NcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCFtZXNzYWdlRWxlbWVudCkge1xyXG4gICAgICAgICAgICBtZXNzYWdlRWxlbWVudCA9IERyb3B6b25lLmNyZWF0ZUVsZW1lbnQoXCI8ZGl2IGNsYXNzPVxcXCJkei1tZXNzYWdlXFxcIj48c3Bhbj48L3NwYW4+PC9kaXY+XCIpO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQobWVzc2FnZUVsZW1lbnQpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciBzcGFuID0gbWVzc2FnZUVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzcGFuXCIpWzBdO1xyXG4gICAgICAgICAgaWYgKHNwYW4pIHtcclxuICAgICAgICAgICAgaWYgKHNwYW4udGV4dENvbnRlbnQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSB0aGlzLm9wdGlvbnMuZGljdEZhbGxiYWNrTWVzc2FnZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzcGFuLmlubmVyVGV4dCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgc3Bhbi5pbm5lclRleHQgPSB0aGlzLm9wdGlvbnMuZGljdEZhbGxiYWNrTWVzc2FnZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5nZXRGYWxsYmFja0Zvcm0oKSk7XHJcbiAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgY2FsbGVkIHRvIGNhbGN1bGF0ZSB0aGUgdGh1bWJuYWlsIGRpbWVuc2lvbnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJdCBnZXRzIGBmaWxlYCwgYHdpZHRoYCBhbmQgYGhlaWdodGAgKGJvdGggbWF5IGJlIGBudWxsYCkgYXMgcGFyYW1ldGVycyBhbmQgbXVzdCByZXR1cm4gYW4gb2JqZWN0IGNvbnRhaW5pbmc6XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAgLSBgc3JjV2lkdGhgICYgYHNyY0hlaWdodGAgKHJlcXVpcmVkKVxyXG4gICAgICAgICAqICAtIGB0cmdXaWR0aGAgJiBgdHJnSGVpZ2h0YCAocmVxdWlyZWQpXHJcbiAgICAgICAgICogIC0gYHNyY1hgICYgYHNyY1lgIChvcHRpb25hbCwgZGVmYXVsdCBgMGApXHJcbiAgICAgICAgICogIC0gYHRyZ1hgICYgYHRyZ1lgIChvcHRpb25hbCwgZGVmYXVsdCBgMGApXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaG9zZSB2YWx1ZXMgYXJlIGdvaW5nIHRvIGJlIHVzZWQgYnkgYGN0eC5kcmF3SW1hZ2UoKWAuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVzaXplOiBmdW5jdGlvbiByZXNpemUoZmlsZSwgd2lkdGgsIGhlaWdodCwgcmVzaXplTWV0aG9kKSB7XHJcbiAgICAgICAgICB2YXIgaW5mbyA9IHtcclxuICAgICAgICAgICAgc3JjWDogMCxcclxuICAgICAgICAgICAgc3JjWTogMCxcclxuICAgICAgICAgICAgc3JjV2lkdGg6IGZpbGUud2lkdGgsXHJcbiAgICAgICAgICAgIHNyY0hlaWdodDogZmlsZS5oZWlnaHRcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgdmFyIHNyY1JhdGlvID0gZmlsZS53aWR0aCAvIGZpbGUuaGVpZ2h0O1xyXG5cclxuICAgICAgICAgIC8vIEF1dG9tYXRpY2FsbHkgY2FsY3VsYXRlIGRpbWVuc2lvbnMgaWYgbm90IHNwZWNpZmllZFxyXG4gICAgICAgICAgaWYgKHdpZHRoID09IG51bGwgJiYgaGVpZ2h0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgd2lkdGggPSBpbmZvLnNyY1dpZHRoO1xyXG4gICAgICAgICAgICBoZWlnaHQgPSBpbmZvLnNyY0hlaWdodDtcclxuICAgICAgICAgIH0gZWxzZSBpZiAod2lkdGggPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB3aWR0aCA9IGhlaWdodCAqIHNyY1JhdGlvO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChoZWlnaHQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBoZWlnaHQgPSB3aWR0aCAvIHNyY1JhdGlvO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIE1ha2Ugc3VyZSBpbWFnZXMgYXJlbid0IHVwc2NhbGVkXHJcbiAgICAgICAgICB3aWR0aCA9IE1hdGgubWluKHdpZHRoLCBpbmZvLnNyY1dpZHRoKTtcclxuICAgICAgICAgIGhlaWdodCA9IE1hdGgubWluKGhlaWdodCwgaW5mby5zcmNIZWlnaHQpO1xyXG5cclxuICAgICAgICAgIHZhciB0cmdSYXRpbyA9IHdpZHRoIC8gaGVpZ2h0O1xyXG5cclxuICAgICAgICAgIGlmIChpbmZvLnNyY1dpZHRoID4gd2lkdGggfHwgaW5mby5zcmNIZWlnaHQgPiBoZWlnaHQpIHtcclxuICAgICAgICAgICAgLy8gSW1hZ2UgaXMgYmlnZ2VyIGFuZCBuZWVkcyByZXNjYWxpbmdcclxuICAgICAgICAgICAgaWYgKHJlc2l6ZU1ldGhvZCA9PT0gJ2Nyb3AnKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHNyY1JhdGlvID4gdHJnUmF0aW8pIHtcclxuICAgICAgICAgICAgICAgIGluZm8uc3JjSGVpZ2h0ID0gZmlsZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBpbmZvLnNyY1dpZHRoID0gaW5mby5zcmNIZWlnaHQgKiB0cmdSYXRpbztcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5mby5zcmNXaWR0aCA9IGZpbGUud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBpbmZvLnNyY0hlaWdodCA9IGluZm8uc3JjV2lkdGggLyB0cmdSYXRpbztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzaXplTWV0aG9kID09PSAnY29udGFpbicpIHtcclxuICAgICAgICAgICAgICAvLyBNZXRob2QgJ2NvbnRhaW4nXHJcbiAgICAgICAgICAgICAgaWYgKHNyY1JhdGlvID4gdHJnUmF0aW8pIHtcclxuICAgICAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoIC8gc3JjUmF0aW87XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdpZHRoID0gaGVpZ2h0ICogc3JjUmF0aW87XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gcmVzaXplTWV0aG9kICdcIiArIHJlc2l6ZU1ldGhvZCArIFwiJ1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGluZm8uc3JjWCA9IChmaWxlLndpZHRoIC0gaW5mby5zcmNXaWR0aCkgLyAyO1xyXG4gICAgICAgICAgaW5mby5zcmNZID0gKGZpbGUuaGVpZ2h0IC0gaW5mby5zcmNIZWlnaHQpIC8gMjtcclxuXHJcbiAgICAgICAgICBpbmZvLnRyZ1dpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICBpbmZvLnRyZ0hlaWdodCA9IGhlaWdodDtcclxuXHJcbiAgICAgICAgICByZXR1cm4gaW5mbztcclxuICAgICAgICB9LFxyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FuIGJlIHVzZWQgdG8gdHJhbnNmb3JtIHRoZSBmaWxlIChmb3IgZXhhbXBsZSwgcmVzaXplIGFuIGltYWdlIGlmIG5lY2Vzc2FyeSkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiB1c2VzIGByZXNpemVXaWR0aGAgYW5kIGByZXNpemVIZWlnaHRgIChpZiBwcm92aWRlZCkgYW5kIHJlc2l6ZXNcclxuICAgICAgICAgKiBpbWFnZXMgYWNjb3JkaW5nIHRvIHRob3NlIGRpbWVuc2lvbnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBHZXRzIHRoZSBgZmlsZWAgYXMgdGhlIGZpcnN0IHBhcmFtZXRlciwgYW5kIGEgYGRvbmUoKWAgZnVuY3Rpb24gYXMgdGhlIHNlY29uZCwgdGhhdCBuZWVkc1xyXG4gICAgICAgICAqIHRvIGJlIGludm9rZWQgd2l0aCB0aGUgZmlsZSB3aGVuIHRoZSB0cmFuc2Zvcm1hdGlvbiBpcyBkb25lLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRyYW5zZm9ybUZpbGU6IGZ1bmN0aW9uIHRyYW5zZm9ybUZpbGUoZmlsZSwgZG9uZSkge1xyXG4gICAgICAgICAgaWYgKCh0aGlzLm9wdGlvbnMucmVzaXplV2lkdGggfHwgdGhpcy5vcHRpb25zLnJlc2l6ZUhlaWdodCkgJiYgZmlsZS50eXBlLm1hdGNoKC9pbWFnZS4qLykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzaXplSW1hZ2UoZmlsZSwgdGhpcy5vcHRpb25zLnJlc2l6ZVdpZHRoLCB0aGlzLm9wdGlvbnMucmVzaXplSGVpZ2h0LCB0aGlzLm9wdGlvbnMucmVzaXplTWV0aG9kLCBkb25lKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkb25lKGZpbGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIHN0cmluZyB0aGF0IGNvbnRhaW5zIHRoZSB0ZW1wbGF0ZSB1c2VkIGZvciBlYWNoIGRyb3BwZWRcclxuICAgICAgICAgKiBmaWxlLiBDaGFuZ2UgaXQgdG8gZnVsZmlsbCB5b3VyIG5lZWRzIGJ1dCBtYWtlIHN1cmUgdG8gcHJvcGVybHlcclxuICAgICAgICAgKiBwcm92aWRlIGFsbCBlbGVtZW50cy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIHlvdSB3YW50IHRvIHVzZSBhbiBhY3R1YWwgSFRNTCBlbGVtZW50IGluc3RlYWQgb2YgcHJvdmlkaW5nIGEgU3RyaW5nXHJcbiAgICAgICAgICogYXMgYSBjb25maWcgb3B0aW9uLCB5b3UgY291bGQgY3JlYXRlIGEgZGl2IHdpdGggdGhlIGlkIGB0cGxgLFxyXG4gICAgICAgICAqIHB1dCB0aGUgdGVtcGxhdGUgaW5zaWRlIGl0IGFuZCBwcm92aWRlIHRoZSBlbGVtZW50IGxpa2UgdGhpczpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICAgICBkb2N1bWVudFxyXG4gICAgICAgICAqICAgICAgIC5xdWVyeVNlbGVjdG9yKCcjdHBsJylcclxuICAgICAgICAgKiAgICAgICAuaW5uZXJIVE1MXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcmV2aWV3VGVtcGxhdGU6IFwiPGRpdiBjbGFzcz1cXFwiZHotcHJldmlldyBkei1maWxlLXByZXZpZXdcXFwiPlxcbiAgPGRpdiBjbGFzcz1cXFwiZHotaW1hZ2VcXFwiPjxpbWcgZGF0YS1kei10aHVtYm5haWwgLz48L2Rpdj5cXG4gIDxkaXYgY2xhc3M9XFxcImR6LWRldGFpbHNcXFwiPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJkei1zaXplXFxcIj48c3BhbiBkYXRhLWR6LXNpemU+PC9zcGFuPjwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJkei1maWxlbmFtZVxcXCI+PHNwYW4gZGF0YS1kei1uYW1lPjwvc3Bhbj48L2Rpdj5cXG4gIDwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cXFwiZHotcHJvZ3Jlc3NcXFwiPjxzcGFuIGNsYXNzPVxcXCJkei11cGxvYWRcXFwiIGRhdGEtZHotdXBsb2FkcHJvZ3Jlc3M+PC9zcGFuPjwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cXFwiZHotZXJyb3ItbWVzc2FnZVxcXCI+PHNwYW4gZGF0YS1kei1lcnJvcm1lc3NhZ2U+PC9zcGFuPjwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cXFwiZHotc3VjY2Vzcy1tYXJrXFxcIj5cXG4gICAgPHN2ZyB3aWR0aD1cXFwiNTRweFxcXCIgaGVpZ2h0PVxcXCI1NHB4XFxcIiB2aWV3Qm94PVxcXCIwIDAgNTQgNTRcXFwiIHZlcnNpb249XFxcIjEuMVxcXCIgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB4bWxuczp4bGluaz1cXFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1xcXCIgeG1sbnM6c2tldGNoPVxcXCJodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2gvbnNcXFwiPlxcbiAgICAgIDx0aXRsZT5DaGVjazwvdGl0bGU+XFxuICAgICAgPGRlZnM+PC9kZWZzPlxcbiAgICAgIDxnIGlkPVxcXCJQYWdlLTFcXFwiIHN0cm9rZT1cXFwibm9uZVxcXCIgc3Ryb2tlLXdpZHRoPVxcXCIxXFxcIiBmaWxsPVxcXCJub25lXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIHNrZXRjaDp0eXBlPVxcXCJNU1BhZ2VcXFwiPlxcbiAgICAgICAgPHBhdGggZD1cXFwiTTIzLjUsMzEuODQzMTQ1OCBMMTcuNTg1MjQxOSwyNS45MjgzODc3IEMxNi4wMjQ4MjUzLDI0LjM2Nzk3MTEgMTMuNDkxMDI5NCwyNC4zNjY4MzUgMTEuOTI4OTMyMiwyNS45Mjg5MzIyIEMxMC4zNzAwMTM2LDI3LjQ4Nzg1MDggMTAuMzY2NTkxMiwzMC4wMjM0NDU1IDExLjkyODM4NzcsMzEuNTg1MjQxOSBMMjAuNDE0NzU4MSw0MC4wNzE2MTIzIEMyMC41MTMzOTk5LDQwLjE3MDI1NDEgMjAuNjE1OTMxNSw0MC4yNjI2NjQ5IDIwLjcyMTg2MTUsNDAuMzQ4ODQzNSBDMjIuMjgzNTY2OSw0MS44NzI1NjUxIDI0Ljc5NDIzNCw0MS44NjI2MjAyIDI2LjM0NjE1NjQsNDAuMzEwNjk3OCBMNDMuMzEwNjk3OCwyMy4zNDYxNTY0IEM0NC44NzcxMDIxLDIxLjc3OTc1MjEgNDQuODc1ODA1NywxOS4yNDgzODg3IDQzLjMxMzcwODUsMTcuNjg2MjkxNSBDNDEuNzU0Nzg5OSwxNi4xMjczNzI5IDM5LjIxNzYwMzUsMTYuMTI1NTQyMiAzNy42NTM4NDM2LDE3LjY4OTMwMjIgTDIzLjUsMzEuODQzMTQ1OCBaIE0yNyw1MyBDNDEuMzU5NDAzNSw1MyA1Myw0MS4zNTk0MDM1IDUzLDI3IEM1MywxMi42NDA1OTY1IDQxLjM1OTQwMzUsMSAyNywxIEMxMi42NDA1OTY1LDEgMSwxMi42NDA1OTY1IDEsMjcgQzEsNDEuMzU5NDAzNSAxMi42NDA1OTY1LDUzIDI3LDUzIFpcXFwiIGlkPVxcXCJPdmFsLTJcXFwiIHN0cm9rZS1vcGFjaXR5PVxcXCIwLjE5ODc5NDE1OFxcXCIgc3Ryb2tlPVxcXCIjNzQ3NDc0XFxcIiBmaWxsLW9wYWNpdHk9XFxcIjAuODE2NTE5NDc1XFxcIiBmaWxsPVxcXCIjRkZGRkZGXFxcIiBza2V0Y2g6dHlwZT1cXFwiTVNTaGFwZUdyb3VwXFxcIj48L3BhdGg+XFxuICAgICAgPC9nPlxcbiAgICA8L3N2Zz5cXG4gIDwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cXFwiZHotZXJyb3ItbWFya1xcXCI+XFxuICAgIDxzdmcgd2lkdGg9XFxcIjU0cHhcXFwiIGhlaWdodD1cXFwiNTRweFxcXCIgdmlld0JveD1cXFwiMCAwIDU0IDU0XFxcIiB2ZXJzaW9uPVxcXCIxLjFcXFwiIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgeG1sbnM6eGxpbms9XFxcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcXFwiIHhtbG5zOnNrZXRjaD1cXFwiaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zXFxcIj5cXG4gICAgICA8dGl0bGU+RXJyb3I8L3RpdGxlPlxcbiAgICAgIDxkZWZzPjwvZGVmcz5cXG4gICAgICA8ZyBpZD1cXFwiUGFnZS0xXFxcIiBzdHJva2U9XFxcIm5vbmVcXFwiIHN0cm9rZS13aWR0aD1cXFwiMVxcXCIgZmlsbD1cXFwibm9uZVxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBza2V0Y2g6dHlwZT1cXFwiTVNQYWdlXFxcIj5cXG4gICAgICAgIDxnIGlkPVxcXCJDaGVjay0rLU92YWwtMlxcXCIgc2tldGNoOnR5cGU9XFxcIk1TTGF5ZXJHcm91cFxcXCIgc3Ryb2tlPVxcXCIjNzQ3NDc0XFxcIiBzdHJva2Utb3BhY2l0eT1cXFwiMC4xOTg3OTQxNThcXFwiIGZpbGw9XFxcIiNGRkZGRkZcXFwiIGZpbGwtb3BhY2l0eT1cXFwiMC44MTY1MTk0NzVcXFwiPlxcbiAgICAgICAgICA8cGF0aCBkPVxcXCJNMzIuNjU2ODU0MiwyOSBMMzguMzEwNjk3OCwyMy4zNDYxNTY0IEMzOS44NzcxMDIxLDIxLjc3OTc1MjEgMzkuODc1ODA1NywxOS4yNDgzODg3IDM4LjMxMzcwODUsMTcuNjg2MjkxNSBDMzYuNzU0Nzg5OSwxNi4xMjczNzI5IDM0LjIxNzYwMzUsMTYuMTI1NTQyMiAzMi42NTM4NDM2LDE3LjY4OTMwMjIgTDI3LDIzLjM0MzE0NTggTDIxLjM0NjE1NjQsMTcuNjg5MzAyMiBDMTkuNzgyMzk2NSwxNi4xMjU1NDIyIDE3LjI0NTIxMDEsMTYuMTI3MzcyOSAxNS42ODYyOTE1LDE3LjY4NjI5MTUgQzE0LjEyNDE5NDMsMTkuMjQ4Mzg4NyAxNC4xMjI4OTc5LDIxLjc3OTc1MjEgMTUuNjg5MzAyMiwyMy4zNDYxNTY0IEwyMS4zNDMxNDU4LDI5IEwxNS42ODkzMDIyLDM0LjY1Mzg0MzYgQzE0LjEyMjg5NzksMzYuMjIwMjQ3OSAxNC4xMjQxOTQzLDM4Ljc1MTYxMTMgMTUuNjg2MjkxNSw0MC4zMTM3MDg1IEMxNy4yNDUyMTAxLDQxLjg3MjYyNzEgMTkuNzgyMzk2NSw0MS44NzQ0NTc4IDIxLjM0NjE1NjQsNDAuMzEwNjk3OCBMMjcsMzQuNjU2ODU0MiBMMzIuNjUzODQzNiw0MC4zMTA2OTc4IEMzNC4yMTc2MDM1LDQxLjg3NDQ1NzggMzYuNzU0Nzg5OSw0MS44NzI2MjcxIDM4LjMxMzcwODUsNDAuMzEzNzA4NSBDMzkuODc1ODA1NywzOC43NTE2MTEzIDM5Ljg3NzEwMjEsMzYuMjIwMjQ3OSAzOC4zMTA2OTc4LDM0LjY1Mzg0MzYgTDMyLjY1Njg1NDIsMjkgWiBNMjcsNTMgQzQxLjM1OTQwMzUsNTMgNTMsNDEuMzU5NDAzNSA1MywyNyBDNTMsMTIuNjQwNTk2NSA0MS4zNTk0MDM1LDEgMjcsMSBDMTIuNjQwNTk2NSwxIDEsMTIuNjQwNTk2NSAxLDI3IEMxLDQxLjM1OTQwMzUgMTIuNjQwNTk2NSw1MyAyNyw1MyBaXFxcIiBpZD1cXFwiT3ZhbC0yXFxcIiBza2V0Y2g6dHlwZT1cXFwiTVNTaGFwZUdyb3VwXFxcIj48L3BhdGg+XFxuICAgICAgICA8L2c+XFxuICAgICAgPC9nPlxcbiAgICA8L3N2Zz5cXG4gIDwvZGl2PlxcbjwvZGl2PlwiLFxyXG5cclxuICAgICAgICAvLyBFTkQgT1BUSU9OU1xyXG4gICAgICAgIC8vIChSZXF1aXJlZCBieSB0aGUgZHJvcHpvbmUgZG9jdW1lbnRhdGlvbiBwYXJzZXIpXHJcblxyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICBUaG9zZSBmdW5jdGlvbnMgcmVnaXN0ZXIgdGhlbXNlbHZlcyB0byB0aGUgZXZlbnRzIG9uIGluaXQgYW5kIGhhbmRsZSBhbGxcclxuICAgICAgICAgdGhlIHVzZXIgaW50ZXJmYWNlIHNwZWNpZmljIHN0dWZmLiBPdmVyd3JpdGluZyB0aGVtIHdvbid0IGJyZWFrIHRoZSB1cGxvYWRcclxuICAgICAgICAgYnV0IGNhbiBicmVhayB0aGUgd2F5IGl0J3MgZGlzcGxheWVkLlxyXG4gICAgICAgICBZb3UgY2FuIG92ZXJ3cml0ZSB0aGVtIGlmIHlvdSBkb24ndCBsaWtlIHRoZSBkZWZhdWx0IGJlaGF2aW9yLiBJZiB5b3UganVzdFxyXG4gICAgICAgICB3YW50IHRvIGFkZCBhbiBhZGRpdGlvbmFsIGV2ZW50IGhhbmRsZXIsIHJlZ2lzdGVyIGl0IG9uIHRoZSBkcm9wem9uZSBvYmplY3RcclxuICAgICAgICAgYW5kIGRvbid0IG92ZXJ3cml0ZSB0aG9zZSBvcHRpb25zLlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICAvLyBUaG9zZSBhcmUgc2VsZiBleHBsYW5hdG9yeSBhbmQgc2ltcGx5IGNvbmNlcm4gdGhlIERyYWduRHJvcC5cclxuICAgICAgICBkcm9wOiBmdW5jdGlvbiBkcm9wKGUpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImR6LWRyYWctaG92ZXJcIik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkcmFnc3RhcnQ6IGZ1bmN0aW9uIGRyYWdzdGFydChlKSB7fSxcclxuICAgICAgICBkcmFnZW5kOiBmdW5jdGlvbiBkcmFnZW5kKGUpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImR6LWRyYWctaG92ZXJcIik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkcmFnZW50ZXI6IGZ1bmN0aW9uIGRyYWdlbnRlcihlKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkei1kcmFnLWhvdmVyXCIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHJhZ292ZXI6IGZ1bmN0aW9uIGRyYWdvdmVyKGUpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImR6LWRyYWctaG92ZXJcIik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkcmFnbGVhdmU6IGZ1bmN0aW9uIGRyYWdsZWF2ZShlKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJkei1kcmFnLWhvdmVyXCIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcGFzdGU6IGZ1bmN0aW9uIHBhc3RlKGUpIHt9LFxyXG5cclxuXHJcbiAgICAgICAgLy8gQ2FsbGVkIHdoZW5ldmVyIHRoZXJlIGFyZSBubyBmaWxlcyBsZWZ0IGluIHRoZSBkcm9wem9uZSBhbnltb3JlLCBhbmQgdGhlXHJcbiAgICAgICAgLy8gZHJvcHpvbmUgc2hvdWxkIGJlIGRpc3BsYXllZCBhcyBpZiBpbiB0aGUgaW5pdGlhbCBzdGF0ZS5cclxuICAgICAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJkei1zdGFydGVkXCIpO1xyXG4gICAgICAgIH0sXHJcblxyXG5cclxuICAgICAgICAvLyBDYWxsZWQgd2hlbiBhIGZpbGUgaXMgYWRkZWQgdG8gdGhlIHF1ZXVlXHJcbiAgICAgICAgLy8gUmVjZWl2ZXMgYGZpbGVgXHJcbiAgICAgICAgYWRkZWRmaWxlOiBmdW5jdGlvbiBhZGRlZGZpbGUoZmlsZSkge1xyXG4gICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgaWYgKHRoaXMuZWxlbWVudCA9PT0gdGhpcy5wcmV2aWV3c0NvbnRhaW5lcikge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImR6LXN0YXJ0ZWRcIik7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKHRoaXMucHJldmlld3NDb250YWluZXIpIHtcclxuICAgICAgICAgICAgZmlsZS5wcmV2aWV3RWxlbWVudCA9IERyb3B6b25lLmNyZWF0ZUVsZW1lbnQodGhpcy5vcHRpb25zLnByZXZpZXdUZW1wbGF0ZS50cmltKCkpO1xyXG4gICAgICAgICAgICBmaWxlLnByZXZpZXdUZW1wbGF0ZSA9IGZpbGUucHJldmlld0VsZW1lbnQ7IC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XHJcblxyXG4gICAgICAgICAgICB0aGlzLnByZXZpZXdzQ29udGFpbmVyLmFwcGVuZENoaWxkKGZpbGUucHJldmlld0VsZW1lbnQpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IzID0gZmlsZS5wcmV2aWV3RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtZHotbmFtZV1cIiksIF9pc0FycmF5MyA9IHRydWUsIF9pMyA9IDAsIF9pdGVyYXRvcjMgPSBfaXNBcnJheTMgPyBfaXRlcmF0b3IzIDogX2l0ZXJhdG9yM1tTeW1ib2wuaXRlcmF0b3JdKCk7Oykge1xyXG4gICAgICAgICAgICAgIHZhciBfcmVmMztcclxuXHJcbiAgICAgICAgICAgICAgaWYgKF9pc0FycmF5Mykge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9pMyA+PSBfaXRlcmF0b3IzLmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBfcmVmMyA9IF9pdGVyYXRvcjNbX2kzKytdO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfaTMgPSBfaXRlcmF0b3IzLm5leHQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChfaTMuZG9uZSkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBfcmVmMyA9IF9pMy52YWx1ZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHZhciBub2RlID0gX3JlZjM7XHJcblxyXG4gICAgICAgICAgICAgIG5vZGUudGV4dENvbnRlbnQgPSBmaWxlLm5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNCA9IGZpbGUucHJldmlld0VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWR6LXNpemVdXCIpLCBfaXNBcnJheTQgPSB0cnVlLCBfaTQgPSAwLCBfaXRlcmF0b3I0ID0gX2lzQXJyYXk0ID8gX2l0ZXJhdG9yNCA6IF9pdGVyYXRvcjRbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcclxuICAgICAgICAgICAgICBpZiAoX2lzQXJyYXk0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2k0ID49IF9pdGVyYXRvcjQubGVuZ3RoKSBicmVhaztcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBfaXRlcmF0b3I0W19pNCsrXTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2k0ID0gX2l0ZXJhdG9yNC5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2k0LmRvbmUpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IF9pNC52YWx1ZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gdGhpcy5maWxlc2l6ZShmaWxlLnNpemUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmFkZFJlbW92ZUxpbmtzKSB7XHJcbiAgICAgICAgICAgICAgZmlsZS5fcmVtb3ZlTGluayA9IERyb3B6b25lLmNyZWF0ZUVsZW1lbnQoXCI8YSBjbGFzcz1cXFwiZHotcmVtb3ZlXFxcIiBocmVmPVxcXCJqYXZhc2NyaXB0OnVuZGVmaW5lZDtcXFwiIGRhdGEtZHotcmVtb3ZlPlwiICsgdGhpcy5vcHRpb25zLmRpY3RSZW1vdmVGaWxlICsgXCI8L2E+XCIpO1xyXG4gICAgICAgICAgICAgIGZpbGUucHJldmlld0VsZW1lbnQuYXBwZW5kQ2hpbGQoZmlsZS5fcmVtb3ZlTGluayk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciByZW1vdmVGaWxlRXZlbnQgPSBmdW5jdGlvbiByZW1vdmVGaWxlRXZlbnQoZSkge1xyXG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgIGlmIChmaWxlLnN0YXR1cyA9PT0gRHJvcHpvbmUuVVBMT0FESU5HKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRHJvcHpvbmUuY29uZmlybShfdGhpczIub3B0aW9ucy5kaWN0Q2FuY2VsVXBsb2FkQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIucmVtb3ZlRmlsZShmaWxlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyLm9wdGlvbnMuZGljdFJlbW92ZUZpbGVDb25maXJtYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIERyb3B6b25lLmNvbmZpcm0oX3RoaXMyLm9wdGlvbnMuZGljdFJlbW92ZUZpbGVDb25maXJtYXRpb24sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnJlbW92ZUZpbGUoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5yZW1vdmVGaWxlKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjUgPSBmaWxlLnByZXZpZXdFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1kei1yZW1vdmVdXCIpLCBfaXNBcnJheTUgPSB0cnVlLCBfaTUgPSAwLCBfaXRlcmF0b3I1ID0gX2lzQXJyYXk1ID8gX2l0ZXJhdG9yNSA6IF9pdGVyYXRvcjVbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcclxuICAgICAgICAgICAgICB2YXIgX3JlZjQ7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChfaXNBcnJheTUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfaTUgPj0gX2l0ZXJhdG9yNS5sZW5ndGgpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgX3JlZjQgPSBfaXRlcmF0b3I1W19pNSsrXTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2k1ID0gX2l0ZXJhdG9yNS5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2k1LmRvbmUpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgX3JlZjQgPSBfaTUudmFsdWU7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICB2YXIgcmVtb3ZlTGluayA9IF9yZWY0O1xyXG5cclxuICAgICAgICAgICAgICByZW1vdmVMaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZW1vdmVGaWxlRXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgIC8vIENhbGxlZCB3aGVuZXZlciBhIGZpbGUgaXMgcmVtb3ZlZC5cclxuICAgICAgICByZW1vdmVkZmlsZTogZnVuY3Rpb24gcmVtb3ZlZGZpbGUoZmlsZSkge1xyXG4gICAgICAgICAgaWYgKGZpbGUucHJldmlld0VsZW1lbnQgIT0gbnVsbCAmJiBmaWxlLnByZXZpZXdFbGVtZW50LnBhcmVudE5vZGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBmaWxlLnByZXZpZXdFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZmlsZS5wcmV2aWV3RWxlbWVudCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5fdXBkYXRlTWF4RmlsZXNSZWFjaGVkQ2xhc3MoKTtcclxuICAgICAgICB9LFxyXG5cclxuXHJcbiAgICAgICAgLy8gQ2FsbGVkIHdoZW4gYSB0aHVtYm5haWwgaGFzIGJlZW4gZ2VuZXJhdGVkXHJcbiAgICAgICAgLy8gUmVjZWl2ZXMgYGZpbGVgIGFuZCBgZGF0YVVybGBcclxuICAgICAgICB0aHVtYm5haWw6IGZ1bmN0aW9uIHRodW1ibmFpbChmaWxlLCBkYXRhVXJsKSB7XHJcbiAgICAgICAgICBpZiAoZmlsZS5wcmV2aWV3RWxlbWVudCkge1xyXG4gICAgICAgICAgICBmaWxlLnByZXZpZXdFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJkei1maWxlLXByZXZpZXdcIik7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjYgPSBmaWxlLnByZXZpZXdFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1kei10aHVtYm5haWxdXCIpLCBfaXNBcnJheTYgPSB0cnVlLCBfaTYgPSAwLCBfaXRlcmF0b3I2ID0gX2lzQXJyYXk2ID8gX2l0ZXJhdG9yNiA6IF9pdGVyYXRvcjZbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcclxuICAgICAgICAgICAgICB2YXIgX3JlZjU7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChfaXNBcnJheTYpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfaTYgPj0gX2l0ZXJhdG9yNi5sZW5ndGgpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgX3JlZjUgPSBfaXRlcmF0b3I2W19pNisrXTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2k2ID0gX2l0ZXJhdG9yNi5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2k2LmRvbmUpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgX3JlZjUgPSBfaTYudmFsdWU7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsRWxlbWVudCA9IF9yZWY1O1xyXG5cclxuICAgICAgICAgICAgICB0aHVtYm5haWxFbGVtZW50LmFsdCA9IGZpbGUubmFtZTtcclxuICAgICAgICAgICAgICB0aHVtYm5haWxFbGVtZW50LnNyYyA9IGRhdGFVcmw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZmlsZS5wcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZHotaW1hZ2UtcHJldmlld1wiKTtcclxuICAgICAgICAgICAgfSwgMSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgIC8vIENhbGxlZCB3aGVuZXZlciBhbiBlcnJvciBvY2N1cnNcclxuICAgICAgICAvLyBSZWNlaXZlcyBgZmlsZWAgYW5kIGBtZXNzYWdlYFxyXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihmaWxlLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgICBpZiAoZmlsZS5wcmV2aWV3RWxlbWVudCkge1xyXG4gICAgICAgICAgICBmaWxlLnByZXZpZXdFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkei1lcnJvclwiKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIlN0cmluZ1wiICYmIG1lc3NhZ2UuZXJyb3IpIHtcclxuICAgICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZS5lcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3I3ID0gZmlsZS5wcmV2aWV3RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtZHotZXJyb3JtZXNzYWdlXVwiKSwgX2lzQXJyYXk3ID0gdHJ1ZSwgX2k3ID0gMCwgX2l0ZXJhdG9yNyA9IF9pc0FycmF5NyA/IF9pdGVyYXRvcjcgOiBfaXRlcmF0b3I3W1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICAgICAgICAgICAgdmFyIF9yZWY2O1xyXG5cclxuICAgICAgICAgICAgICBpZiAoX2lzQXJyYXk3KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2k3ID49IF9pdGVyYXRvcjcubGVuZ3RoKSBicmVhaztcclxuICAgICAgICAgICAgICAgIF9yZWY2ID0gX2l0ZXJhdG9yN1tfaTcrK107XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9pNyA9IF9pdGVyYXRvcjcubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF9pNy5kb25lKSBicmVhaztcclxuICAgICAgICAgICAgICAgIF9yZWY2ID0gX2k3LnZhbHVlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgdmFyIG5vZGUgPSBfcmVmNjtcclxuXHJcbiAgICAgICAgICAgICAgbm9kZS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9ybXVsdGlwbGU6IGZ1bmN0aW9uIGVycm9ybXVsdGlwbGUoKSB7fSxcclxuXHJcblxyXG4gICAgICAgIC8vIENhbGxlZCB3aGVuIGEgZmlsZSBnZXRzIHByb2Nlc3NlZC4gU2luY2UgdGhlcmUgaXMgYSBjdWUsIG5vdCBhbGwgYWRkZWRcclxuICAgICAgICAvLyBmaWxlcyBhcmUgcHJvY2Vzc2VkIGltbWVkaWF0ZWx5LlxyXG4gICAgICAgIC8vIFJlY2VpdmVzIGBmaWxlYFxyXG4gICAgICAgIHByb2Nlc3Npbmc6IGZ1bmN0aW9uIHByb2Nlc3NpbmcoZmlsZSkge1xyXG4gICAgICAgICAgaWYgKGZpbGUucHJldmlld0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgZmlsZS5wcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZHotcHJvY2Vzc2luZ1wiKTtcclxuICAgICAgICAgICAgaWYgKGZpbGUuX3JlbW92ZUxpbmspIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZmlsZS5fcmVtb3ZlTGluay50ZXh0Q29udGVudCA9IHRoaXMub3B0aW9ucy5kaWN0Q2FuY2VsVXBsb2FkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcm9jZXNzaW5nbXVsdGlwbGU6IGZ1bmN0aW9uIHByb2Nlc3NpbmdtdWx0aXBsZSgpIHt9LFxyXG5cclxuXHJcbiAgICAgICAgLy8gQ2FsbGVkIHdoZW5ldmVyIHRoZSB1cGxvYWQgcHJvZ3Jlc3MgZ2V0cyB1cGRhdGVkLlxyXG4gICAgICAgIC8vIFJlY2VpdmVzIGBmaWxlYCwgYHByb2dyZXNzYCAocGVyY2VudGFnZSAwLTEwMCkgYW5kIGBieXRlc1NlbnRgLlxyXG4gICAgICAgIC8vIFRvIGdldCB0aGUgdG90YWwgbnVtYmVyIG9mIGJ5dGVzIG9mIHRoZSBmaWxlLCB1c2UgYGZpbGUuc2l6ZWBcclxuICAgICAgICB1cGxvYWRwcm9ncmVzczogZnVuY3Rpb24gdXBsb2FkcHJvZ3Jlc3MoZmlsZSwgcHJvZ3Jlc3MsIGJ5dGVzU2VudCkge1xyXG4gICAgICAgICAgaWYgKGZpbGUucHJldmlld0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yOCA9IGZpbGUucHJldmlld0VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWR6LXVwbG9hZHByb2dyZXNzXVwiKSwgX2lzQXJyYXk4ID0gdHJ1ZSwgX2k4ID0gMCwgX2l0ZXJhdG9yOCA9IF9pc0FycmF5OCA/IF9pdGVyYXRvcjggOiBfaXRlcmF0b3I4W1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICAgICAgICAgICAgdmFyIF9yZWY3O1xyXG5cclxuICAgICAgICAgICAgICBpZiAoX2lzQXJyYXk4KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2k4ID49IF9pdGVyYXRvcjgubGVuZ3RoKSBicmVhaztcclxuICAgICAgICAgICAgICAgIF9yZWY3ID0gX2l0ZXJhdG9yOFtfaTgrK107XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9pOCA9IF9pdGVyYXRvcjgubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF9pOC5kb25lKSBicmVhaztcclxuICAgICAgICAgICAgICAgIF9yZWY3ID0gX2k4LnZhbHVlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgdmFyIG5vZGUgPSBfcmVmNztcclxuXHJcbiAgICAgICAgICAgICAgbm9kZS5ub2RlTmFtZSA9PT0gJ1BST0dSRVNTJyA/IG5vZGUudmFsdWUgPSBwcm9ncmVzcyA6IG5vZGUuc3R5bGUud2lkdGggPSBwcm9ncmVzcyArIFwiJVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgIC8vIENhbGxlZCB3aGVuZXZlciB0aGUgdG90YWwgdXBsb2FkIHByb2dyZXNzIGdldHMgdXBkYXRlZC5cclxuICAgICAgICAvLyBDYWxsZWQgd2l0aCB0b3RhbFVwbG9hZFByb2dyZXNzICgwLTEwMCksIHRvdGFsQnl0ZXMgYW5kIHRvdGFsQnl0ZXNTZW50XHJcbiAgICAgICAgdG90YWx1cGxvYWRwcm9ncmVzczogZnVuY3Rpb24gdG90YWx1cGxvYWRwcm9ncmVzcygpIHt9LFxyXG5cclxuXHJcbiAgICAgICAgLy8gQ2FsbGVkIGp1c3QgYmVmb3JlIHRoZSBmaWxlIGlzIHNlbnQuIEdldHMgdGhlIGB4aHJgIG9iamVjdCBhcyBzZWNvbmRcclxuICAgICAgICAvLyBwYXJhbWV0ZXIsIHNvIHlvdSBjYW4gbW9kaWZ5IGl0IChmb3IgZXhhbXBsZSB0byBhZGQgYSBDU1JGIHRva2VuKSBhbmQgYVxyXG4gICAgICAgIC8vIGBmb3JtRGF0YWAgb2JqZWN0IHRvIGFkZCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLlxyXG4gICAgICAgIHNlbmRpbmc6IGZ1bmN0aW9uIHNlbmRpbmcoKSB7fSxcclxuICAgICAgICBzZW5kaW5nbXVsdGlwbGU6IGZ1bmN0aW9uIHNlbmRpbmdtdWx0aXBsZSgpIHt9LFxyXG5cclxuXHJcbiAgICAgICAgLy8gV2hlbiB0aGUgY29tcGxldGUgdXBsb2FkIGlzIGZpbmlzaGVkIGFuZCBzdWNjZXNzZnVsXHJcbiAgICAgICAgLy8gUmVjZWl2ZXMgYGZpbGVgXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhmaWxlKSB7XHJcbiAgICAgICAgICBpZiAoZmlsZS5wcmV2aWV3RWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmlsZS5wcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZHotc3VjY2Vzc1wiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3NtdWx0aXBsZTogZnVuY3Rpb24gc3VjY2Vzc211bHRpcGxlKCkge30sXHJcblxyXG5cclxuICAgICAgICAvLyBXaGVuIHRoZSB1cGxvYWQgaXMgY2FuY2VsZWQuXHJcbiAgICAgICAgY2FuY2VsZWQ6IGZ1bmN0aW9uIGNhbmNlbGVkKGZpbGUpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmVtaXQoXCJlcnJvclwiLCBmaWxlLCB0aGlzLm9wdGlvbnMuZGljdFVwbG9hZENhbmNlbGVkKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNhbmNlbGVkbXVsdGlwbGU6IGZ1bmN0aW9uIGNhbmNlbGVkbXVsdGlwbGUoKSB7fSxcclxuXHJcblxyXG4gICAgICAgIC8vIFdoZW4gdGhlIHVwbG9hZCBpcyBmaW5pc2hlZCwgZWl0aGVyIHdpdGggc3VjY2VzcyBvciBhbiBlcnJvci5cclxuICAgICAgICAvLyBSZWNlaXZlcyBgZmlsZWBcclxuICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gY29tcGxldGUoZmlsZSkge1xyXG4gICAgICAgICAgaWYgKGZpbGUuX3JlbW92ZUxpbmspIHtcclxuICAgICAgICAgICAgZmlsZS5fcmVtb3ZlTGluay50ZXh0Q29udGVudCA9IHRoaXMub3B0aW9ucy5kaWN0UmVtb3ZlRmlsZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChmaWxlLnByZXZpZXdFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmaWxlLnByZXZpZXdFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkei1jb21wbGV0ZVwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBsZXRlbXVsdGlwbGU6IGZ1bmN0aW9uIGNvbXBsZXRlbXVsdGlwbGUoKSB7fSxcclxuICAgICAgICBtYXhmaWxlc2V4Y2VlZGVkOiBmdW5jdGlvbiBtYXhmaWxlc2V4Y2VlZGVkKCkge30sXHJcbiAgICAgICAgbWF4ZmlsZXNyZWFjaGVkOiBmdW5jdGlvbiBtYXhmaWxlc3JlYWNoZWQoKSB7fSxcclxuICAgICAgICBxdWV1ZWNvbXBsZXRlOiBmdW5jdGlvbiBxdWV1ZWNvbXBsZXRlKCkge30sXHJcbiAgICAgICAgYWRkZWRmaWxlczogZnVuY3Rpb24gYWRkZWRmaWxlcygpIHt9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLnByb3RvdHlwZS5fdGh1bWJuYWlsUXVldWUgPSBbXTtcclxuICAgICAgdGhpcy5wcm90b3R5cGUuX3Byb2Nlc3NpbmdUaHVtYm5haWwgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBnbG9iYWwgdXRpbGl0eVxyXG5cclxuICB9LCB7XHJcbiAgICBrZXk6IFwiZXh0ZW5kXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gZXh0ZW5kKHRhcmdldCkge1xyXG4gICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIG9iamVjdHMgPSBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XHJcbiAgICAgICAgb2JqZWN0c1tfa2V5MiAtIDFdID0gYXJndW1lbnRzW19rZXkyXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yOSA9IG9iamVjdHMsIF9pc0FycmF5OSA9IHRydWUsIF9pOSA9IDAsIF9pdGVyYXRvcjkgPSBfaXNBcnJheTkgPyBfaXRlcmF0b3I5IDogX2l0ZXJhdG9yOVtTeW1ib2wuaXRlcmF0b3JdKCk7Oykge1xyXG4gICAgICAgIHZhciBfcmVmODtcclxuXHJcbiAgICAgICAgaWYgKF9pc0FycmF5OSkge1xyXG4gICAgICAgICAgaWYgKF9pOSA+PSBfaXRlcmF0b3I5Lmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICBfcmVmOCA9IF9pdGVyYXRvcjlbX2k5KytdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBfaTkgPSBfaXRlcmF0b3I5Lm5leHQoKTtcclxuICAgICAgICAgIGlmIChfaTkuZG9uZSkgYnJlYWs7XHJcbiAgICAgICAgICBfcmVmOCA9IF9pOS52YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBvYmplY3QgPSBfcmVmODtcclxuXHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xyXG4gICAgICAgICAgdmFyIHZhbCA9IG9iamVjdFtrZXldO1xyXG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICB9XHJcbiAgfV0pO1xyXG5cclxuICBmdW5jdGlvbiBEcm9wem9uZShlbCwgb3B0aW9ucykge1xyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyb3B6b25lKTtcclxuXHJcbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRHJvcHpvbmUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihEcm9wem9uZSkpLmNhbGwodGhpcykpO1xyXG5cclxuICAgIHZhciBmYWxsYmFjayA9IHZvaWQgMCxcclxuICAgICAgICBsZWZ0ID0gdm9pZCAwO1xyXG4gICAgX3RoaXMuZWxlbWVudCA9IGVsO1xyXG4gICAgLy8gRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHNpbmNlIHRoZSB2ZXJzaW9uIHdhcyBpbiB0aGUgcHJvdG90eXBlIHByZXZpb3VzbHlcclxuICAgIF90aGlzLnZlcnNpb24gPSBEcm9wem9uZS52ZXJzaW9uO1xyXG5cclxuICAgIF90aGlzLmRlZmF1bHRPcHRpb25zLnByZXZpZXdUZW1wbGF0ZSA9IF90aGlzLmRlZmF1bHRPcHRpb25zLnByZXZpZXdUZW1wbGF0ZS5yZXBsYWNlKC9cXG4qL2csIFwiXCIpO1xyXG5cclxuICAgIF90aGlzLmNsaWNrYWJsZUVsZW1lbnRzID0gW107XHJcbiAgICBfdGhpcy5saXN0ZW5lcnMgPSBbXTtcclxuICAgIF90aGlzLmZpbGVzID0gW107IC8vIEFsbCBmaWxlc1xyXG5cclxuICAgIGlmICh0eXBlb2YgX3RoaXMuZWxlbWVudCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICBfdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihfdGhpcy5lbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBOb3QgY2hlY2tpbmcgaWYgaW5zdGFuY2Ugb2YgSFRNTEVsZW1lbnQgb3IgRWxlbWVudCBzaW5jZSBJRTkgaXMgZXh0cmVtZWx5IHdlaXJkLlxyXG4gICAgaWYgKCFfdGhpcy5lbGVtZW50IHx8IF90aGlzLmVsZW1lbnQubm9kZVR5cGUgPT0gbnVsbCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGRyb3B6b25lIGVsZW1lbnQuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChfdGhpcy5lbGVtZW50LmRyb3B6b25lKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkRyb3B6b25lIGFscmVhZHkgYXR0YWNoZWQuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE5vdyBhZGQgdGhpcyBkcm9wem9uZSB0byB0aGUgaW5zdGFuY2VzLlxyXG4gICAgRHJvcHpvbmUuaW5zdGFuY2VzLnB1c2goX3RoaXMpO1xyXG5cclxuICAgIC8vIFB1dCB0aGUgZHJvcHpvbmUgaW5zaWRlIHRoZSBlbGVtZW50IGl0c2VsZi5cclxuICAgIF90aGlzLmVsZW1lbnQuZHJvcHpvbmUgPSBfdGhpcztcclxuXHJcbiAgICB2YXIgZWxlbWVudE9wdGlvbnMgPSAobGVmdCA9IERyb3B6b25lLm9wdGlvbnNGb3JFbGVtZW50KF90aGlzLmVsZW1lbnQpKSAhPSBudWxsID8gbGVmdCA6IHt9O1xyXG5cclxuICAgIF90aGlzLm9wdGlvbnMgPSBEcm9wem9uZS5leHRlbmQoe30sIF90aGlzLmRlZmF1bHRPcHRpb25zLCBlbGVtZW50T3B0aW9ucywgb3B0aW9ucyAhPSBudWxsID8gb3B0aW9ucyA6IHt9KTtcclxuXHJcbiAgICAvLyBJZiB0aGUgYnJvd3NlciBmYWlsZWQsIGp1c3QgY2FsbCB0aGUgZmFsbGJhY2sgYW5kIGxlYXZlXHJcbiAgICBpZiAoX3RoaXMub3B0aW9ucy5mb3JjZUZhbGxiYWNrIHx8ICFEcm9wem9uZS5pc0Jyb3dzZXJTdXBwb3J0ZWQoKSkge1xyXG4gICAgICB2YXIgX3JldDtcclxuXHJcbiAgICAgIHJldHVybiBfcmV0ID0gX3RoaXMub3B0aW9ucy5mYWxsYmFjay5jYWxsKF90aGlzKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEBvcHRpb25zLnVybCA9IEBlbGVtZW50LmdldEF0dHJpYnV0ZSBcImFjdGlvblwiIHVubGVzcyBAb3B0aW9ucy51cmw/XHJcbiAgICBpZiAoX3RoaXMub3B0aW9ucy51cmwgPT0gbnVsbCkge1xyXG4gICAgICBfdGhpcy5vcHRpb25zLnVybCA9IF90aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiYWN0aW9uXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghX3RoaXMub3B0aW9ucy51cmwpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gVVJMIHByb3ZpZGVkLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoX3RoaXMub3B0aW9ucy5hY2NlcHRlZEZpbGVzICYmIF90aGlzLm9wdGlvbnMuYWNjZXB0ZWRNaW1lVHlwZXMpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IGNhbid0IHByb3ZpZGUgYm90aCAnYWNjZXB0ZWRGaWxlcycgYW5kICdhY2NlcHRlZE1pbWVUeXBlcycuICdhY2NlcHRlZE1pbWVUeXBlcycgaXMgZGVwcmVjYXRlZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKF90aGlzLm9wdGlvbnMudXBsb2FkTXVsdGlwbGUgJiYgX3RoaXMub3B0aW9ucy5jaHVua2luZykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBjYW5ub3Qgc2V0IGJvdGg6IHVwbG9hZE11bHRpcGxlIGFuZCBjaHVua2luZy4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBCYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxyXG4gICAgaWYgKF90aGlzLm9wdGlvbnMuYWNjZXB0ZWRNaW1lVHlwZXMpIHtcclxuICAgICAgX3RoaXMub3B0aW9ucy5hY2NlcHRlZEZpbGVzID0gX3RoaXMub3B0aW9ucy5hY2NlcHRlZE1pbWVUeXBlcztcclxuICAgICAgZGVsZXRlIF90aGlzLm9wdGlvbnMuYWNjZXB0ZWRNaW1lVHlwZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQmFja3dhcmRzIGNvbXBhdGliaWxpdHlcclxuICAgIGlmIChfdGhpcy5vcHRpb25zLnJlbmFtZUZpbGVuYW1lICE9IG51bGwpIHtcclxuICAgICAgX3RoaXMub3B0aW9ucy5yZW5hbWVGaWxlID0gZnVuY3Rpb24gKGZpbGUpIHtcclxuICAgICAgICByZXR1cm4gX3RoaXMub3B0aW9ucy5yZW5hbWVGaWxlbmFtZS5jYWxsKF90aGlzLCBmaWxlLm5hbWUsIGZpbGUpO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIF90aGlzLm9wdGlvbnMubWV0aG9kID0gX3RoaXMub3B0aW9ucy5tZXRob2QudG9VcHBlckNhc2UoKTtcclxuXHJcbiAgICBpZiAoKGZhbGxiYWNrID0gX3RoaXMuZ2V0RXhpc3RpbmdGYWxsYmFjaygpKSAmJiBmYWxsYmFjay5wYXJlbnROb2RlKSB7XHJcbiAgICAgIC8vIFJlbW92ZSB0aGUgZmFsbGJhY2tcclxuICAgICAgZmFsbGJhY2sucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChmYWxsYmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGlzcGxheSBwcmV2aWV3cyBpbiB0aGUgcHJldmlld3NDb250YWluZXIgZWxlbWVudCBvciB0aGUgRHJvcHpvbmUgZWxlbWVudCB1bmxlc3MgZXhwbGljaXRseSBzZXQgdG8gZmFsc2VcclxuICAgIGlmIChfdGhpcy5vcHRpb25zLnByZXZpZXdzQ29udGFpbmVyICE9PSBmYWxzZSkge1xyXG4gICAgICBpZiAoX3RoaXMub3B0aW9ucy5wcmV2aWV3c0NvbnRhaW5lcikge1xyXG4gICAgICAgIF90aGlzLnByZXZpZXdzQ29udGFpbmVyID0gRHJvcHpvbmUuZ2V0RWxlbWVudChfdGhpcy5vcHRpb25zLnByZXZpZXdzQ29udGFpbmVyLCBcInByZXZpZXdzQ29udGFpbmVyXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIF90aGlzLnByZXZpZXdzQ29udGFpbmVyID0gX3RoaXMuZWxlbWVudDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChfdGhpcy5vcHRpb25zLmNsaWNrYWJsZSkge1xyXG4gICAgICBpZiAoX3RoaXMub3B0aW9ucy5jbGlja2FibGUgPT09IHRydWUpIHtcclxuICAgICAgICBfdGhpcy5jbGlja2FibGVFbGVtZW50cyA9IFtfdGhpcy5lbGVtZW50XTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBfdGhpcy5jbGlja2FibGVFbGVtZW50cyA9IERyb3B6b25lLmdldEVsZW1lbnRzKF90aGlzLm9wdGlvbnMuY2xpY2thYmxlLCBcImNsaWNrYWJsZVwiKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF90aGlzLmluaXQoKTtcclxuICAgIHJldHVybiBfdGhpcztcclxuICB9XHJcblxyXG4gIC8vIFJldHVybnMgYWxsIGZpbGVzIHRoYXQgaGF2ZSBiZWVuIGFjY2VwdGVkXHJcblxyXG5cclxuICBfY3JlYXRlQ2xhc3MoRHJvcHpvbmUsIFt7XHJcbiAgICBrZXk6IFwiZ2V0QWNjZXB0ZWRGaWxlc1wiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFjY2VwdGVkRmlsZXMoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZpbGVzLmZpbHRlcihmdW5jdGlvbiAoZmlsZSkge1xyXG4gICAgICAgIHJldHVybiBmaWxlLmFjY2VwdGVkO1xyXG4gICAgICB9KS5tYXAoZnVuY3Rpb24gKGZpbGUpIHtcclxuICAgICAgICByZXR1cm4gZmlsZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJucyBhbGwgZmlsZXMgdGhhdCBoYXZlIGJlZW4gcmVqZWN0ZWRcclxuICAgIC8vIE5vdCBzdXJlIHdoZW4gdGhhdCdzIGdvaW5nIHRvIGJlIHVzZWZ1bCwgYnV0IGFkZGVkIGZvciBjb21wbGV0ZW5lc3MuXHJcblxyXG4gIH0sIHtcclxuICAgIGtleTogXCJnZXRSZWplY3RlZEZpbGVzXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmVqZWN0ZWRGaWxlcygpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZmlsZXMuZmlsdGVyKGZ1bmN0aW9uIChmaWxlKSB7XHJcbiAgICAgICAgcmV0dXJuICFmaWxlLmFjY2VwdGVkO1xyXG4gICAgICB9KS5tYXAoZnVuY3Rpb24gKGZpbGUpIHtcclxuICAgICAgICByZXR1cm4gZmlsZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSwge1xyXG4gICAga2V5OiBcImdldEZpbGVzV2l0aFN0YXR1c1wiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZpbGVzV2l0aFN0YXR1cyhzdGF0dXMpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZmlsZXMuZmlsdGVyKGZ1bmN0aW9uIChmaWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpbGUuc3RhdHVzID09PSBzdGF0dXM7XHJcbiAgICAgIH0pLm1hcChmdW5jdGlvbiAoZmlsZSkge1xyXG4gICAgICAgIHJldHVybiBmaWxlO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm5zIGFsbCBmaWxlcyB0aGF0IGFyZSBpbiB0aGUgcXVldWVcclxuXHJcbiAgfSwge1xyXG4gICAga2V5OiBcImdldFF1ZXVlZEZpbGVzXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UXVldWVkRmlsZXMoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmdldEZpbGVzV2l0aFN0YXR1cyhEcm9wem9uZS5RVUVVRUQpO1xyXG4gICAgfVxyXG4gIH0sIHtcclxuICAgIGtleTogXCJnZXRVcGxvYWRpbmdGaWxlc1wiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFVwbG9hZGluZ0ZpbGVzKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRGaWxlc1dpdGhTdGF0dXMoRHJvcHpvbmUuVVBMT0FESU5HKTtcclxuICAgIH1cclxuICB9LCB7XHJcbiAgICBrZXk6IFwiZ2V0QWRkZWRGaWxlc1wiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFkZGVkRmlsZXMoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmdldEZpbGVzV2l0aFN0YXR1cyhEcm9wem9uZS5BRERFRCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmlsZXMgdGhhdCBhcmUgZWl0aGVyIHF1ZXVlZCBvciB1cGxvYWRpbmdcclxuXHJcbiAgfSwge1xyXG4gICAga2V5OiBcImdldEFjdGl2ZUZpbGVzXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWN0aXZlRmlsZXMoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZpbGVzLmZpbHRlcihmdW5jdGlvbiAoZmlsZSkge1xyXG4gICAgICAgIHJldHVybiBmaWxlLnN0YXR1cyA9PT0gRHJvcHpvbmUuVVBMT0FESU5HIHx8IGZpbGUuc3RhdHVzID09PSBEcm9wem9uZS5RVUVVRUQ7XHJcbiAgICAgIH0pLm1hcChmdW5jdGlvbiAoZmlsZSkge1xyXG4gICAgICAgIHJldHVybiBmaWxlO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUaGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCB3aGVuIERyb3B6b25lIGlzIGluaXRpYWxpemVkLiBZb3VcclxuICAgIC8vIGNhbiAoYW5kIHNob3VsZCkgc2V0dXAgZXZlbnQgbGlzdGVuZXJzIGluc2lkZSB0aGlzIGZ1bmN0aW9uLlxyXG5cclxuICB9LCB7XHJcbiAgICBrZXk6IFwiaW5pdFwiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xyXG5cclxuICAgICAgLy8gSW4gY2FzZSBpdCBpc24ndCBzZXQgYWxyZWFkeVxyXG4gICAgICBpZiAodGhpcy5lbGVtZW50LnRhZ05hbWUgPT09IFwiZm9ybVwiKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImVuY3R5cGVcIiwgXCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImRyb3B6b25lXCIpICYmICF0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5kei1tZXNzYWdlXCIpKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKERyb3B6b25lLmNyZWF0ZUVsZW1lbnQoXCI8ZGl2IGNsYXNzPVxcXCJkei1kZWZhdWx0IGR6LW1lc3NhZ2VcXFwiPjxzcGFuPlwiICsgdGhpcy5vcHRpb25zLmRpY3REZWZhdWx0TWVzc2FnZSArIFwiPC9zcGFuPjwvZGl2PlwiKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmNsaWNrYWJsZUVsZW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgIHZhciBzZXR1cEhpZGRlbkZpbGVJbnB1dCA9IGZ1bmN0aW9uIHNldHVwSGlkZGVuRmlsZUlucHV0KCkge1xyXG4gICAgICAgICAgaWYgKF90aGlzMy5oaWRkZW5GaWxlSW5wdXQpIHtcclxuICAgICAgICAgICAgX3RoaXMzLmhpZGRlbkZpbGVJbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKF90aGlzMy5oaWRkZW5GaWxlSW5wdXQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgX3RoaXMzLmhpZGRlbkZpbGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICAgIF90aGlzMy5oaWRkZW5GaWxlSW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImZpbGVcIik7XHJcbiAgICAgICAgICBpZiAoX3RoaXMzLm9wdGlvbnMubWF4RmlsZXMgPT09IG51bGwgfHwgX3RoaXMzLm9wdGlvbnMubWF4RmlsZXMgPiAxKSB7XHJcbiAgICAgICAgICAgIF90aGlzMy5oaWRkZW5GaWxlSW5wdXQuc2V0QXR0cmlidXRlKFwibXVsdGlwbGVcIiwgXCJtdWx0aXBsZVwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIF90aGlzMy5oaWRkZW5GaWxlSW5wdXQuY2xhc3NOYW1lID0gXCJkei1oaWRkZW4taW5wdXRcIjtcclxuXHJcbiAgICAgICAgICBpZiAoX3RoaXMzLm9wdGlvbnMuYWNjZXB0ZWRGaWxlcyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBfdGhpczMuaGlkZGVuRmlsZUlucHV0LnNldEF0dHJpYnV0ZShcImFjY2VwdFwiLCBfdGhpczMub3B0aW9ucy5hY2NlcHRlZEZpbGVzKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChfdGhpczMub3B0aW9ucy5jYXB0dXJlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIF90aGlzMy5oaWRkZW5GaWxlSW5wdXQuc2V0QXR0cmlidXRlKFwiY2FwdHVyZVwiLCBfdGhpczMub3B0aW9ucy5jYXB0dXJlKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBOb3Qgc2V0dGluZyBgZGlzcGxheT1cIm5vbmVcImAgYmVjYXVzZSBzb21lIGJyb3dzZXJzIGRvbid0IGFjY2VwdCBjbGlja3NcclxuICAgICAgICAgIC8vIG9uIGVsZW1lbnRzIHRoYXQgYXJlbid0IGRpc3BsYXllZC5cclxuICAgICAgICAgIF90aGlzMy5oaWRkZW5GaWxlSW5wdXQuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICBfdGhpczMuaGlkZGVuRmlsZUlucHV0LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgICAgX3RoaXMzLmhpZGRlbkZpbGVJbnB1dC5zdHlsZS50b3AgPSBcIjBcIjtcclxuICAgICAgICAgIF90aGlzMy5oaWRkZW5GaWxlSW5wdXQuc3R5bGUubGVmdCA9IFwiMFwiO1xyXG4gICAgICAgICAgX3RoaXMzLmhpZGRlbkZpbGVJbnB1dC5zdHlsZS5oZWlnaHQgPSBcIjBcIjtcclxuICAgICAgICAgIF90aGlzMy5oaWRkZW5GaWxlSW5wdXQuc3R5bGUud2lkdGggPSBcIjBcIjtcclxuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoX3RoaXMzLm9wdGlvbnMuaGlkZGVuSW5wdXRDb250YWluZXIpLmFwcGVuZENoaWxkKF90aGlzMy5oaWRkZW5GaWxlSW5wdXQpO1xyXG4gICAgICAgICAgcmV0dXJuIF90aGlzMy5oaWRkZW5GaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWxlcyA9IF90aGlzMy5oaWRkZW5GaWxlSW5wdXQuZmlsZXM7XHJcblxyXG4gICAgICAgICAgICBpZiAoZmlsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMTAgPSBmaWxlcywgX2lzQXJyYXkxMCA9IHRydWUsIF9pMTAgPSAwLCBfaXRlcmF0b3IxMCA9IF9pc0FycmF5MTAgPyBfaXRlcmF0b3IxMCA6IF9pdGVyYXRvcjEwW1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX3JlZjk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKF9pc0FycmF5MTApIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKF9pMTAgPj0gX2l0ZXJhdG9yMTAubGVuZ3RoKSBicmVhaztcclxuICAgICAgICAgICAgICAgICAgX3JlZjkgPSBfaXRlcmF0b3IxMFtfaTEwKytdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgX2kxMCA9IF9pdGVyYXRvcjEwLm5leHQoKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKF9pMTAuZG9uZSkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgIF9yZWY5ID0gX2kxMC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZmlsZSA9IF9yZWY5O1xyXG5cclxuICAgICAgICAgICAgICAgIF90aGlzMy5hZGRGaWxlKGZpbGUpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpczMuZW1pdChcImFkZGVkZmlsZXNcIiwgZmlsZXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2V0dXBIaWRkZW5GaWxlSW5wdXQoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2V0dXBIaWRkZW5GaWxlSW5wdXQoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5VUkwgPSB3aW5kb3cuVVJMICE9PSBudWxsID8gd2luZG93LlVSTCA6IHdpbmRvdy53ZWJraXRVUkw7XHJcblxyXG4gICAgICAvLyBTZXR1cCBhbGwgZXZlbnQgbGlzdGVuZXJzIG9uIHRoZSBEcm9wem9uZSBvYmplY3QgaXRzZWxmLlxyXG4gICAgICAvLyBUaGV5J3JlIG5vdCBpbiBAc2V0dXBFdmVudExpc3RlbmVycygpIGJlY2F1c2UgdGhleSBzaG91bGRuJ3QgYmUgcmVtb3ZlZFxyXG4gICAgICAvLyBhZ2FpbiB3aGVuIHRoZSBkcm9wem9uZSBnZXRzIGRpc2FibGVkLlxyXG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3IxMSA9IHRoaXMuZXZlbnRzLCBfaXNBcnJheTExID0gdHJ1ZSwgX2kxMSA9IDAsIF9pdGVyYXRvcjExID0gX2lzQXJyYXkxMSA/IF9pdGVyYXRvcjExIDogX2l0ZXJhdG9yMTFbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcclxuICAgICAgICB2YXIgX3JlZjEwO1xyXG5cclxuICAgICAgICBpZiAoX2lzQXJyYXkxMSkge1xyXG4gICAgICAgICAgaWYgKF9pMTEgPj0gX2l0ZXJhdG9yMTEubGVuZ3RoKSBicmVhaztcclxuICAgICAgICAgIF9yZWYxMCA9IF9pdGVyYXRvcjExW19pMTErK107XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIF9pMTEgPSBfaXRlcmF0b3IxMS5uZXh0KCk7XHJcbiAgICAgICAgICBpZiAoX2kxMS5kb25lKSBicmVhaztcclxuICAgICAgICAgIF9yZWYxMCA9IF9pMTEudmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZXZlbnROYW1lID0gX3JlZjEwO1xyXG5cclxuICAgICAgICB0aGlzLm9uKGV2ZW50TmFtZSwgdGhpcy5vcHRpb25zW2V2ZW50TmFtZV0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLm9uKFwidXBsb2FkcHJvZ3Jlc3NcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfdGhpczMudXBkYXRlVG90YWxVcGxvYWRQcm9ncmVzcygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMub24oXCJyZW1vdmVkZmlsZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzMy51cGRhdGVUb3RhbFVwbG9hZFByb2dyZXNzKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5vbihcImNhbmNlbGVkXCIsIGZ1bmN0aW9uIChmaWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzMy5lbWl0KFwiY29tcGxldGVcIiwgZmlsZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gRW1pdCBhIGBxdWV1ZWNvbXBsZXRlYCBldmVudCBpZiBhbGwgZmlsZXMgZmluaXNoZWQgdXBsb2FkaW5nLlxyXG4gICAgICB0aGlzLm9uKFwiY29tcGxldGVcIiwgZnVuY3Rpb24gKGZpbGUpIHtcclxuICAgICAgICBpZiAoX3RoaXMzLmdldEFkZGVkRmlsZXMoKS5sZW5ndGggPT09IDAgJiYgX3RoaXMzLmdldFVwbG9hZGluZ0ZpbGVzKCkubGVuZ3RoID09PSAwICYmIF90aGlzMy5nZXRRdWV1ZWRGaWxlcygpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgLy8gVGhpcyBuZWVkcyB0byBiZSBkZWZlcnJlZCBzbyB0aGF0IGBxdWV1ZWNvbXBsZXRlYCByZWFsbHkgdHJpZ2dlcnMgYWZ0ZXIgYGNvbXBsZXRlYFxyXG4gICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMzLmVtaXQoXCJxdWV1ZWNvbXBsZXRlXCIpO1xyXG4gICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHZhciBub1Byb3BhZ2F0aW9uID0gZnVuY3Rpb24gbm9Qcm9wYWdhdGlvbihlKSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkge1xyXG4gICAgICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBDcmVhdGUgdGhlIGxpc3RlbmVyc1xyXG4gICAgICB0aGlzLmxpc3RlbmVycyA9IFt7XHJcbiAgICAgICAgZWxlbWVudDogdGhpcy5lbGVtZW50LFxyXG4gICAgICAgIGV2ZW50czoge1xyXG4gICAgICAgICAgXCJkcmFnc3RhcnRcIjogZnVuY3Rpb24gZHJhZ3N0YXJ0KGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5lbWl0KFwiZHJhZ3N0YXJ0XCIsIGUpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIFwiZHJhZ2VudGVyXCI6IGZ1bmN0aW9uIGRyYWdlbnRlcihlKSB7XHJcbiAgICAgICAgICAgIG5vUHJvcGFnYXRpb24oZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpczMuZW1pdChcImRyYWdlbnRlclwiLCBlKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBcImRyYWdvdmVyXCI6IGZ1bmN0aW9uIGRyYWdvdmVyKGUpIHtcclxuICAgICAgICAgICAgLy8gTWFrZXMgaXQgcG9zc2libGUgdG8gZHJhZyBmaWxlcyBmcm9tIGNocm9tZSdzIGRvd25sb2FkIGJhclxyXG4gICAgICAgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE5NTI2NDMwL2RyYWctYW5kLWRyb3AtZmlsZS11cGxvYWRzLWZyb20tY2hyb21lLWRvd25sb2Fkcy1iYXJcclxuICAgICAgICAgICAgLy8gVHJ5IGlzIHJlcXVpcmVkIHRvIHByZXZlbnQgYnVnIGluIEludGVybmV0IEV4cGxvcmVyIDExIChTQ1JJUFQ2NTUzNSBleGNlcHRpb24pXHJcbiAgICAgICAgICAgIHZhciBlZmN0ID0gdm9pZCAwO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGVmY3QgPSBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge31cclxuICAgICAgICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdtb3ZlJyA9PT0gZWZjdCB8fCAnbGlua01vdmUnID09PSBlZmN0ID8gJ21vdmUnIDogJ2NvcHknO1xyXG5cclxuICAgICAgICAgICAgbm9Qcm9wYWdhdGlvbihlKTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5lbWl0KFwiZHJhZ292ZXJcIiwgZSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgXCJkcmFnbGVhdmVcIjogZnVuY3Rpb24gZHJhZ2xlYXZlKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5lbWl0KFwiZHJhZ2xlYXZlXCIsIGUpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIFwiZHJvcFwiOiBmdW5jdGlvbiBkcm9wKGUpIHtcclxuICAgICAgICAgICAgbm9Qcm9wYWdhdGlvbihlKTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5kcm9wKGUpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIFwiZHJhZ2VuZFwiOiBmdW5jdGlvbiBkcmFnZW5kKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5lbWl0KFwiZHJhZ2VuZFwiLCBlKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBUaGlzIGlzIGRpc2FibGVkIHJpZ2h0IG5vdywgYmVjYXVzZSB0aGUgYnJvd3NlcnMgZG9uJ3QgaW1wbGVtZW50IGl0IHByb3Blcmx5LlxyXG4gICAgICAgICAgLy8gXCJwYXN0ZVwiOiAoZSkgPT5cclxuICAgICAgICAgIC8vICAgbm9Qcm9wYWdhdGlvbiBlXHJcbiAgICAgICAgICAvLyAgIEBwYXN0ZSBlXHJcbiAgICAgICAgfSB9XTtcclxuXHJcbiAgICAgIHRoaXMuY2xpY2thYmxlRWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoY2xpY2thYmxlRWxlbWVudCkge1xyXG4gICAgICAgIHJldHVybiBfdGhpczMubGlzdGVuZXJzLnB1c2goe1xyXG4gICAgICAgICAgZWxlbWVudDogY2xpY2thYmxlRWxlbWVudCxcclxuICAgICAgICAgIGV2ZW50czoge1xyXG4gICAgICAgICAgICBcImNsaWNrXCI6IGZ1bmN0aW9uIGNsaWNrKGV2dCkge1xyXG4gICAgICAgICAgICAgIC8vIE9ubHkgdGhlIGFjdHVhbCBkcm9wem9uZSBvciB0aGUgbWVzc2FnZSBlbGVtZW50IHNob3VsZCB0cmlnZ2VyIGZpbGUgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgaWYgKGNsaWNrYWJsZUVsZW1lbnQgIT09IF90aGlzMy5lbGVtZW50IHx8IGV2dC50YXJnZXQgPT09IF90aGlzMy5lbGVtZW50IHx8IERyb3B6b25lLmVsZW1lbnRJbnNpZGUoZXZ0LnRhcmdldCwgX3RoaXMzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5kei1tZXNzYWdlXCIpKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMzLmhpZGRlbkZpbGVJbnB1dC5jbGljaygpOyAvLyBGb3J3YXJkIHRoZSBjbGlja1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuZW5hYmxlKCk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmluaXQuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBOb3QgZnVsbHkgdGVzdGVkIHlldFxyXG5cclxuICB9LCB7XHJcbiAgICBrZXk6IFwiZGVzdHJveVwiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZSgpO1xyXG4gICAgICB0aGlzLnJlbW92ZUFsbEZpbGVzKHRydWUpO1xyXG4gICAgICBpZiAodGhpcy5oaWRkZW5GaWxlSW5wdXQgIT0gbnVsbCA/IHRoaXMuaGlkZGVuRmlsZUlucHV0LnBhcmVudE5vZGUgOiB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLmhpZGRlbkZpbGVJbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuaGlkZGVuRmlsZUlucHV0KTtcclxuICAgICAgICB0aGlzLmhpZGRlbkZpbGVJbnB1dCA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgZGVsZXRlIHRoaXMuZWxlbWVudC5kcm9wem9uZTtcclxuICAgICAgcmV0dXJuIERyb3B6b25lLmluc3RhbmNlcy5zcGxpY2UoRHJvcHpvbmUuaW5zdGFuY2VzLmluZGV4T2YodGhpcyksIDEpO1xyXG4gICAgfVxyXG4gIH0sIHtcclxuICAgIGtleTogXCJ1cGRhdGVUb3RhbFVwbG9hZFByb2dyZXNzXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlVG90YWxVcGxvYWRQcm9ncmVzcygpIHtcclxuICAgICAgdmFyIHRvdGFsVXBsb2FkUHJvZ3Jlc3MgPSB2b2lkIDA7XHJcbiAgICAgIHZhciB0b3RhbEJ5dGVzU2VudCA9IDA7XHJcbiAgICAgIHZhciB0b3RhbEJ5dGVzID0gMDtcclxuXHJcbiAgICAgIHZhciBhY3RpdmVGaWxlcyA9IHRoaXMuZ2V0QWN0aXZlRmlsZXMoKTtcclxuXHJcbiAgICAgIGlmIChhY3RpdmVGaWxlcy5sZW5ndGgpIHtcclxuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IxMiA9IHRoaXMuZ2V0QWN0aXZlRmlsZXMoKSwgX2lzQXJyYXkxMiA9IHRydWUsIF9pMTIgPSAwLCBfaXRlcmF0b3IxMiA9IF9pc0FycmF5MTIgPyBfaXRlcmF0b3IxMiA6IF9pdGVyYXRvcjEyW1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICAgICAgICB2YXIgX3JlZjExO1xyXG5cclxuICAgICAgICAgIGlmIChfaXNBcnJheTEyKSB7XHJcbiAgICAgICAgICAgIGlmIChfaTEyID49IF9pdGVyYXRvcjEyLmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICAgIF9yZWYxMSA9IF9pdGVyYXRvcjEyW19pMTIrK107XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfaTEyID0gX2l0ZXJhdG9yMTIubmV4dCgpO1xyXG4gICAgICAgICAgICBpZiAoX2kxMi5kb25lKSBicmVhaztcclxuICAgICAgICAgICAgX3JlZjExID0gX2kxMi52YWx1ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB2YXIgZmlsZSA9IF9yZWYxMTtcclxuXHJcbiAgICAgICAgICB0b3RhbEJ5dGVzU2VudCArPSBmaWxlLnVwbG9hZC5ieXRlc1NlbnQ7XHJcbiAgICAgICAgICB0b3RhbEJ5dGVzICs9IGZpbGUudXBsb2FkLnRvdGFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0b3RhbFVwbG9hZFByb2dyZXNzID0gMTAwICogdG90YWxCeXRlc1NlbnQgLyB0b3RhbEJ5dGVzO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRvdGFsVXBsb2FkUHJvZ3Jlc3MgPSAxMDA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzLmVtaXQoXCJ0b3RhbHVwbG9hZHByb2dyZXNzXCIsIHRvdGFsVXBsb2FkUHJvZ3Jlc3MsIHRvdGFsQnl0ZXMsIHRvdGFsQnl0ZXNTZW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBAb3B0aW9ucy5wYXJhbU5hbWUgY2FuIGJlIGEgZnVuY3Rpb24gdGFraW5nIG9uZSBwYXJhbWV0ZXIgcmF0aGVyIHRoYW4gYSBzdHJpbmcuXHJcbiAgICAvLyBBIHBhcmFtZXRlciBuYW1lIGZvciBhIGZpbGUgaXMgb2J0YWluZWQgc2ltcGx5IGJ5IGNhbGxpbmcgdGhpcyB3aXRoIGFuIGluZGV4IG51bWJlci5cclxuXHJcbiAgfSwge1xyXG4gICAga2V5OiBcIl9nZXRQYXJhbU5hbWVcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0UGFyYW1OYW1lKG4pIHtcclxuICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMucGFyYW1OYW1lID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnBhcmFtTmFtZShuKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gXCJcIiArIHRoaXMub3B0aW9ucy5wYXJhbU5hbWUgKyAodGhpcy5vcHRpb25zLnVwbG9hZE11bHRpcGxlID8gXCJbXCIgKyBuICsgXCJdXCIgOiBcIlwiKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIEBvcHRpb25zLnJlbmFtZUZpbGUgaXMgYSBmdW5jdGlvbixcclxuICAgIC8vIHRoZSBmdW5jdGlvbiB3aWxsIGJlIHVzZWQgdG8gcmVuYW1lIHRoZSBmaWxlLm5hbWUgYmVmb3JlIGFwcGVuZGluZyBpdCB0byB0aGUgZm9ybURhdGFcclxuXHJcbiAgfSwge1xyXG4gICAga2V5OiBcIl9yZW5hbWVGaWxlXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbmFtZUZpbGUoZmlsZSkge1xyXG4gICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5yZW5hbWVGaWxlICE9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICByZXR1cm4gZmlsZS5uYW1lO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMucmVuYW1lRmlsZShmaWxlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm5zIGEgZm9ybSB0aGF0IGNhbiBiZSB1c2VkIGFzIGZhbGxiYWNrIGlmIHRoZSBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgRHJhZ25Ecm9wXHJcbiAgICAvL1xyXG4gICAgLy8gSWYgdGhlIGRyb3B6b25lIGlzIGFscmVhZHkgYSBmb3JtLCBvbmx5IHRoZSBpbnB1dCBmaWVsZCBhbmQgYnV0dG9uIGFyZSByZXR1cm5lZC4gT3RoZXJ3aXNlIGEgY29tcGxldGUgZm9ybSBlbGVtZW50IGlzIHByb3ZpZGVkLlxyXG4gICAgLy8gVGhpcyBjb2RlIGhhcyB0byBwYXNzIGluIElFNyA6KFxyXG5cclxuICB9LCB7XHJcbiAgICBrZXk6IFwiZ2V0RmFsbGJhY2tGb3JtXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RmFsbGJhY2tGb3JtKCkge1xyXG4gICAgICB2YXIgZXhpc3RpbmdGYWxsYmFjayA9IHZvaWQgMCxcclxuICAgICAgICAgIGZvcm0gPSB2b2lkIDA7XHJcbiAgICAgIGlmIChleGlzdGluZ0ZhbGxiYWNrID0gdGhpcy5nZXRFeGlzdGluZ0ZhbGxiYWNrKCkpIHtcclxuICAgICAgICByZXR1cm4gZXhpc3RpbmdGYWxsYmFjaztcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIGZpZWxkc1N0cmluZyA9IFwiPGRpdiBjbGFzcz1cXFwiZHotZmFsbGJhY2tcXFwiPlwiO1xyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmRpY3RGYWxsYmFja1RleHQpIHtcclxuICAgICAgICBmaWVsZHNTdHJpbmcgKz0gXCI8cD5cIiArIHRoaXMub3B0aW9ucy5kaWN0RmFsbGJhY2tUZXh0ICsgXCI8L3A+XCI7XHJcbiAgICAgIH1cclxuICAgICAgZmllbGRzU3RyaW5nICs9IFwiPGlucHV0IHR5cGU9XFxcImZpbGVcXFwiIG5hbWU9XFxcIlwiICsgdGhpcy5fZ2V0UGFyYW1OYW1lKDApICsgXCJcXFwiIFwiICsgKHRoaXMub3B0aW9ucy51cGxvYWRNdWx0aXBsZSA/ICdtdWx0aXBsZT1cIm11bHRpcGxlXCInIDogdW5kZWZpbmVkKSArIFwiIC8+PGlucHV0IHR5cGU9XFxcInN1Ym1pdFxcXCIgdmFsdWU9XFxcIlVwbG9hZCFcXFwiPjwvZGl2PlwiO1xyXG5cclxuICAgICAgdmFyIGZpZWxkcyA9IERyb3B6b25lLmNyZWF0ZUVsZW1lbnQoZmllbGRzU3RyaW5nKTtcclxuICAgICAgaWYgKHRoaXMuZWxlbWVudC50YWdOYW1lICE9PSBcIkZPUk1cIikge1xyXG4gICAgICAgIGZvcm0gPSBEcm9wem9uZS5jcmVhdGVFbGVtZW50KFwiPGZvcm0gYWN0aW9uPVxcXCJcIiArIHRoaXMub3B0aW9ucy51cmwgKyBcIlxcXCIgZW5jdHlwZT1cXFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVxcXCIgbWV0aG9kPVxcXCJcIiArIHRoaXMub3B0aW9ucy5tZXRob2QgKyBcIlxcXCI+PC9mb3JtPlwiKTtcclxuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGZpZWxkcyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIGVuY3R5cGUgYW5kIG1ldGhvZCBhdHRyaWJ1dGVzIGFyZSBzZXQgcHJvcGVybHlcclxuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZW5jdHlwZVwiLCBcIm11bHRpcGFydC9mb3JtLWRhdGFcIik7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcIm1ldGhvZFwiLCB0aGlzLm9wdGlvbnMubWV0aG9kKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZm9ybSAhPSBudWxsID8gZm9ybSA6IGZpZWxkcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm5zIHRoZSBmYWxsYmFjayBlbGVtZW50cyBpZiB0aGV5IGV4aXN0IGFscmVhZHlcclxuICAgIC8vXHJcbiAgICAvLyBUaGlzIGNvZGUgaGFzIHRvIHBhc3MgaW4gSUU3IDooXHJcblxyXG4gIH0sIHtcclxuICAgIGtleTogXCJnZXRFeGlzdGluZ0ZhbGxiYWNrXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RXhpc3RpbmdGYWxsYmFjaygpIHtcclxuICAgICAgdmFyIGdldEZhbGxiYWNrID0gZnVuY3Rpb24gZ2V0RmFsbGJhY2soZWxlbWVudHMpIHtcclxuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IxMyA9IGVsZW1lbnRzLCBfaXNBcnJheTEzID0gdHJ1ZSwgX2kxMyA9IDAsIF9pdGVyYXRvcjEzID0gX2lzQXJyYXkxMyA/IF9pdGVyYXRvcjEzIDogX2l0ZXJhdG9yMTNbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcclxuICAgICAgICAgIHZhciBfcmVmMTI7XHJcblxyXG4gICAgICAgICAgaWYgKF9pc0FycmF5MTMpIHtcclxuICAgICAgICAgICAgaWYgKF9pMTMgPj0gX2l0ZXJhdG9yMTMubGVuZ3RoKSBicmVhaztcclxuICAgICAgICAgICAgX3JlZjEyID0gX2l0ZXJhdG9yMTNbX2kxMysrXTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIF9pMTMgPSBfaXRlcmF0b3IxMy5uZXh0KCk7XHJcbiAgICAgICAgICAgIGlmIChfaTEzLmRvbmUpIGJyZWFrO1xyXG4gICAgICAgICAgICBfcmVmMTIgPSBfaTEzLnZhbHVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciBlbCA9IF9yZWYxMjtcclxuXHJcbiAgICAgICAgICBpZiAoLyhefCApZmFsbGJhY2soJHwgKS8udGVzdChlbC5jbGFzc05hbWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgX2FyciA9IFtcImRpdlwiLCBcImZvcm1cIl07XHJcbiAgICAgIGZvciAodmFyIF9pMTQgPSAwOyBfaTE0IDwgX2Fyci5sZW5ndGg7IF9pMTQrKykge1xyXG4gICAgICAgIHZhciB0YWdOYW1lID0gX2FycltfaTE0XTtcclxuICAgICAgICB2YXIgZmFsbGJhY2s7XHJcbiAgICAgICAgaWYgKGZhbGxiYWNrID0gZ2V0RmFsbGJhY2sodGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ05hbWUpKSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFjdGl2YXRlcyBhbGwgbGlzdGVuZXJzIHN0b3JlZCBpbiBAbGlzdGVuZXJzXHJcblxyXG4gIH0sIHtcclxuICAgIGtleTogXCJzZXR1cEV2ZW50TGlzdGVuZXJzXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0dXBFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXJzLm1hcChmdW5jdGlvbiAoZWxlbWVudExpc3RlbmVycykge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICBmb3IgKHZhciBldmVudCBpbiBlbGVtZW50TGlzdGVuZXJzLmV2ZW50cykge1xyXG4gICAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBlbGVtZW50TGlzdGVuZXJzLmV2ZW50c1tldmVudF07XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGVsZW1lbnRMaXN0ZW5lcnMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBEZWFjdGl2YXRlcyBhbGwgbGlzdGVuZXJzIHN0b3JlZCBpbiBAbGlzdGVuZXJzXHJcblxyXG4gIH0sIHtcclxuICAgIGtleTogXCJyZW1vdmVFdmVudExpc3RlbmVyc1wiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5saXN0ZW5lcnMubWFwKGZ1bmN0aW9uIChlbGVtZW50TGlzdGVuZXJzKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICAgIGZvciAodmFyIGV2ZW50IGluIGVsZW1lbnRMaXN0ZW5lcnMuZXZlbnRzKSB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0ZW5lciA9IGVsZW1lbnRMaXN0ZW5lcnMuZXZlbnRzW2V2ZW50XTtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goZWxlbWVudExpc3RlbmVycy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyLCBmYWxzZSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlbW92ZXMgYWxsIGV2ZW50IGxpc3RlbmVycyBhbmQgY2FuY2VscyBhbGwgZmlsZXMgaW4gdGhlIHF1ZXVlIG9yIGJlaW5nIHByb2Nlc3NlZC5cclxuXHJcbiAgfSwge1xyXG4gICAga2V5OiBcImRpc2FibGVcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xyXG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcclxuXHJcbiAgICAgIHRoaXMuY2xpY2thYmxlRWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJkei1jbGlja2FibGVcIik7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXMuZmlsZXMubWFwKGZ1bmN0aW9uIChmaWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzNC5jYW5jZWxVcGxvYWQoZmlsZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0sIHtcclxuICAgIGtleTogXCJlbmFibGVcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmFibGUoKSB7XHJcbiAgICAgIGRlbGV0ZSB0aGlzLmRpc2FibGVkO1xyXG4gICAgICB0aGlzLmNsaWNrYWJsZUVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZHotY2xpY2thYmxlXCIpO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHRoaXMuc2V0dXBFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgYSBuaWNlbHkgZm9ybWF0dGVkIGZpbGVzaXplXHJcblxyXG4gIH0sIHtcclxuICAgIGtleTogXCJmaWxlc2l6ZVwiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZpbGVzaXplKHNpemUpIHtcclxuICAgICAgdmFyIHNlbGVjdGVkU2l6ZSA9IDA7XHJcbiAgICAgIHZhciBzZWxlY3RlZFVuaXQgPSBcImJcIjtcclxuXHJcbiAgICAgIGlmIChzaXplID4gMCkge1xyXG4gICAgICAgIHZhciB1bml0cyA9IFsndGInLCAnZ2InLCAnbWInLCAna2InLCAnYiddO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVuaXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgdW5pdCA9IHVuaXRzW2ldO1xyXG4gICAgICAgICAgdmFyIGN1dG9mZiA9IE1hdGgucG93KHRoaXMub3B0aW9ucy5maWxlc2l6ZUJhc2UsIDQgLSBpKSAvIDEwO1xyXG5cclxuICAgICAgICAgIGlmIChzaXplID49IGN1dG9mZikge1xyXG4gICAgICAgICAgICBzZWxlY3RlZFNpemUgPSBzaXplIC8gTWF0aC5wb3codGhpcy5vcHRpb25zLmZpbGVzaXplQmFzZSwgNCAtIGkpO1xyXG4gICAgICAgICAgICBzZWxlY3RlZFVuaXQgPSB1bml0O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGVjdGVkU2l6ZSA9IE1hdGgucm91bmQoMTAgKiBzZWxlY3RlZFNpemUpIC8gMTA7IC8vIEN1dHRpbmcgb2YgZGlnaXRzXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBcIjxzdHJvbmc+XCIgKyBzZWxlY3RlZFNpemUgKyBcIjwvc3Ryb25nPiBcIiArIHRoaXMub3B0aW9ucy5kaWN0RmlsZVNpemVVbml0c1tzZWxlY3RlZFVuaXRdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZHMgb3IgcmVtb3ZlcyB0aGUgYGR6LW1heC1maWxlcy1yZWFjaGVkYCBjbGFzcyBmcm9tIHRoZSBmb3JtLlxyXG5cclxuICB9LCB7XHJcbiAgICBrZXk6IFwiX3VwZGF0ZU1heEZpbGVzUmVhY2hlZENsYXNzXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZU1heEZpbGVzUmVhY2hlZENsYXNzKCkge1xyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLm1heEZpbGVzICE9IG51bGwgJiYgdGhpcy5nZXRBY2NlcHRlZEZpbGVzKCkubGVuZ3RoID49IHRoaXMub3B0aW9ucy5tYXhGaWxlcykge1xyXG4gICAgICAgIGlmICh0aGlzLmdldEFjY2VwdGVkRmlsZXMoKS5sZW5ndGggPT09IHRoaXMub3B0aW9ucy5tYXhGaWxlcykge1xyXG4gICAgICAgICAgdGhpcy5lbWl0KCdtYXhmaWxlc3JlYWNoZWQnLCB0aGlzLmZpbGVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZHotbWF4LWZpbGVzLXJlYWNoZWRcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZHotbWF4LWZpbGVzLXJlYWNoZWRcIik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCB7XHJcbiAgICBrZXk6IFwiZHJvcFwiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRyb3AoZSkge1xyXG4gICAgICBpZiAoIWUuZGF0YVRyYW5zZmVyKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZW1pdChcImRyb3BcIiwgZSk7XHJcblxyXG4gICAgICAvLyBDb252ZXJ0IHRoZSBGaWxlTGlzdCB0byBhbiBBcnJheVxyXG4gICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSBmb3IgSUUxMVxyXG4gICAgICB2YXIgZmlsZXMgPSBbXTtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlLmRhdGFUcmFuc2Zlci5maWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGZpbGVzW2ldID0gZS5kYXRhVHJhbnNmZXIuZmlsZXNbaV07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuZW1pdChcImFkZGVkZmlsZXNcIiwgZmlsZXMpO1xyXG5cclxuICAgICAgLy8gRXZlbiBpZiBpdCdzIGEgZm9sZGVyLCBmaWxlcy5sZW5ndGggd2lsbCBjb250YWluIHRoZSBmb2xkZXJzLlxyXG4gICAgICBpZiAoZmlsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgdmFyIGl0ZW1zID0gZS5kYXRhVHJhbnNmZXIuaXRlbXM7XHJcblxyXG4gICAgICAgIGlmIChpdGVtcyAmJiBpdGVtcy5sZW5ndGggJiYgaXRlbXNbMF0ud2Via2l0R2V0QXNFbnRyeSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAvLyBUaGUgYnJvd3NlciBzdXBwb3J0cyBkcm9wcGluZyBvZiBmb2xkZXJzLCBzbyBoYW5kbGUgaXRlbXMgaW5zdGVhZCBvZiBmaWxlc1xyXG4gICAgICAgICAgdGhpcy5fYWRkRmlsZXNGcm9tSXRlbXMoaXRlbXMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVzKGZpbGVzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCB7XHJcbiAgICBrZXk6IFwicGFzdGVcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXN0ZShlKSB7XHJcbiAgICAgIGlmIChfX2d1YXJkX18oZSAhPSBudWxsID8gZS5jbGlwYm9hcmREYXRhIDogdW5kZWZpbmVkLCBmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgIHJldHVybiB4Lml0ZW1zO1xyXG4gICAgICB9KSA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmVtaXQoXCJwYXN0ZVwiLCBlKTtcclxuICAgICAgdmFyIGl0ZW1zID0gZS5jbGlwYm9hcmREYXRhLml0ZW1zO1xyXG5cclxuXHJcbiAgICAgIGlmIChpdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkRmlsZXNGcm9tSXRlbXMoaXRlbXMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwge1xyXG4gICAga2V5OiBcImhhbmRsZUZpbGVzXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRmlsZXMoZmlsZXMpIHtcclxuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMTQgPSBmaWxlcywgX2lzQXJyYXkxNCA9IHRydWUsIF9pMTUgPSAwLCBfaXRlcmF0b3IxNCA9IF9pc0FycmF5MTQgPyBfaXRlcmF0b3IxNCA6IF9pdGVyYXRvcjE0W1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICAgICAgdmFyIF9yZWYxMztcclxuXHJcbiAgICAgICAgaWYgKF9pc0FycmF5MTQpIHtcclxuICAgICAgICAgIGlmIChfaTE1ID49IF9pdGVyYXRvcjE0Lmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICBfcmVmMTMgPSBfaXRlcmF0b3IxNFtfaTE1KytdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBfaTE1ID0gX2l0ZXJhdG9yMTQubmV4dCgpO1xyXG4gICAgICAgICAgaWYgKF9pMTUuZG9uZSkgYnJlYWs7XHJcbiAgICAgICAgICBfcmVmMTMgPSBfaTE1LnZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZpbGUgPSBfcmVmMTM7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkRmlsZShmaWxlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFdoZW4gYSBmb2xkZXIgaXMgZHJvcHBlZCAob3IgZmlsZXMgYXJlIHBhc3RlZCksIGl0ZW1zIG11c3QgYmUgaGFuZGxlZFxyXG4gICAgLy8gaW5zdGVhZCBvZiBmaWxlcy5cclxuXHJcbiAgfSwge1xyXG4gICAga2V5OiBcIl9hZGRGaWxlc0Zyb21JdGVtc1wiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9hZGRGaWxlc0Zyb21JdGVtcyhpdGVtcykge1xyXG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcclxuXHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjE1ID0gaXRlbXMsIF9pc0FycmF5MTUgPSB0cnVlLCBfaTE2ID0gMCwgX2l0ZXJhdG9yMTUgPSBfaXNBcnJheTE1ID8gX2l0ZXJhdG9yMTUgOiBfaXRlcmF0b3IxNVtTeW1ib2wuaXRlcmF0b3JdKCk7Oykge1xyXG4gICAgICAgICAgdmFyIF9yZWYxNDtcclxuXHJcbiAgICAgICAgICBpZiAoX2lzQXJyYXkxNSkge1xyXG4gICAgICAgICAgICBpZiAoX2kxNiA+PSBfaXRlcmF0b3IxNS5sZW5ndGgpIGJyZWFrO1xyXG4gICAgICAgICAgICBfcmVmMTQgPSBfaXRlcmF0b3IxNVtfaTE2KytdO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgX2kxNiA9IF9pdGVyYXRvcjE1Lm5leHQoKTtcclxuICAgICAgICAgICAgaWYgKF9pMTYuZG9uZSkgYnJlYWs7XHJcbiAgICAgICAgICAgIF9yZWYxNCA9IF9pMTYudmFsdWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdmFyIGl0ZW0gPSBfcmVmMTQ7XHJcblxyXG4gICAgICAgICAgdmFyIGVudHJ5O1xyXG4gICAgICAgICAgaWYgKGl0ZW0ud2Via2l0R2V0QXNFbnRyeSAhPSBudWxsICYmIChlbnRyeSA9IGl0ZW0ud2Via2l0R2V0QXNFbnRyeSgpKSkge1xyXG4gICAgICAgICAgICBpZiAoZW50cnkuaXNGaWxlKSB7XHJcbiAgICAgICAgICAgICAgcmVzdWx0LnB1c2goX3RoaXM1LmFkZEZpbGUoaXRlbS5nZXRBc0ZpbGUoKSkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVudHJ5LmlzRGlyZWN0b3J5KSB7XHJcbiAgICAgICAgICAgICAgLy8gQXBwZW5kIGFsbCBmaWxlcyBmcm9tIHRoYXQgZGlyZWN0b3J5IHRvIGZpbGVzXHJcbiAgICAgICAgICAgICAgcmVzdWx0LnB1c2goX3RoaXM1Ll9hZGRGaWxlc0Zyb21EaXJlY3RvcnkoZW50cnksIGVudHJ5Lm5hbWUpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXN1bHQucHVzaCh1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uZ2V0QXNGaWxlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0ua2luZCA9PSBudWxsIHx8IGl0ZW0ua2luZCA9PT0gXCJmaWxlXCIpIHtcclxuICAgICAgICAgICAgICByZXN1bHQucHVzaChfdGhpczUuYWRkRmlsZShpdGVtLmdldEFzRmlsZSgpKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcmVzdWx0LnB1c2godW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2godW5kZWZpbmVkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdvZXMgdGhyb3VnaCB0aGUgZGlyZWN0b3J5LCBhbmQgYWRkcyBlYWNoIGZpbGUgaXQgZmluZHMgcmVjdXJzaXZlbHlcclxuXHJcbiAgfSwge1xyXG4gICAga2V5OiBcIl9hZGRGaWxlc0Zyb21EaXJlY3RvcnlcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBfYWRkRmlsZXNGcm9tRGlyZWN0b3J5KGRpcmVjdG9yeSwgcGF0aCkge1xyXG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcclxuXHJcbiAgICAgIHZhciBkaXJSZWFkZXIgPSBkaXJlY3RvcnkuY3JlYXRlUmVhZGVyKCk7XHJcblxyXG4gICAgICB2YXIgZXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gZXJyb3JIYW5kbGVyKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fZ3VhcmRNZXRob2RfXyhjb25zb2xlLCAnbG9nJywgZnVuY3Rpb24gKG8pIHtcclxuICAgICAgICAgIHJldHVybiBvLmxvZyhlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgcmVhZEVudHJpZXMgPSBmdW5jdGlvbiByZWFkRW50cmllcygpIHtcclxuICAgICAgICByZXR1cm4gZGlyUmVhZGVyLnJlYWRFbnRyaWVzKGZ1bmN0aW9uIChlbnRyaWVzKSB7XHJcbiAgICAgICAgICBpZiAoZW50cmllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjE2ID0gZW50cmllcywgX2lzQXJyYXkxNiA9IHRydWUsIF9pMTcgPSAwLCBfaXRlcmF0b3IxNiA9IF9pc0FycmF5MTYgPyBfaXRlcmF0b3IxNiA6IF9pdGVyYXRvcjE2W1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICAgICAgICAgICAgdmFyIF9yZWYxNTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKF9pc0FycmF5MTYpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfaTE3ID49IF9pdGVyYXRvcjE2Lmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBfcmVmMTUgPSBfaXRlcmF0b3IxNltfaTE3KytdO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfaTE3ID0gX2l0ZXJhdG9yMTYubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF9pMTcuZG9uZSkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBfcmVmMTUgPSBfaTE3LnZhbHVlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgdmFyIGVudHJ5ID0gX3JlZjE1O1xyXG5cclxuICAgICAgICAgICAgICBpZiAoZW50cnkuaXNGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBlbnRyeS5maWxlKGZ1bmN0aW9uIChmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChfdGhpczYub3B0aW9ucy5pZ25vcmVIaWRkZW5GaWxlcyAmJiBmaWxlLm5hbWUuc3Vic3RyaW5nKDAsIDEpID09PSAnLicpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgZmlsZS5mdWxsUGF0aCA9IHBhdGggKyBcIi9cIiArIGZpbGUubmFtZTtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNi5hZGRGaWxlKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbnRyeS5pc0RpcmVjdG9yeSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXM2Ll9hZGRGaWxlc0Zyb21EaXJlY3RvcnkoZW50cnksIHBhdGggKyBcIi9cIiArIGVudHJ5Lm5hbWUpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgY2FsbCByZWFkRW50cmllcygpIGFnYWluLCBzaW5jZSBicm93c2VyIG9ubHkgaGFuZGxlXHJcbiAgICAgICAgICAgIC8vIHRoZSBmaXJzdCAxMDAgZW50cmllcy5cclxuICAgICAgICAgICAgLy8gU2VlOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRGlyZWN0b3J5UmVhZGVyI3JlYWRFbnRyaWVzXHJcbiAgICAgICAgICAgIHJlYWRFbnRyaWVzKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9LCBlcnJvckhhbmRsZXIpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmV0dXJuIHJlYWRFbnRyaWVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgYGRvbmUoKWAgaXMgY2FsbGVkIHdpdGhvdXQgYXJndW1lbnQgdGhlIGZpbGUgaXMgYWNjZXB0ZWRcclxuICAgIC8vIElmIHlvdSBjYWxsIGl0IHdpdGggYW4gZXJyb3IgbWVzc2FnZSwgdGhlIGZpbGUgaXMgcmVqZWN0ZWRcclxuICAgIC8vIChUaGlzIGFsbG93cyBmb3IgYXN5bmNocm9ub3VzIHZhbGlkYXRpb24pXHJcbiAgICAvL1xyXG4gICAgLy8gVGhpcyBmdW5jdGlvbiBjaGVja3MgdGhlIGZpbGVzaXplLCBhbmQgaWYgdGhlIGZpbGUudHlwZSBwYXNzZXMgdGhlXHJcbiAgICAvLyBgYWNjZXB0ZWRGaWxlc2AgY2hlY2suXHJcblxyXG4gIH0sIHtcclxuICAgIGtleTogXCJhY2NlcHRcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBhY2NlcHQoZmlsZSwgZG9uZSkge1xyXG4gICAgICBpZiAoZmlsZS5zaXplID4gdGhpcy5vcHRpb25zLm1heEZpbGVzaXplICogMTAyNCAqIDEwMjQpIHtcclxuICAgICAgICByZXR1cm4gZG9uZSh0aGlzLm9wdGlvbnMuZGljdEZpbGVUb29CaWcucmVwbGFjZShcInt7ZmlsZXNpemV9fVwiLCBNYXRoLnJvdW5kKGZpbGUuc2l6ZSAvIDEwMjQgLyAxMC4yNCkgLyAxMDApLnJlcGxhY2UoXCJ7e21heEZpbGVzaXplfX1cIiwgdGhpcy5vcHRpb25zLm1heEZpbGVzaXplKSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoIURyb3B6b25lLmlzVmFsaWRGaWxlKGZpbGUsIHRoaXMub3B0aW9ucy5hY2NlcHRlZEZpbGVzKSkge1xyXG4gICAgICAgIHJldHVybiBkb25lKHRoaXMub3B0aW9ucy5kaWN0SW52YWxpZEZpbGVUeXBlKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMubWF4RmlsZXMgIT0gbnVsbCAmJiB0aGlzLmdldEFjY2VwdGVkRmlsZXMoKS5sZW5ndGggPj0gdGhpcy5vcHRpb25zLm1heEZpbGVzKSB7XHJcbiAgICAgICAgZG9uZSh0aGlzLm9wdGlvbnMuZGljdE1heEZpbGVzRXhjZWVkZWQucmVwbGFjZShcInt7bWF4RmlsZXN9fVwiLCB0aGlzLm9wdGlvbnMubWF4RmlsZXMpKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbWl0KFwibWF4ZmlsZXNleGNlZWRlZFwiLCBmaWxlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmFjY2VwdC5jYWxsKHRoaXMsIGZpbGUsIGRvbmUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwge1xyXG4gICAga2V5OiBcImFkZEZpbGVcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRGaWxlKGZpbGUpIHtcclxuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XHJcblxyXG4gICAgICBmaWxlLnVwbG9hZCA9IHtcclxuICAgICAgICB1dWlkOiBEcm9wem9uZS51dWlkdjQoKSxcclxuICAgICAgICBwcm9ncmVzczogMCxcclxuICAgICAgICAvLyBTZXR0aW5nIHRoZSB0b3RhbCB1cGxvYWQgc2l6ZSB0byBmaWxlLnNpemUgZm9yIHRoZSBiZWdpbm5pbmdcclxuICAgICAgICAvLyBJdCdzIGFjdHVhbCBkaWZmZXJlbnQgdGhhbiB0aGUgc2l6ZSB0byBiZSB0cmFuc21pdHRlZC5cclxuICAgICAgICB0b3RhbDogZmlsZS5zaXplLFxyXG4gICAgICAgIGJ5dGVzU2VudDogMCxcclxuICAgICAgICBmaWxlbmFtZTogdGhpcy5fcmVuYW1lRmlsZShmaWxlKSxcclxuICAgICAgICBjaHVua2VkOiB0aGlzLm9wdGlvbnMuY2h1bmtpbmcgJiYgKHRoaXMub3B0aW9ucy5mb3JjZUNodW5raW5nIHx8IGZpbGUuc2l6ZSA+IHRoaXMub3B0aW9ucy5jaHVua1NpemUpLFxyXG4gICAgICAgIHRvdGFsQ2h1bmtDb3VudDogTWF0aC5jZWlsKGZpbGUuc2l6ZSAvIHRoaXMub3B0aW9ucy5jaHVua1NpemUpXHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMuZmlsZXMucHVzaChmaWxlKTtcclxuXHJcbiAgICAgIGZpbGUuc3RhdHVzID0gRHJvcHpvbmUuQURERUQ7XHJcblxyXG4gICAgICB0aGlzLmVtaXQoXCJhZGRlZGZpbGVcIiwgZmlsZSk7XHJcblxyXG4gICAgICB0aGlzLl9lbnF1ZXVlVGh1bWJuYWlsKGZpbGUpO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXMuYWNjZXB0KGZpbGUsIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgZmlsZS5hY2NlcHRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgX3RoaXM3Ll9lcnJvclByb2Nlc3NpbmcoW2ZpbGVdLCBlcnJvcik7IC8vIFdpbGwgc2V0IHRoZSBmaWxlLnN0YXR1c1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBmaWxlLmFjY2VwdGVkID0gdHJ1ZTtcclxuICAgICAgICAgIGlmIChfdGhpczcub3B0aW9ucy5hdXRvUXVldWUpIHtcclxuICAgICAgICAgICAgX3RoaXM3LmVucXVldWVGaWxlKGZpbGUpO1xyXG4gICAgICAgICAgfSAvLyBXaWxsIHNldCAuYWNjZXB0ZWQgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfdGhpczcuX3VwZGF0ZU1heEZpbGVzUmVhY2hlZENsYXNzKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFdyYXBwZXIgZm9yIGVucXVldWVGaWxlXHJcblxyXG4gIH0sIHtcclxuICAgIGtleTogXCJlbnF1ZXVlRmlsZXNcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbnF1ZXVlRmlsZXMoZmlsZXMpIHtcclxuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMTcgPSBmaWxlcywgX2lzQXJyYXkxNyA9IHRydWUsIF9pMTggPSAwLCBfaXRlcmF0b3IxNyA9IF9pc0FycmF5MTcgPyBfaXRlcmF0b3IxNyA6IF9pdGVyYXRvcjE3W1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICAgICAgdmFyIF9yZWYxNjtcclxuXHJcbiAgICAgICAgaWYgKF9pc0FycmF5MTcpIHtcclxuICAgICAgICAgIGlmIChfaTE4ID49IF9pdGVyYXRvcjE3Lmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICBfcmVmMTYgPSBfaXRlcmF0b3IxN1tfaTE4KytdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBfaTE4ID0gX2l0ZXJhdG9yMTcubmV4dCgpO1xyXG4gICAgICAgICAgaWYgKF9pMTguZG9uZSkgYnJlYWs7XHJcbiAgICAgICAgICBfcmVmMTYgPSBfaTE4LnZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZpbGUgPSBfcmVmMTY7XHJcblxyXG4gICAgICAgIHRoaXMuZW5xdWV1ZUZpbGUoZmlsZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfSwge1xyXG4gICAga2V5OiBcImVucXVldWVGaWxlXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5xdWV1ZUZpbGUoZmlsZSkge1xyXG4gICAgICB2YXIgX3RoaXM4ID0gdGhpcztcclxuXHJcbiAgICAgIGlmIChmaWxlLnN0YXR1cyA9PT0gRHJvcHpvbmUuQURERUQgJiYgZmlsZS5hY2NlcHRlZCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIGZpbGUuc3RhdHVzID0gRHJvcHpvbmUuUVVFVUVEO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXV0b1Byb2Nlc3NRdWV1ZSkge1xyXG4gICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXM4LnByb2Nlc3NRdWV1ZSgpO1xyXG4gICAgICAgICAgfSwgMCk7IC8vIERlZmVycmluZyB0aGUgY2FsbFxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIGZpbGUgY2FuJ3QgYmUgcXVldWVkIGJlY2F1c2UgaXQgaGFzIGFscmVhZHkgYmVlbiBwcm9jZXNzZWQgb3Igd2FzIHJlamVjdGVkLlwiKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIHtcclxuICAgIGtleTogXCJfZW5xdWV1ZVRodW1ibmFpbFwiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9lbnF1ZXVlVGh1bWJuYWlsKGZpbGUpIHtcclxuICAgICAgdmFyIF90aGlzOSA9IHRoaXM7XHJcblxyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmNyZWF0ZUltYWdlVGh1bWJuYWlscyAmJiBmaWxlLnR5cGUubWF0Y2goL2ltYWdlLiovKSAmJiBmaWxlLnNpemUgPD0gdGhpcy5vcHRpb25zLm1heFRodW1ibmFpbEZpbGVzaXplICogMTAyNCAqIDEwMjQpIHtcclxuICAgICAgICB0aGlzLl90aHVtYm5haWxRdWV1ZS5wdXNoKGZpbGUpO1xyXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHJldHVybiBfdGhpczkuX3Byb2Nlc3NUaHVtYm5haWxRdWV1ZSgpO1xyXG4gICAgICAgIH0sIDApOyAvLyBEZWZlcnJpbmcgdGhlIGNhbGxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIHtcclxuICAgIGtleTogXCJfcHJvY2Vzc1RodW1ibmFpbFF1ZXVlXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3Byb2Nlc3NUaHVtYm5haWxRdWV1ZSgpIHtcclxuICAgICAgdmFyIF90aGlzMTAgPSB0aGlzO1xyXG5cclxuICAgICAgaWYgKHRoaXMuX3Byb2Nlc3NpbmdUaHVtYm5haWwgfHwgdGhpcy5fdGh1bWJuYWlsUXVldWUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLl9wcm9jZXNzaW5nVGh1bWJuYWlsID0gdHJ1ZTtcclxuICAgICAgdmFyIGZpbGUgPSB0aGlzLl90aHVtYm5haWxRdWV1ZS5zaGlmdCgpO1xyXG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVUaHVtYm5haWwoZmlsZSwgdGhpcy5vcHRpb25zLnRodW1ibmFpbFdpZHRoLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsSGVpZ2h0LCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsTWV0aG9kLCB0cnVlLCBmdW5jdGlvbiAoZGF0YVVybCkge1xyXG4gICAgICAgIF90aGlzMTAuZW1pdChcInRodW1ibmFpbFwiLCBmaWxlLCBkYXRhVXJsKTtcclxuICAgICAgICBfdGhpczEwLl9wcm9jZXNzaW5nVGh1bWJuYWlsID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzMTAuX3Byb2Nlc3NUaHVtYm5haWxRdWV1ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYW4gYmUgY2FsbGVkIGJ5IHRoZSB1c2VyIHRvIHJlbW92ZSBhIGZpbGVcclxuXHJcbiAgfSwge1xyXG4gICAga2V5OiBcInJlbW92ZUZpbGVcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVGaWxlKGZpbGUpIHtcclxuICAgICAgaWYgKGZpbGUuc3RhdHVzID09PSBEcm9wem9uZS5VUExPQURJTkcpIHtcclxuICAgICAgICB0aGlzLmNhbmNlbFVwbG9hZChmaWxlKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmZpbGVzID0gd2l0aG91dCh0aGlzLmZpbGVzLCBmaWxlKTtcclxuXHJcbiAgICAgIHRoaXMuZW1pdChcInJlbW92ZWRmaWxlXCIsIGZpbGUpO1xyXG4gICAgICBpZiAodGhpcy5maWxlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbWl0KFwicmVzZXRcIik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBSZW1vdmVzIGFsbCBmaWxlcyB0aGF0IGFyZW4ndCBjdXJyZW50bHkgcHJvY2Vzc2VkIGZyb20gdGhlIGxpc3RcclxuXHJcbiAgfSwge1xyXG4gICAga2V5OiBcInJlbW92ZUFsbEZpbGVzXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlQWxsRmlsZXMoY2FuY2VsSWZOZWNlc3NhcnkpIHtcclxuICAgICAgLy8gQ3JlYXRlIGEgY29weSBvZiBmaWxlcyBzaW5jZSByZW1vdmVGaWxlKCkgY2hhbmdlcyB0aGUgQGZpbGVzIGFycmF5LlxyXG4gICAgICBpZiAoY2FuY2VsSWZOZWNlc3NhcnkgPT0gbnVsbCkge1xyXG4gICAgICAgIGNhbmNlbElmTmVjZXNzYXJ5ID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMTggPSB0aGlzLmZpbGVzLnNsaWNlKCksIF9pc0FycmF5MTggPSB0cnVlLCBfaTE5ID0gMCwgX2l0ZXJhdG9yMTggPSBfaXNBcnJheTE4ID8gX2l0ZXJhdG9yMTggOiBfaXRlcmF0b3IxOFtTeW1ib2wuaXRlcmF0b3JdKCk7Oykge1xyXG4gICAgICAgIHZhciBfcmVmMTc7XHJcblxyXG4gICAgICAgIGlmIChfaXNBcnJheTE4KSB7XHJcbiAgICAgICAgICBpZiAoX2kxOSA+PSBfaXRlcmF0b3IxOC5sZW5ndGgpIGJyZWFrO1xyXG4gICAgICAgICAgX3JlZjE3ID0gX2l0ZXJhdG9yMThbX2kxOSsrXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX2kxOSA9IF9pdGVyYXRvcjE4Lm5leHQoKTtcclxuICAgICAgICAgIGlmIChfaTE5LmRvbmUpIGJyZWFrO1xyXG4gICAgICAgICAgX3JlZjE3ID0gX2kxOS52YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBmaWxlID0gX3JlZjE3O1xyXG5cclxuICAgICAgICBpZiAoZmlsZS5zdGF0dXMgIT09IERyb3B6b25lLlVQTE9BRElORyB8fCBjYW5jZWxJZk5lY2Vzc2FyeSkge1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmVGaWxlKGZpbGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXNpemVzIGFuIGltYWdlIGJlZm9yZSBpdCBnZXRzIHNlbnQgdG8gdGhlIHNlcnZlci4gVGhpcyBmdW5jdGlvbiBpcyB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZlxyXG4gICAgLy8gYG9wdGlvbnMudHJhbnNmb3JtRmlsZWAgaWYgYHJlc2l6ZVdpZHRoYCBvciBgcmVzaXplSGVpZ2h0YCBhcmUgc2V0LiBUaGUgY2FsbGJhY2sgaXMgaW52b2tlZCB3aXRoXHJcbiAgICAvLyB0aGUgcmVzaXplZCBibG9iLlxyXG5cclxuICB9LCB7XHJcbiAgICBrZXk6IFwicmVzaXplSW1hZ2VcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNpemVJbWFnZShmaWxlLCB3aWR0aCwgaGVpZ2h0LCByZXNpemVNZXRob2QsIGNhbGxiYWNrKSB7XHJcbiAgICAgIHZhciBfdGhpczExID0gdGhpcztcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRodW1ibmFpbChmaWxlLCB3aWR0aCwgaGVpZ2h0LCByZXNpemVNZXRob2QsIGZhbHNlLCBmdW5jdGlvbiAoZGF0YVVybCwgY2FudmFzKSB7XHJcbiAgICAgICAgaWYgKGNhbnZhcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAvLyBUaGUgaW1hZ2UgaGFzIG5vdCBiZWVuIHJlc2l6ZWRcclxuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhmaWxlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdmFyIHJlc2l6ZU1pbWVUeXBlID0gX3RoaXMxMS5vcHRpb25zLnJlc2l6ZU1pbWVUeXBlO1xyXG5cclxuICAgICAgICAgIGlmIChyZXNpemVNaW1lVHlwZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJlc2l6ZU1pbWVUeXBlID0gZmlsZS50eXBlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmFyIHJlc2l6ZWREYXRhVVJMID0gY2FudmFzLnRvRGF0YVVSTChyZXNpemVNaW1lVHlwZSwgX3RoaXMxMS5vcHRpb25zLnJlc2l6ZVF1YWxpdHkpO1xyXG4gICAgICAgICAgaWYgKHJlc2l6ZU1pbWVUeXBlID09PSAnaW1hZ2UvanBlZycgfHwgcmVzaXplTWltZVR5cGUgPT09ICdpbWFnZS9qcGcnKSB7XHJcbiAgICAgICAgICAgIC8vIE5vdyBhZGQgdGhlIG9yaWdpbmFsIEVYSUYgaW5mb3JtYXRpb25cclxuICAgICAgICAgICAgcmVzaXplZERhdGFVUkwgPSBFeGlmUmVzdG9yZS5yZXN0b3JlKGZpbGUuZGF0YVVSTCwgcmVzaXplZERhdGFVUkwpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKERyb3B6b25lLmRhdGFVUkl0b0Jsb2IocmVzaXplZERhdGFVUkwpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0sIHtcclxuICAgIGtleTogXCJjcmVhdGVUaHVtYm5haWxcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVUaHVtYm5haWwoZmlsZSwgd2lkdGgsIGhlaWdodCwgcmVzaXplTWV0aG9kLCBmaXhPcmllbnRhdGlvbiwgY2FsbGJhY2spIHtcclxuICAgICAgdmFyIF90aGlzMTIgPSB0aGlzO1xyXG5cclxuICAgICAgdmFyIGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cclxuICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIGZpbGUuZGF0YVVSTCA9IGZpbGVSZWFkZXIucmVzdWx0O1xyXG5cclxuICAgICAgICAvLyBEb24ndCBib3RoZXIgY3JlYXRpbmcgYSB0aHVtYm5haWwgZm9yIFNWRyBpbWFnZXMgc2luY2UgdGhleSdyZSB2ZWN0b3JcclxuICAgICAgICBpZiAoZmlsZS50eXBlID09PSBcImltYWdlL3N2Zyt4bWxcIikge1xyXG4gICAgICAgICAgaWYgKGNhbGxiYWNrICE9IG51bGwpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soZmlsZVJlYWRlci5yZXN1bHQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIF90aGlzMTIuY3JlYXRlVGh1bWJuYWlsRnJvbVVybChmaWxlLCB3aWR0aCwgaGVpZ2h0LCByZXNpemVNZXRob2QsIGZpeE9yaWVudGF0aW9uLCBjYWxsYmFjayk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXR1cm4gZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xyXG4gICAgfVxyXG4gIH0sIHtcclxuICAgIGtleTogXCJjcmVhdGVUaHVtYm5haWxGcm9tVXJsXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlVGh1bWJuYWlsRnJvbVVybChmaWxlLCB3aWR0aCwgaGVpZ2h0LCByZXNpemVNZXRob2QsIGZpeE9yaWVudGF0aW9uLCBjYWxsYmFjaywgY3Jvc3NPcmlnaW4pIHtcclxuICAgICAgdmFyIF90aGlzMTMgPSB0aGlzO1xyXG5cclxuICAgICAgLy8gTm90IHVzaW5nIGBuZXcgSW1hZ2VgIGhlcmUgYmVjYXVzZSBvZiBhIGJ1ZyBpbiBsYXRlc3QgQ2hyb21lIHZlcnNpb25zLlxyXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2VueW8vZHJvcHpvbmUvcHVsbC8yMjZcclxuICAgICAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcblxyXG4gICAgICBpZiAoY3Jvc3NPcmlnaW4pIHtcclxuICAgICAgICBpbWcuY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbG9hZEV4aWYgPSBmdW5jdGlvbiBsb2FkRXhpZihjYWxsYmFjaykge1xyXG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKDEpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHR5cGVvZiBFWElGICE9PSAndW5kZWZpbmVkJyAmJiBFWElGICE9PSBudWxsICYmIGZpeE9yaWVudGF0aW9uKSB7XHJcbiAgICAgICAgICBsb2FkRXhpZiA9IGZ1bmN0aW9uIGxvYWRFeGlmKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBFWElGLmdldERhdGEoaW1nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKEVYSUYuZ2V0VGFnKHRoaXMsICdPcmllbnRhdGlvbicpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGxvYWRFeGlmKGZ1bmN0aW9uIChvcmllbnRhdGlvbikge1xyXG4gICAgICAgICAgZmlsZS53aWR0aCA9IGltZy53aWR0aDtcclxuICAgICAgICAgIGZpbGUuaGVpZ2h0ID0gaW1nLmhlaWdodDtcclxuXHJcbiAgICAgICAgICB2YXIgcmVzaXplSW5mbyA9IF90aGlzMTMub3B0aW9ucy5yZXNpemUuY2FsbChfdGhpczEzLCBmaWxlLCB3aWR0aCwgaGVpZ2h0LCByZXNpemVNZXRob2QpO1xyXG5cclxuICAgICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcblxyXG4gICAgICAgICAgY2FudmFzLndpZHRoID0gcmVzaXplSW5mby50cmdXaWR0aDtcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSByZXNpemVJbmZvLnRyZ0hlaWdodDtcclxuXHJcbiAgICAgICAgICBpZiAob3JpZW50YXRpb24gPiA0KSB7XHJcbiAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHJlc2l6ZUluZm8udHJnSGVpZ2h0O1xyXG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gcmVzaXplSW5mby50cmdXaWR0aDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBzd2l0Y2ggKG9yaWVudGF0aW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAvLyBob3Jpem9udGFsIGZsaXBcclxuICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKGNhbnZhcy53aWR0aCwgMCk7XHJcbiAgICAgICAgICAgICAgY3R4LnNjYWxlKC0xLCAxKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgIC8vIDE4MMKwIHJvdGF0ZSBsZWZ0XHJcbiAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgIGN0eC5yb3RhdGUoTWF0aC5QSSk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAvLyB2ZXJ0aWNhbCBmbGlwXHJcbiAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSgwLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICBjdHguc2NhbGUoMSwgLTEpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgLy8gdmVydGljYWwgZmxpcCArIDkwIHJvdGF0ZSByaWdodFxyXG4gICAgICAgICAgICAgIGN0eC5yb3RhdGUoMC41ICogTWF0aC5QSSk7XHJcbiAgICAgICAgICAgICAgY3R4LnNjYWxlKDEsIC0xKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgIC8vIDkwwrAgcm90YXRlIHJpZ2h0XHJcbiAgICAgICAgICAgICAgY3R4LnJvdGF0ZSgwLjUgKiBNYXRoLlBJKTtcclxuICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKDAsIC1jYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgIC8vIGhvcml6b250YWwgZmxpcCArIDkwIHJvdGF0ZSByaWdodFxyXG4gICAgICAgICAgICAgIGN0eC5yb3RhdGUoMC41ICogTWF0aC5QSSk7XHJcbiAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShjYW52YXMud2lkdGgsIC1jYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICBjdHguc2NhbGUoLTEsIDEpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgLy8gOTDCsCByb3RhdGUgbGVmdFxyXG4gICAgICAgICAgICAgIGN0eC5yb3RhdGUoLTAuNSAqIE1hdGguUEkpO1xyXG4gICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoLWNhbnZhcy53aWR0aCwgMCk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gVGhpcyBpcyBhIGJ1Z2ZpeCBmb3IgaU9TJyBzY2FsaW5nIGJ1Zy5cclxuICAgICAgICAgIGRyYXdJbWFnZUlPU0ZpeChjdHgsIGltZywgcmVzaXplSW5mby5zcmNYICE9IG51bGwgPyByZXNpemVJbmZvLnNyY1ggOiAwLCByZXNpemVJbmZvLnNyY1kgIT0gbnVsbCA/IHJlc2l6ZUluZm8uc3JjWSA6IDAsIHJlc2l6ZUluZm8uc3JjV2lkdGgsIHJlc2l6ZUluZm8uc3JjSGVpZ2h0LCByZXNpemVJbmZvLnRyZ1ggIT0gbnVsbCA/IHJlc2l6ZUluZm8udHJnWCA6IDAsIHJlc2l6ZUluZm8udHJnWSAhPSBudWxsID8gcmVzaXplSW5mby50cmdZIDogMCwgcmVzaXplSW5mby50cmdXaWR0aCwgcmVzaXplSW5mby50cmdIZWlnaHQpO1xyXG5cclxuICAgICAgICAgIHZhciB0aHVtYm5haWwgPSBjYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpO1xyXG5cclxuICAgICAgICAgIGlmIChjYWxsYmFjayAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh0aHVtYm5haWwsIGNhbnZhcyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZiAoY2FsbGJhY2sgIT0gbnVsbCkge1xyXG4gICAgICAgIGltZy5vbmVycm9yID0gY2FsbGJhY2s7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBpbWcuc3JjID0gZmlsZS5kYXRhVVJMO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdvZXMgdGhyb3VnaCB0aGUgcXVldWUgYW5kIHByb2Nlc3NlcyBmaWxlcyBpZiB0aGVyZSBhcmVuJ3QgdG9vIG1hbnkgYWxyZWFkeS5cclxuXHJcbiAgfSwge1xyXG4gICAga2V5OiBcInByb2Nlc3NRdWV1ZVwiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHByb2Nlc3NRdWV1ZSgpIHtcclxuICAgICAgdmFyIHBhcmFsbGVsVXBsb2FkcyA9IHRoaXMub3B0aW9ucy5wYXJhbGxlbFVwbG9hZHM7XHJcblxyXG4gICAgICB2YXIgcHJvY2Vzc2luZ0xlbmd0aCA9IHRoaXMuZ2V0VXBsb2FkaW5nRmlsZXMoKS5sZW5ndGg7XHJcbiAgICAgIHZhciBpID0gcHJvY2Vzc2luZ0xlbmd0aDtcclxuXHJcbiAgICAgIC8vIFRoZXJlIGFyZSBhbHJlYWR5IGF0IGxlYXN0IGFzIG1hbnkgZmlsZXMgdXBsb2FkaW5nIHRoYW4gc2hvdWxkIGJlXHJcbiAgICAgIGlmIChwcm9jZXNzaW5nTGVuZ3RoID49IHBhcmFsbGVsVXBsb2Fkcykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIHF1ZXVlZEZpbGVzID0gdGhpcy5nZXRRdWV1ZWRGaWxlcygpO1xyXG5cclxuICAgICAgaWYgKCEocXVldWVkRmlsZXMubGVuZ3RoID4gMCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMudXBsb2FkTXVsdGlwbGUpIHtcclxuICAgICAgICAvLyBUaGUgZmlsZXMgc2hvdWxkIGJlIHVwbG9hZGVkIGluIG9uZSByZXF1ZXN0XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0ZpbGVzKHF1ZXVlZEZpbGVzLnNsaWNlKDAsIHBhcmFsbGVsVXBsb2FkcyAtIHByb2Nlc3NpbmdMZW5ndGgpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB3aGlsZSAoaSA8IHBhcmFsbGVsVXBsb2Fkcykge1xyXG4gICAgICAgICAgaWYgKCFxdWV1ZWRGaWxlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfSAvLyBOb3RoaW5nIGxlZnQgdG8gcHJvY2Vzc1xyXG4gICAgICAgICAgdGhpcy5wcm9jZXNzRmlsZShxdWV1ZWRGaWxlcy5zaGlmdCgpKTtcclxuICAgICAgICAgIGkrKztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBXcmFwcGVyIGZvciBgcHJvY2Vzc0ZpbGVzYFxyXG5cclxuICB9LCB7XHJcbiAgICBrZXk6IFwicHJvY2Vzc0ZpbGVcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9jZXNzRmlsZShmaWxlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NGaWxlcyhbZmlsZV0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvYWRzIHRoZSBmaWxlLCB0aGVuIGNhbGxzIGZpbmlzaGVkTG9hZGluZygpXHJcblxyXG4gIH0sIHtcclxuICAgIGtleTogXCJwcm9jZXNzRmlsZXNcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9jZXNzRmlsZXMoZmlsZXMpIHtcclxuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMTkgPSBmaWxlcywgX2lzQXJyYXkxOSA9IHRydWUsIF9pMjAgPSAwLCBfaXRlcmF0b3IxOSA9IF9pc0FycmF5MTkgPyBfaXRlcmF0b3IxOSA6IF9pdGVyYXRvcjE5W1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICAgICAgdmFyIF9yZWYxODtcclxuXHJcbiAgICAgICAgaWYgKF9pc0FycmF5MTkpIHtcclxuICAgICAgICAgIGlmIChfaTIwID49IF9pdGVyYXRvcjE5Lmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICBfcmVmMTggPSBfaXRlcmF0b3IxOVtfaTIwKytdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBfaTIwID0gX2l0ZXJhdG9yMTkubmV4dCgpO1xyXG4gICAgICAgICAgaWYgKF9pMjAuZG9uZSkgYnJlYWs7XHJcbiAgICAgICAgICBfcmVmMTggPSBfaTIwLnZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZpbGUgPSBfcmVmMTg7XHJcblxyXG4gICAgICAgIGZpbGUucHJvY2Vzc2luZyA9IHRydWU7IC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XHJcbiAgICAgICAgZmlsZS5zdGF0dXMgPSBEcm9wem9uZS5VUExPQURJTkc7XHJcblxyXG4gICAgICAgIHRoaXMuZW1pdChcInByb2Nlc3NpbmdcIiwgZmlsZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMudXBsb2FkTXVsdGlwbGUpIHtcclxuICAgICAgICB0aGlzLmVtaXQoXCJwcm9jZXNzaW5nbXVsdGlwbGVcIiwgZmlsZXMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy51cGxvYWRGaWxlcyhmaWxlcyk7XHJcbiAgICB9XHJcbiAgfSwge1xyXG4gICAga2V5OiBcIl9nZXRGaWxlc1dpdGhYaHJcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0RmlsZXNXaXRoWGhyKHhocikge1xyXG4gICAgICB2YXIgZmlsZXMgPSB2b2lkIDA7XHJcbiAgICAgIHJldHVybiBmaWxlcyA9IHRoaXMuZmlsZXMuZmlsdGVyKGZ1bmN0aW9uIChmaWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpbGUueGhyID09PSB4aHI7XHJcbiAgICAgIH0pLm1hcChmdW5jdGlvbiAoZmlsZSkge1xyXG4gICAgICAgIHJldHVybiBmaWxlO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYW5jZWxzIHRoZSBmaWxlIHVwbG9hZCBhbmQgc2V0cyB0aGUgc3RhdHVzIHRvIENBTkNFTEVEXHJcbiAgICAvLyAqKmlmKiogdGhlIGZpbGUgaXMgYWN0dWFsbHkgYmVpbmcgdXBsb2FkZWQuXHJcbiAgICAvLyBJZiBpdCdzIHN0aWxsIGluIHRoZSBxdWV1ZSwgdGhlIGZpbGUgaXMgYmVpbmcgcmVtb3ZlZCBmcm9tIGl0IGFuZCB0aGUgc3RhdHVzXHJcbiAgICAvLyBzZXQgdG8gQ0FOQ0VMRUQuXHJcblxyXG4gIH0sIHtcclxuICAgIGtleTogXCJjYW5jZWxVcGxvYWRcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWxVcGxvYWQoZmlsZSkge1xyXG4gICAgICBpZiAoZmlsZS5zdGF0dXMgPT09IERyb3B6b25lLlVQTE9BRElORykge1xyXG4gICAgICAgIHZhciBncm91cGVkRmlsZXMgPSB0aGlzLl9nZXRGaWxlc1dpdGhYaHIoZmlsZS54aHIpO1xyXG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIwID0gZ3JvdXBlZEZpbGVzLCBfaXNBcnJheTIwID0gdHJ1ZSwgX2kyMSA9IDAsIF9pdGVyYXRvcjIwID0gX2lzQXJyYXkyMCA/IF9pdGVyYXRvcjIwIDogX2l0ZXJhdG9yMjBbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcclxuICAgICAgICAgIHZhciBfcmVmMTk7XHJcblxyXG4gICAgICAgICAgaWYgKF9pc0FycmF5MjApIHtcclxuICAgICAgICAgICAgaWYgKF9pMjEgPj0gX2l0ZXJhdG9yMjAubGVuZ3RoKSBicmVhaztcclxuICAgICAgICAgICAgX3JlZjE5ID0gX2l0ZXJhdG9yMjBbX2kyMSsrXTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIF9pMjEgPSBfaXRlcmF0b3IyMC5uZXh0KCk7XHJcbiAgICAgICAgICAgIGlmIChfaTIxLmRvbmUpIGJyZWFrO1xyXG4gICAgICAgICAgICBfcmVmMTkgPSBfaTIxLnZhbHVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciBncm91cGVkRmlsZSA9IF9yZWYxOTtcclxuXHJcbiAgICAgICAgICBncm91cGVkRmlsZS5zdGF0dXMgPSBEcm9wem9uZS5DQU5DRUxFRDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBmaWxlLnhociAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgIGZpbGUueGhyLmFib3J0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIxID0gZ3JvdXBlZEZpbGVzLCBfaXNBcnJheTIxID0gdHJ1ZSwgX2kyMiA9IDAsIF9pdGVyYXRvcjIxID0gX2lzQXJyYXkyMSA/IF9pdGVyYXRvcjIxIDogX2l0ZXJhdG9yMjFbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcclxuICAgICAgICAgIHZhciBfcmVmMjA7XHJcblxyXG4gICAgICAgICAgaWYgKF9pc0FycmF5MjEpIHtcclxuICAgICAgICAgICAgaWYgKF9pMjIgPj0gX2l0ZXJhdG9yMjEubGVuZ3RoKSBicmVhaztcclxuICAgICAgICAgICAgX3JlZjIwID0gX2l0ZXJhdG9yMjFbX2kyMisrXTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIF9pMjIgPSBfaXRlcmF0b3IyMS5uZXh0KCk7XHJcbiAgICAgICAgICAgIGlmIChfaTIyLmRvbmUpIGJyZWFrO1xyXG4gICAgICAgICAgICBfcmVmMjAgPSBfaTIyLnZhbHVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciBfZ3JvdXBlZEZpbGUgPSBfcmVmMjA7XHJcblxyXG4gICAgICAgICAgdGhpcy5lbWl0KFwiY2FuY2VsZWRcIiwgX2dyb3VwZWRGaWxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy51cGxvYWRNdWx0aXBsZSkge1xyXG4gICAgICAgICAgdGhpcy5lbWl0KFwiY2FuY2VsZWRtdWx0aXBsZVwiLCBncm91cGVkRmlsZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChmaWxlLnN0YXR1cyA9PT0gRHJvcHpvbmUuQURERUQgfHwgZmlsZS5zdGF0dXMgPT09IERyb3B6b25lLlFVRVVFRCkge1xyXG4gICAgICAgIGZpbGUuc3RhdHVzID0gRHJvcHpvbmUuQ0FOQ0VMRUQ7XHJcbiAgICAgICAgdGhpcy5lbWl0KFwiY2FuY2VsZWRcIiwgZmlsZSk7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy51cGxvYWRNdWx0aXBsZSkge1xyXG4gICAgICAgICAgdGhpcy5lbWl0KFwiY2FuY2VsZWRtdWx0aXBsZVwiLCBbZmlsZV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5hdXRvUHJvY2Vzc1F1ZXVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCB7XHJcbiAgICBrZXk6IFwicmVzb2x2ZU9wdGlvblwiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc29sdmVPcHRpb24ob3B0aW9uKSB7XHJcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjMgPiAxID8gX2xlbjMgLSAxIDogMCksIF9rZXkzID0gMTsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xyXG4gICAgICAgICAgYXJnc1tfa2V5MyAtIDFdID0gYXJndW1lbnRzW19rZXkzXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvcHRpb24uYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG9wdGlvbjtcclxuICAgIH1cclxuICB9LCB7XHJcbiAgICBrZXk6IFwidXBsb2FkRmlsZVwiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwbG9hZEZpbGUoZmlsZSkge1xyXG4gICAgICByZXR1cm4gdGhpcy51cGxvYWRGaWxlcyhbZmlsZV0pO1xyXG4gICAgfVxyXG4gIH0sIHtcclxuICAgIGtleTogXCJ1cGxvYWRGaWxlc1wiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwbG9hZEZpbGVzKGZpbGVzKSB7XHJcbiAgICAgIHZhciBfdGhpczE0ID0gdGhpcztcclxuXHJcbiAgICAgIHRoaXMuX3RyYW5zZm9ybUZpbGVzKGZpbGVzLCBmdW5jdGlvbiAodHJhbnNmb3JtZWRGaWxlcykge1xyXG4gICAgICAgIGlmIChmaWxlc1swXS51cGxvYWQuY2h1bmtlZCkge1xyXG4gICAgICAgICAgLy8gVGhpcyBmaWxlIHNob3VsZCBiZSBzZW50IGluIGNodW5rcyFcclxuXHJcbiAgICAgICAgICAvLyBJZiB0aGUgY2h1bmtpbmcgb3B0aW9uIGlzIHNldCwgd2UgKiprbm93KiogdGhhdCB0aGVyZSBjYW4gb25seSBiZSAqKm9uZSoqIGZpbGUsIHNpbmNlXHJcbiAgICAgICAgICAvLyB1cGxvYWRNdWx0aXBsZSBpcyBub3QgYWxsb3dlZCB3aXRoIHRoaXMgb3B0aW9uLlxyXG4gICAgICAgICAgdmFyIGZpbGUgPSBmaWxlc1swXTtcclxuICAgICAgICAgIHZhciB0cmFuc2Zvcm1lZEZpbGUgPSB0cmFuc2Zvcm1lZEZpbGVzWzBdO1xyXG4gICAgICAgICAgdmFyIHN0YXJ0ZWRDaHVua0NvdW50ID0gMDtcclxuXHJcbiAgICAgICAgICBmaWxlLnVwbG9hZC5jaHVua3MgPSBbXTtcclxuXHJcbiAgICAgICAgICB2YXIgaGFuZGxlTmV4dENodW5rID0gZnVuY3Rpb24gaGFuZGxlTmV4dENodW5rKCkge1xyXG4gICAgICAgICAgICB2YXIgY2h1bmtJbmRleCA9IDA7XHJcblxyXG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBuZXh0IGl0ZW0gaW4gZmlsZS51cGxvYWQuY2h1bmtzIHRoYXQgaXMgbm90IGRlZmluZWQgeWV0LlxyXG4gICAgICAgICAgICB3aGlsZSAoZmlsZS51cGxvYWQuY2h1bmtzW2NodW5rSW5kZXhdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICBjaHVua0luZGV4Kys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgbWVhbnMsIHRoYXQgYWxsIGNodW5rcyBoYXZlIGFscmVhZHkgYmVlbiBzdGFydGVkLlxyXG4gICAgICAgICAgICBpZiAoY2h1bmtJbmRleCA+PSBmaWxlLnVwbG9hZC50b3RhbENodW5rQ291bnQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHN0YXJ0ZWRDaHVua0NvdW50Kys7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBjaHVua0luZGV4ICogX3RoaXMxNC5vcHRpb25zLmNodW5rU2l6ZTtcclxuICAgICAgICAgICAgdmFyIGVuZCA9IE1hdGgubWluKHN0YXJ0ICsgX3RoaXMxNC5vcHRpb25zLmNodW5rU2l6ZSwgZmlsZS5zaXplKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhQmxvY2sgPSB7XHJcbiAgICAgICAgICAgICAgbmFtZTogX3RoaXMxNC5fZ2V0UGFyYW1OYW1lKDApLFxyXG4gICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkRmlsZS53ZWJraXRTbGljZSA/IHRyYW5zZm9ybWVkRmlsZS53ZWJraXRTbGljZShzdGFydCwgZW5kKSA6IHRyYW5zZm9ybWVkRmlsZS5zbGljZShzdGFydCwgZW5kKSxcclxuICAgICAgICAgICAgICBmaWxlbmFtZTogZmlsZS51cGxvYWQuZmlsZW5hbWUsXHJcbiAgICAgICAgICAgICAgY2h1bmtJbmRleDogY2h1bmtJbmRleFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZmlsZS51cGxvYWQuY2h1bmtzW2NodW5rSW5kZXhdID0ge1xyXG4gICAgICAgICAgICAgIGZpbGU6IGZpbGUsXHJcbiAgICAgICAgICAgICAgaW5kZXg6IGNodW5rSW5kZXgsXHJcbiAgICAgICAgICAgICAgZGF0YUJsb2NrOiBkYXRhQmxvY2ssIC8vIEluIGNhc2Ugd2Ugd2FudCB0byByZXRyeS5cclxuICAgICAgICAgICAgICBzdGF0dXM6IERyb3B6b25lLlVQTE9BRElORyxcclxuICAgICAgICAgICAgICBwcm9ncmVzczogMCxcclxuICAgICAgICAgICAgICByZXRyaWVzOiAwIC8vIFRoZSBudW1iZXIgb2YgdGltZXMgdGhpcyBibG9jayBoYXMgYmVlbiByZXRyaWVkLlxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgX3RoaXMxNC5fdXBsb2FkRGF0YShmaWxlcywgW2RhdGFCbG9ja10pO1xyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICBmaWxlLnVwbG9hZC5maW5pc2hlZENodW5rVXBsb2FkID0gZnVuY3Rpb24gKGNodW5rKSB7XHJcbiAgICAgICAgICAgIHZhciBhbGxGaW5pc2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNodW5rLnN0YXR1cyA9IERyb3B6b25lLlNVQ0NFU1M7XHJcblxyXG4gICAgICAgICAgICAvLyBDbGVhciB0aGUgZGF0YSBmcm9tIHRoZSBjaHVua1xyXG4gICAgICAgICAgICBjaHVuay5kYXRhQmxvY2sgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlLnVwbG9hZC50b3RhbENodW5rQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgIGlmIChmaWxlLnVwbG9hZC5jaHVua3NbaV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZU5leHRDaHVuaygpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoZmlsZS51cGxvYWQuY2h1bmtzW2ldLnN0YXR1cyAhPT0gRHJvcHpvbmUuU1VDQ0VTUykge1xyXG4gICAgICAgICAgICAgICAgYWxsRmluaXNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChhbGxGaW5pc2hlZCkge1xyXG4gICAgICAgICAgICAgIF90aGlzMTQub3B0aW9ucy5jaHVua3NVcGxvYWRlZChmaWxlLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpczE0Ll9maW5pc2hlZChmaWxlcywgJycsIG51bGwpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgIGlmIChfdGhpczE0Lm9wdGlvbnMucGFyYWxsZWxDaHVua1VwbG9hZHMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlLnVwbG9hZC50b3RhbENodW5rQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgIGhhbmRsZU5leHRDaHVuaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBoYW5kbGVOZXh0Q2h1bmsoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBbXTtcclxuICAgICAgICAgIGZvciAodmFyIF9pMjMgPSAwOyBfaTIzIDwgZmlsZXMubGVuZ3RoOyBfaTIzKyspIHtcclxuICAgICAgICAgICAgZGF0YUJsb2Nrc1tfaTIzXSA9IHtcclxuICAgICAgICAgICAgICBuYW1lOiBfdGhpczE0Ll9nZXRQYXJhbU5hbWUoX2kyMyksXHJcbiAgICAgICAgICAgICAgZGF0YTogdHJhbnNmb3JtZWRGaWxlc1tfaTIzXSxcclxuICAgICAgICAgICAgICBmaWxlbmFtZTogZmlsZXNbX2kyM10udXBsb2FkLmZpbGVuYW1lXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBfdGhpczE0Ll91cGxvYWREYXRhKGZpbGVzLCBkYXRhQmxvY2tzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLyBSZXR1cm5zIHRoZSByaWdodCBjaHVuayBmb3IgZ2l2ZW4gZmlsZSBhbmQgeGhyXHJcblxyXG4gIH0sIHtcclxuICAgIGtleTogXCJfZ2V0Q2h1bmtcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0Q2h1bmsoZmlsZSwgeGhyKSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZS51cGxvYWQudG90YWxDaHVua0NvdW50OyBpKyspIHtcclxuICAgICAgICBpZiAoZmlsZS51cGxvYWQuY2h1bmtzW2ldICE9PSB1bmRlZmluZWQgJiYgZmlsZS51cGxvYWQuY2h1bmtzW2ldLnhociA9PT0geGhyKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmlsZS51cGxvYWQuY2h1bmtzW2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFRoaXMgZnVuY3Rpb24gYWN0dWFsbHkgdXBsb2FkcyB0aGUgZmlsZShzKSB0byB0aGUgc2VydmVyLlxyXG4gICAgLy8gSWYgZGF0YUJsb2NrcyBjb250YWlucyB0aGUgYWN0dWFsIGRhdGEgdG8gdXBsb2FkIChtZWFuaW5nLCB0aGF0IHRoaXMgY291bGQgZWl0aGVyIGJlIHRyYW5zZm9ybWVkXHJcbiAgICAvLyBmaWxlcywgb3IgaW5kaXZpZHVhbCBjaHVua3MgZm9yIGNodW5rZWQgdXBsb2FkKS5cclxuXHJcbiAgfSwge1xyXG4gICAga2V5OiBcIl91cGxvYWREYXRhXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3VwbG9hZERhdGEoZmlsZXMsIGRhdGFCbG9ja3MpIHtcclxuICAgICAgdmFyIF90aGlzMTUgPSB0aGlzO1xyXG5cclxuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuICAgICAgLy8gUHV0IHRoZSB4aHIgb2JqZWN0IGluIHRoZSBmaWxlIG9iamVjdHMgdG8gYmUgYWJsZSB0byByZWZlcmVuY2UgaXQgbGF0ZXIuXHJcbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIyID0gZmlsZXMsIF9pc0FycmF5MjIgPSB0cnVlLCBfaTI0ID0gMCwgX2l0ZXJhdG9yMjIgPSBfaXNBcnJheTIyID8gX2l0ZXJhdG9yMjIgOiBfaXRlcmF0b3IyMltTeW1ib2wuaXRlcmF0b3JdKCk7Oykge1xyXG4gICAgICAgIHZhciBfcmVmMjE7XHJcblxyXG4gICAgICAgIGlmIChfaXNBcnJheTIyKSB7XHJcbiAgICAgICAgICBpZiAoX2kyNCA+PSBfaXRlcmF0b3IyMi5sZW5ndGgpIGJyZWFrO1xyXG4gICAgICAgICAgX3JlZjIxID0gX2l0ZXJhdG9yMjJbX2kyNCsrXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX2kyNCA9IF9pdGVyYXRvcjIyLm5leHQoKTtcclxuICAgICAgICAgIGlmIChfaTI0LmRvbmUpIGJyZWFrO1xyXG4gICAgICAgICAgX3JlZjIxID0gX2kyNC52YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBmaWxlID0gX3JlZjIxO1xyXG5cclxuICAgICAgICBmaWxlLnhociA9IHhocjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZmlsZXNbMF0udXBsb2FkLmNodW5rZWQpIHtcclxuICAgICAgICAvLyBQdXQgdGhlIHhociBvYmplY3QgaW4gdGhlIHJpZ2h0IGNodW5rIG9iamVjdCwgc28gaXQgY2FuIGJlIGFzc29jaWF0ZWQgbGF0ZXIsIGFuZCBmb3VuZCB3aXRoIF9nZXRDaHVua1xyXG4gICAgICAgIGZpbGVzWzBdLnVwbG9hZC5jaHVua3NbZGF0YUJsb2Nrc1swXS5jaHVua0luZGV4XS54aHIgPSB4aHI7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBtZXRob2QgPSB0aGlzLnJlc29sdmVPcHRpb24odGhpcy5vcHRpb25zLm1ldGhvZCwgZmlsZXMpO1xyXG4gICAgICB2YXIgdXJsID0gdGhpcy5yZXNvbHZlT3B0aW9uKHRoaXMub3B0aW9ucy51cmwsIGZpbGVzKTtcclxuICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xyXG5cclxuICAgICAgLy8gU2V0dGluZyB0aGUgdGltZW91dCBhZnRlciBvcGVuIGJlY2F1c2Ugb2YgSUUxMSBpc3N1ZTogaHR0cHM6Ly9naXRsYWIuY29tL21lbm8vZHJvcHpvbmUvaXNzdWVzLzhcclxuICAgICAgeGhyLnRpbWVvdXQgPSB0aGlzLnJlc29sdmVPcHRpb24odGhpcy5vcHRpb25zLnRpbWVvdXQsIGZpbGVzKTtcclxuXHJcbiAgICAgIC8vIEhhcyB0byBiZSBhZnRlciBgLm9wZW4oKWAuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZW55by9kcm9wem9uZS9pc3N1ZXMvMTc5XHJcbiAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSAhIXRoaXMub3B0aW9ucy53aXRoQ3JlZGVudGlhbHM7XHJcblxyXG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBfdGhpczE1Ll9maW5pc2hlZFVwbG9hZGluZyhmaWxlcywgeGhyLCBlKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIF90aGlzMTUuX2hhbmRsZVVwbG9hZEVycm9yKGZpbGVzLCB4aHIpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gU29tZSBicm93c2VycyBkbyBub3QgaGF2ZSB0aGUgLnVwbG9hZCBwcm9wZXJ0eVxyXG4gICAgICB2YXIgcHJvZ3Jlc3NPYmogPSB4aHIudXBsb2FkICE9IG51bGwgPyB4aHIudXBsb2FkIDogeGhyO1xyXG4gICAgICBwcm9ncmVzc09iai5vbnByb2dyZXNzID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICByZXR1cm4gX3RoaXMxNS5fdXBkYXRlRmlsZXNVcGxvYWRQcm9ncmVzcyhmaWxlcywgeGhyLCBlKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciBoZWFkZXJzID0ge1xyXG4gICAgICAgIFwiQWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgIFwiQ2FjaGUtQ29udHJvbFwiOiBcIm5vLWNhY2hlXCIsXHJcbiAgICAgICAgXCJYLVJlcXVlc3RlZC1XaXRoXCI6IFwiWE1MSHR0cFJlcXVlc3RcIlxyXG4gICAgICB9O1xyXG5cclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5oZWFkZXJzKSB7XHJcbiAgICAgICAgRHJvcHpvbmUuZXh0ZW5kKGhlYWRlcnMsIHRoaXMub3B0aW9ucy5oZWFkZXJzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yICh2YXIgaGVhZGVyTmFtZSBpbiBoZWFkZXJzKSB7XHJcbiAgICAgICAgdmFyIGhlYWRlclZhbHVlID0gaGVhZGVyc1toZWFkZXJOYW1lXTtcclxuICAgICAgICBpZiAoaGVhZGVyVmFsdWUpIHtcclxuICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlck5hbWUsIGhlYWRlclZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG5cclxuICAgICAgLy8gQWRkaW5nIGFsbCBAb3B0aW9ucyBwYXJhbWV0ZXJzXHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucGFyYW1zKSB7XHJcbiAgICAgICAgdmFyIGFkZGl0aW9uYWxQYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xyXG4gICAgICAgIGlmICh0eXBlb2YgYWRkaXRpb25hbFBhcmFtcyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgYWRkaXRpb25hbFBhcmFtcyA9IGFkZGl0aW9uYWxQYXJhbXMuY2FsbCh0aGlzLCBmaWxlcywgeGhyLCBmaWxlc1swXS51cGxvYWQuY2h1bmtlZCA/IHRoaXMuX2dldENodW5rKGZpbGVzWzBdLCB4aHIpIDogbnVsbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gYWRkaXRpb25hbFBhcmFtcykge1xyXG4gICAgICAgICAgdmFyIHZhbHVlID0gYWRkaXRpb25hbFBhcmFtc1trZXldO1xyXG4gICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGtleSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gTGV0IHRoZSB1c2VyIGFkZCBhZGRpdGlvbmFsIGRhdGEgaWYgbmVjZXNzYXJ5XHJcbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIzID0gZmlsZXMsIF9pc0FycmF5MjMgPSB0cnVlLCBfaTI1ID0gMCwgX2l0ZXJhdG9yMjMgPSBfaXNBcnJheTIzID8gX2l0ZXJhdG9yMjMgOiBfaXRlcmF0b3IyM1tTeW1ib2wuaXRlcmF0b3JdKCk7Oykge1xyXG4gICAgICAgIHZhciBfcmVmMjI7XHJcblxyXG4gICAgICAgIGlmIChfaXNBcnJheTIzKSB7XHJcbiAgICAgICAgICBpZiAoX2kyNSA+PSBfaXRlcmF0b3IyMy5sZW5ndGgpIGJyZWFrO1xyXG4gICAgICAgICAgX3JlZjIyID0gX2l0ZXJhdG9yMjNbX2kyNSsrXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX2kyNSA9IF9pdGVyYXRvcjIzLm5leHQoKTtcclxuICAgICAgICAgIGlmIChfaTI1LmRvbmUpIGJyZWFrO1xyXG4gICAgICAgICAgX3JlZjIyID0gX2kyNS52YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBfZmlsZSA9IF9yZWYyMjtcclxuXHJcbiAgICAgICAgdGhpcy5lbWl0KFwic2VuZGluZ1wiLCBfZmlsZSwgeGhyLCBmb3JtRGF0YSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy51cGxvYWRNdWx0aXBsZSkge1xyXG4gICAgICAgIHRoaXMuZW1pdChcInNlbmRpbmdtdWx0aXBsZVwiLCBmaWxlcywgeGhyLCBmb3JtRGF0YSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuX2FkZEZvcm1FbGVtZW50RGF0YShmb3JtRGF0YSk7XHJcblxyXG4gICAgICAvLyBGaW5hbGx5IGFkZCB0aGUgZmlsZXNcclxuICAgICAgLy8gSGFzIHRvIGJlIGxhc3QgYmVjYXVzZSBzb21lIHNlcnZlcnMgKGVnOiBTMykgZXhwZWN0IHRoZSBmaWxlIHRvIGJlIHRoZSBsYXN0IHBhcmFtZXRlclxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFCbG9ja3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc1tpXTtcclxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoZGF0YUJsb2NrLm5hbWUsIGRhdGFCbG9jay5kYXRhLCBkYXRhQmxvY2suZmlsZW5hbWUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnN1Ym1pdFJlcXVlc3QoeGhyLCBmb3JtRGF0YSwgZmlsZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRyYW5zZm9ybXMgYWxsIGZpbGVzIHdpdGggdGhpcy5vcHRpb25zLnRyYW5zZm9ybUZpbGUgYW5kIGludm9rZXMgZG9uZSB3aXRoIHRoZSB0cmFuc2Zvcm1lZCBmaWxlcyB3aGVuIGRvbmUuXHJcblxyXG4gIH0sIHtcclxuICAgIGtleTogXCJfdHJhbnNmb3JtRmlsZXNcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBfdHJhbnNmb3JtRmlsZXMoZmlsZXMsIGRvbmUpIHtcclxuICAgICAgdmFyIF90aGlzMTYgPSB0aGlzO1xyXG5cclxuICAgICAgdmFyIHRyYW5zZm9ybWVkRmlsZXMgPSBbXTtcclxuICAgICAgLy8gQ2x1bXN5IHdheSBvZiBoYW5kbGluZyBhc3luY2hyb25vdXMgY2FsbHMsIHVudGlsIEkgZ2V0IHRvIGFkZCBhIHByb3BlciBGdXR1cmUgbGlicmFyeS5cclxuICAgICAgdmFyIGRvbmVDb3VudGVyID0gMDtcclxuXHJcbiAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGkpIHtcclxuICAgICAgICBfdGhpczE2Lm9wdGlvbnMudHJhbnNmb3JtRmlsZS5jYWxsKF90aGlzMTYsIGZpbGVzW2ldLCBmdW5jdGlvbiAodHJhbnNmb3JtZWRGaWxlKSB7XHJcbiAgICAgICAgICB0cmFuc2Zvcm1lZEZpbGVzW2ldID0gdHJhbnNmb3JtZWRGaWxlO1xyXG4gICAgICAgICAgaWYgKCsrZG9uZUNvdW50ZXIgPT09IGZpbGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBkb25lKHRyYW5zZm9ybWVkRmlsZXMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIF9sb29wKGkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGFrZXMgY2FyZSBvZiBhZGRpbmcgb3RoZXIgaW5wdXQgZWxlbWVudHMgb2YgdGhlIGZvcm0gdG8gdGhlIEFKQVggcmVxdWVzdFxyXG5cclxuICB9LCB7XHJcbiAgICBrZXk6IFwiX2FkZEZvcm1FbGVtZW50RGF0YVwiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9hZGRGb3JtRWxlbWVudERhdGEoZm9ybURhdGEpIHtcclxuICAgICAgLy8gVGFrZSBjYXJlIG9mIG90aGVyIGlucHV0IGVsZW1lbnRzXHJcbiAgICAgIGlmICh0aGlzLmVsZW1lbnQudGFnTmFtZSA9PT0gXCJGT1JNXCIpIHtcclxuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyNCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QsIGJ1dHRvblwiKSwgX2lzQXJyYXkyNCA9IHRydWUsIF9pMjYgPSAwLCBfaXRlcmF0b3IyNCA9IF9pc0FycmF5MjQgPyBfaXRlcmF0b3IyNCA6IF9pdGVyYXRvcjI0W1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICAgICAgICB2YXIgX3JlZjIzO1xyXG5cclxuICAgICAgICAgIGlmIChfaXNBcnJheTI0KSB7XHJcbiAgICAgICAgICAgIGlmIChfaTI2ID49IF9pdGVyYXRvcjI0Lmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICAgIF9yZWYyMyA9IF9pdGVyYXRvcjI0W19pMjYrK107XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfaTI2ID0gX2l0ZXJhdG9yMjQubmV4dCgpO1xyXG4gICAgICAgICAgICBpZiAoX2kyNi5kb25lKSBicmVhaztcclxuICAgICAgICAgICAgX3JlZjIzID0gX2kyNi52YWx1ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB2YXIgaW5wdXQgPSBfcmVmMjM7XHJcblxyXG4gICAgICAgICAgdmFyIGlucHV0TmFtZSA9IGlucHV0LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcbiAgICAgICAgICB2YXIgaW5wdXRUeXBlID0gaW5wdXQuZ2V0QXR0cmlidXRlKFwidHlwZVwiKTtcclxuICAgICAgICAgIGlmIChpbnB1dFR5cGUpIGlucHV0VHlwZSA9IGlucHV0VHlwZS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICAgIC8vIElmIHRoZSBpbnB1dCBkb2Vzbid0IGhhdmUgYSBuYW1lLCB3ZSBjYW4ndCB1c2UgaXQuXHJcbiAgICAgICAgICBpZiAodHlwZW9mIGlucHV0TmFtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgaW5wdXROYW1lID09PSBudWxsKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICBpZiAoaW5wdXQudGFnTmFtZSA9PT0gXCJTRUxFQ1RcIiAmJiBpbnB1dC5oYXNBdHRyaWJ1dGUoXCJtdWx0aXBsZVwiKSkge1xyXG4gICAgICAgICAgICAvLyBQb3NzaWJseSBtdWx0aXBsZSB2YWx1ZXNcclxuICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMjUgPSBpbnB1dC5vcHRpb25zLCBfaXNBcnJheTI1ID0gdHJ1ZSwgX2kyNyA9IDAsIF9pdGVyYXRvcjI1ID0gX2lzQXJyYXkyNSA/IF9pdGVyYXRvcjI1IDogX2l0ZXJhdG9yMjVbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcclxuICAgICAgICAgICAgICB2YXIgX3JlZjI0O1xyXG5cclxuICAgICAgICAgICAgICBpZiAoX2lzQXJyYXkyNSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9pMjcgPj0gX2l0ZXJhdG9yMjUubGVuZ3RoKSBicmVhaztcclxuICAgICAgICAgICAgICAgIF9yZWYyNCA9IF9pdGVyYXRvcjI1W19pMjcrK107XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9pMjcgPSBfaXRlcmF0b3IyNS5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2kyNy5kb25lKSBicmVhaztcclxuICAgICAgICAgICAgICAgIF9yZWYyNCA9IF9pMjcudmFsdWU7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICB2YXIgb3B0aW9uID0gX3JlZjI0O1xyXG5cclxuICAgICAgICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoaW5wdXROYW1lLCBvcHRpb24udmFsdWUpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIGlmICghaW5wdXRUeXBlIHx8IGlucHV0VHlwZSAhPT0gXCJjaGVja2JveFwiICYmIGlucHV0VHlwZSAhPT0gXCJyYWRpb1wiIHx8IGlucHV0LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGlucHV0TmFtZSwgaW5wdXQudmFsdWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEludm9rZWQgd2hlbiB0aGVyZSBpcyBuZXcgcHJvZ3Jlc3MgaW5mb3JtYXRpb24gYWJvdXQgZ2l2ZW4gZmlsZXMuXHJcbiAgICAvLyBJZiBlIGlzIG5vdCBwcm92aWRlZCwgaXQgaXMgYXNzdW1lZCB0aGF0IHRoZSB1cGxvYWQgaXMgZmluaXNoZWQuXHJcblxyXG4gIH0sIHtcclxuICAgIGtleTogXCJfdXBkYXRlRmlsZXNVcGxvYWRQcm9ncmVzc1wiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVGaWxlc1VwbG9hZFByb2dyZXNzKGZpbGVzLCB4aHIsIGUpIHtcclxuICAgICAgdmFyIHByb2dyZXNzID0gdm9pZCAwO1xyXG4gICAgICBpZiAodHlwZW9mIGUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcHJvZ3Jlc3MgPSAxMDAgKiBlLmxvYWRlZCAvIGUudG90YWw7XHJcblxyXG4gICAgICAgIGlmIChmaWxlc1swXS51cGxvYWQuY2h1bmtlZCkge1xyXG4gICAgICAgICAgdmFyIGZpbGUgPSBmaWxlc1swXTtcclxuICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXMgYSBjaHVua2VkIHVwbG9hZCwgd2UgbmVlZCB0byB1cGRhdGUgdGhlIGFwcHJvcHJpYXRlIGNodW5rIHByb2dyZXNzLlxyXG4gICAgICAgICAgdmFyIGNodW5rID0gdGhpcy5fZ2V0Q2h1bmsoZmlsZSwgeGhyKTtcclxuICAgICAgICAgIGNodW5rLnByb2dyZXNzID0gcHJvZ3Jlc3M7XHJcbiAgICAgICAgICBjaHVuay50b3RhbCA9IGUudG90YWw7XHJcbiAgICAgICAgICBjaHVuay5ieXRlc1NlbnQgPSBlLmxvYWRlZDtcclxuICAgICAgICAgIHZhciBmaWxlUHJvZ3Jlc3MgPSAwLFxyXG4gICAgICAgICAgICAgIGZpbGVUb3RhbCA9IHZvaWQgMCxcclxuICAgICAgICAgICAgICBmaWxlQnl0ZXNTZW50ID0gdm9pZCAwO1xyXG4gICAgICAgICAgZmlsZS51cGxvYWQucHJvZ3Jlc3MgPSAwO1xyXG4gICAgICAgICAgZmlsZS51cGxvYWQudG90YWwgPSAwO1xyXG4gICAgICAgICAgZmlsZS51cGxvYWQuYnl0ZXNTZW50ID0gMDtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZS51cGxvYWQudG90YWxDaHVua0NvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGZpbGUudXBsb2FkLmNodW5rc1tpXSAhPT0gdW5kZWZpbmVkICYmIGZpbGUudXBsb2FkLmNodW5rc1tpXS5wcm9ncmVzcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgZmlsZS51cGxvYWQucHJvZ3Jlc3MgKz0gZmlsZS51cGxvYWQuY2h1bmtzW2ldLnByb2dyZXNzO1xyXG4gICAgICAgICAgICAgIGZpbGUudXBsb2FkLnRvdGFsICs9IGZpbGUudXBsb2FkLmNodW5rc1tpXS50b3RhbDtcclxuICAgICAgICAgICAgICBmaWxlLnVwbG9hZC5ieXRlc1NlbnQgKz0gZmlsZS51cGxvYWQuY2h1bmtzW2ldLmJ5dGVzU2VudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZmlsZS51cGxvYWQucHJvZ3Jlc3MgPSBmaWxlLnVwbG9hZC5wcm9ncmVzcyAvIGZpbGUudXBsb2FkLnRvdGFsQ2h1bmtDb3VudDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMjYgPSBmaWxlcywgX2lzQXJyYXkyNiA9IHRydWUsIF9pMjggPSAwLCBfaXRlcmF0b3IyNiA9IF9pc0FycmF5MjYgPyBfaXRlcmF0b3IyNiA6IF9pdGVyYXRvcjI2W1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICAgICAgICAgIHZhciBfcmVmMjU7XHJcblxyXG4gICAgICAgICAgICBpZiAoX2lzQXJyYXkyNikge1xyXG4gICAgICAgICAgICAgIGlmIChfaTI4ID49IF9pdGVyYXRvcjI2Lmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgX3JlZjI1ID0gX2l0ZXJhdG9yMjZbX2kyOCsrXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBfaTI4ID0gX2l0ZXJhdG9yMjYubmV4dCgpO1xyXG4gICAgICAgICAgICAgIGlmIChfaTI4LmRvbmUpIGJyZWFrO1xyXG4gICAgICAgICAgICAgIF9yZWYyNSA9IF9pMjgudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBfZmlsZTIgPSBfcmVmMjU7XHJcblxyXG4gICAgICAgICAgICBfZmlsZTIudXBsb2FkLnByb2dyZXNzID0gcHJvZ3Jlc3M7XHJcbiAgICAgICAgICAgIF9maWxlMi51cGxvYWQudG90YWwgPSBlLnRvdGFsO1xyXG4gICAgICAgICAgICBfZmlsZTIudXBsb2FkLmJ5dGVzU2VudCA9IGUubG9hZGVkO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyNyA9IGZpbGVzLCBfaXNBcnJheTI3ID0gdHJ1ZSwgX2kyOSA9IDAsIF9pdGVyYXRvcjI3ID0gX2lzQXJyYXkyNyA/IF9pdGVyYXRvcjI3IDogX2l0ZXJhdG9yMjdbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcclxuICAgICAgICAgIHZhciBfcmVmMjY7XHJcblxyXG4gICAgICAgICAgaWYgKF9pc0FycmF5MjcpIHtcclxuICAgICAgICAgICAgaWYgKF9pMjkgPj0gX2l0ZXJhdG9yMjcubGVuZ3RoKSBicmVhaztcclxuICAgICAgICAgICAgX3JlZjI2ID0gX2l0ZXJhdG9yMjdbX2kyOSsrXTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIF9pMjkgPSBfaXRlcmF0b3IyNy5uZXh0KCk7XHJcbiAgICAgICAgICAgIGlmIChfaTI5LmRvbmUpIGJyZWFrO1xyXG4gICAgICAgICAgICBfcmVmMjYgPSBfaTI5LnZhbHVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciBfZmlsZTMgPSBfcmVmMjY7XHJcblxyXG4gICAgICAgICAgdGhpcy5lbWl0KFwidXBsb2FkcHJvZ3Jlc3NcIiwgX2ZpbGUzLCBfZmlsZTMudXBsb2FkLnByb2dyZXNzLCBfZmlsZTMudXBsb2FkLmJ5dGVzU2VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIENhbGxlZCB3aGVuIHRoZSBmaWxlIGZpbmlzaGVkIHVwbG9hZGluZ1xyXG5cclxuICAgICAgICB2YXIgYWxsRmlsZXNGaW5pc2hlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIHByb2dyZXNzID0gMTAwO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyOCA9IGZpbGVzLCBfaXNBcnJheTI4ID0gdHJ1ZSwgX2kzMCA9IDAsIF9pdGVyYXRvcjI4ID0gX2lzQXJyYXkyOCA/IF9pdGVyYXRvcjI4IDogX2l0ZXJhdG9yMjhbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcclxuICAgICAgICAgIHZhciBfcmVmMjc7XHJcblxyXG4gICAgICAgICAgaWYgKF9pc0FycmF5MjgpIHtcclxuICAgICAgICAgICAgaWYgKF9pMzAgPj0gX2l0ZXJhdG9yMjgubGVuZ3RoKSBicmVhaztcclxuICAgICAgICAgICAgX3JlZjI3ID0gX2l0ZXJhdG9yMjhbX2kzMCsrXTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIF9pMzAgPSBfaXRlcmF0b3IyOC5uZXh0KCk7XHJcbiAgICAgICAgICAgIGlmIChfaTMwLmRvbmUpIGJyZWFrO1xyXG4gICAgICAgICAgICBfcmVmMjcgPSBfaTMwLnZhbHVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciBfZmlsZTQgPSBfcmVmMjc7XHJcblxyXG4gICAgICAgICAgaWYgKF9maWxlNC51cGxvYWQucHJvZ3Jlc3MgIT09IDEwMCB8fCBfZmlsZTQudXBsb2FkLmJ5dGVzU2VudCAhPT0gX2ZpbGU0LnVwbG9hZC50b3RhbCkge1xyXG4gICAgICAgICAgICBhbGxGaWxlc0ZpbmlzaGVkID0gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBfZmlsZTQudXBsb2FkLnByb2dyZXNzID0gcHJvZ3Jlc3M7XHJcbiAgICAgICAgICBfZmlsZTQudXBsb2FkLmJ5dGVzU2VudCA9IF9maWxlNC51cGxvYWQudG90YWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBOb3RoaW5nIHRvIGRvLCBhbGwgZmlsZXMgYWxyZWFkeSBhdCAxMDAlXHJcbiAgICAgICAgaWYgKGFsbEZpbGVzRmluaXNoZWQpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjI5ID0gZmlsZXMsIF9pc0FycmF5MjkgPSB0cnVlLCBfaTMxID0gMCwgX2l0ZXJhdG9yMjkgPSBfaXNBcnJheTI5ID8gX2l0ZXJhdG9yMjkgOiBfaXRlcmF0b3IyOVtTeW1ib2wuaXRlcmF0b3JdKCk7Oykge1xyXG4gICAgICAgICAgdmFyIF9yZWYyODtcclxuXHJcbiAgICAgICAgICBpZiAoX2lzQXJyYXkyOSkge1xyXG4gICAgICAgICAgICBpZiAoX2kzMSA+PSBfaXRlcmF0b3IyOS5sZW5ndGgpIGJyZWFrO1xyXG4gICAgICAgICAgICBfcmVmMjggPSBfaXRlcmF0b3IyOVtfaTMxKytdO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgX2kzMSA9IF9pdGVyYXRvcjI5Lm5leHQoKTtcclxuICAgICAgICAgICAgaWYgKF9pMzEuZG9uZSkgYnJlYWs7XHJcbiAgICAgICAgICAgIF9yZWYyOCA9IF9pMzEudmFsdWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdmFyIF9maWxlNSA9IF9yZWYyODtcclxuXHJcbiAgICAgICAgICB0aGlzLmVtaXQoXCJ1cGxvYWRwcm9ncmVzc1wiLCBfZmlsZTUsIHByb2dyZXNzLCBfZmlsZTUudXBsb2FkLmJ5dGVzU2VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwge1xyXG4gICAga2V5OiBcIl9maW5pc2hlZFVwbG9hZGluZ1wiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9maW5pc2hlZFVwbG9hZGluZyhmaWxlcywgeGhyLCBlKSB7XHJcbiAgICAgIHZhciByZXNwb25zZSA9IHZvaWQgMDtcclxuXHJcbiAgICAgIGlmIChmaWxlc1swXS5zdGF0dXMgPT09IERyb3B6b25lLkNBTkNFTEVEKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgIT09IDQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh4aHIucmVzcG9uc2VUeXBlICE9PSAnYXJyYXlidWZmZXInICYmIHhoci5yZXNwb25zZVR5cGUgIT09ICdibG9iJykge1xyXG4gICAgICAgIHJlc3BvbnNlID0geGhyLnJlc3BvbnNlVGV4dDtcclxuXHJcbiAgICAgICAgaWYgKHhoci5nZXRSZXNwb25zZUhlYWRlcihcImNvbnRlbnQtdHlwZVwiKSAmJiB+eGhyLmdldFJlc3BvbnNlSGVhZGVyKFwiY29udGVudC10eXBlXCIpLmluZGV4T2YoXCJhcHBsaWNhdGlvbi9qc29uXCIpKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgZSA9IGVycm9yO1xyXG4gICAgICAgICAgICByZXNwb25zZSA9IFwiSW52YWxpZCBKU09OIHJlc3BvbnNlIGZyb20gc2VydmVyLlwiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5fdXBkYXRlRmlsZXNVcGxvYWRQcm9ncmVzcyhmaWxlcyk7XHJcblxyXG4gICAgICBpZiAoISgyMDAgPD0geGhyLnN0YXR1cyAmJiB4aHIuc3RhdHVzIDwgMzAwKSkge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVVwbG9hZEVycm9yKGZpbGVzLCB4aHIsIHJlc3BvbnNlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoZmlsZXNbMF0udXBsb2FkLmNodW5rZWQpIHtcclxuICAgICAgICAgIGZpbGVzWzBdLnVwbG9hZC5maW5pc2hlZENodW5rVXBsb2FkKHRoaXMuX2dldENodW5rKGZpbGVzWzBdLCB4aHIpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5fZmluaXNoZWQoZmlsZXMsIHJlc3BvbnNlLCBlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCB7XHJcbiAgICBrZXk6IFwiX2hhbmRsZVVwbG9hZEVycm9yXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVVwbG9hZEVycm9yKGZpbGVzLCB4aHIsIHJlc3BvbnNlKSB7XHJcbiAgICAgIGlmIChmaWxlc1swXS5zdGF0dXMgPT09IERyb3B6b25lLkNBTkNFTEVEKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZmlsZXNbMF0udXBsb2FkLmNodW5rZWQgJiYgdGhpcy5vcHRpb25zLnJldHJ5Q2h1bmtzKSB7XHJcbiAgICAgICAgdmFyIGNodW5rID0gdGhpcy5fZ2V0Q2h1bmsoZmlsZXNbMF0sIHhocik7XHJcbiAgICAgICAgaWYgKGNodW5rLnJldHJpZXMrKyA8IHRoaXMub3B0aW9ucy5yZXRyeUNodW5rc0xpbWl0KSB7XHJcbiAgICAgICAgICB0aGlzLl91cGxvYWREYXRhKGZpbGVzLCBbY2h1bmsuZGF0YUJsb2NrXSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybignUmV0cmllZCB0aGlzIGNodW5rIHRvbyBvZnRlbi4gR2l2aW5nIHVwLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMzAgPSBmaWxlcywgX2lzQXJyYXkzMCA9IHRydWUsIF9pMzIgPSAwLCBfaXRlcmF0b3IzMCA9IF9pc0FycmF5MzAgPyBfaXRlcmF0b3IzMCA6IF9pdGVyYXRvcjMwW1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICAgICAgdmFyIF9yZWYyOTtcclxuXHJcbiAgICAgICAgaWYgKF9pc0FycmF5MzApIHtcclxuICAgICAgICAgIGlmIChfaTMyID49IF9pdGVyYXRvcjMwLmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICBfcmVmMjkgPSBfaXRlcmF0b3IzMFtfaTMyKytdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBfaTMyID0gX2l0ZXJhdG9yMzAubmV4dCgpO1xyXG4gICAgICAgICAgaWYgKF9pMzIuZG9uZSkgYnJlYWs7XHJcbiAgICAgICAgICBfcmVmMjkgPSBfaTMyLnZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZpbGUgPSBfcmVmMjk7XHJcblxyXG4gICAgICAgIHRoaXMuX2Vycm9yUHJvY2Vzc2luZyhmaWxlcywgcmVzcG9uc2UgfHwgdGhpcy5vcHRpb25zLmRpY3RSZXNwb25zZUVycm9yLnJlcGxhY2UoXCJ7e3N0YXR1c0NvZGV9fVwiLCB4aHIuc3RhdHVzKSwgeGhyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIHtcclxuICAgIGtleTogXCJzdWJtaXRSZXF1ZXN0XCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3VibWl0UmVxdWVzdCh4aHIsIGZvcm1EYXRhLCBmaWxlcykge1xyXG4gICAgICB4aHIuc2VuZChmb3JtRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FsbGVkIGludGVybmFsbHkgd2hlbiBwcm9jZXNzaW5nIGlzIGZpbmlzaGVkLlxyXG4gICAgLy8gSW5kaXZpZHVhbCBjYWxsYmFja3MgaGF2ZSB0byBiZSBjYWxsZWQgaW4gdGhlIGFwcHJvcHJpYXRlIHNlY3Rpb25zLlxyXG5cclxuICB9LCB7XHJcbiAgICBrZXk6IFwiX2ZpbmlzaGVkXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2ZpbmlzaGVkKGZpbGVzLCByZXNwb25zZVRleHQsIGUpIHtcclxuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMzEgPSBmaWxlcywgX2lzQXJyYXkzMSA9IHRydWUsIF9pMzMgPSAwLCBfaXRlcmF0b3IzMSA9IF9pc0FycmF5MzEgPyBfaXRlcmF0b3IzMSA6IF9pdGVyYXRvcjMxW1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICAgICAgdmFyIF9yZWYzMDtcclxuXHJcbiAgICAgICAgaWYgKF9pc0FycmF5MzEpIHtcclxuICAgICAgICAgIGlmIChfaTMzID49IF9pdGVyYXRvcjMxLmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICBfcmVmMzAgPSBfaXRlcmF0b3IzMVtfaTMzKytdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBfaTMzID0gX2l0ZXJhdG9yMzEubmV4dCgpO1xyXG4gICAgICAgICAgaWYgKF9pMzMuZG9uZSkgYnJlYWs7XHJcbiAgICAgICAgICBfcmVmMzAgPSBfaTMzLnZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZpbGUgPSBfcmVmMzA7XHJcblxyXG4gICAgICAgIGZpbGUuc3RhdHVzID0gRHJvcHpvbmUuU1VDQ0VTUztcclxuICAgICAgICB0aGlzLmVtaXQoXCJzdWNjZXNzXCIsIGZpbGUsIHJlc3BvbnNlVGV4dCwgZSk7XHJcbiAgICAgICAgdGhpcy5lbWl0KFwiY29tcGxldGVcIiwgZmlsZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy51cGxvYWRNdWx0aXBsZSkge1xyXG4gICAgICAgIHRoaXMuZW1pdChcInN1Y2Nlc3NtdWx0aXBsZVwiLCBmaWxlcywgcmVzcG9uc2VUZXh0LCBlKTtcclxuICAgICAgICB0aGlzLmVtaXQoXCJjb21wbGV0ZW11bHRpcGxlXCIsIGZpbGVzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5hdXRvUHJvY2Vzc1F1ZXVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxsZWQgaW50ZXJuYWxseSB3aGVuIHByb2Nlc3NpbmcgaXMgZmluaXNoZWQuXHJcbiAgICAvLyBJbmRpdmlkdWFsIGNhbGxiYWNrcyBoYXZlIHRvIGJlIGNhbGxlZCBpbiB0aGUgYXBwcm9wcmlhdGUgc2VjdGlvbnMuXHJcblxyXG4gIH0sIHtcclxuICAgIGtleTogXCJfZXJyb3JQcm9jZXNzaW5nXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2Vycm9yUHJvY2Vzc2luZyhmaWxlcywgbWVzc2FnZSwgeGhyKSB7XHJcbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMyID0gZmlsZXMsIF9pc0FycmF5MzIgPSB0cnVlLCBfaTM0ID0gMCwgX2l0ZXJhdG9yMzIgPSBfaXNBcnJheTMyID8gX2l0ZXJhdG9yMzIgOiBfaXRlcmF0b3IzMltTeW1ib2wuaXRlcmF0b3JdKCk7Oykge1xyXG4gICAgICAgIHZhciBfcmVmMzE7XHJcblxyXG4gICAgICAgIGlmIChfaXNBcnJheTMyKSB7XHJcbiAgICAgICAgICBpZiAoX2kzNCA+PSBfaXRlcmF0b3IzMi5sZW5ndGgpIGJyZWFrO1xyXG4gICAgICAgICAgX3JlZjMxID0gX2l0ZXJhdG9yMzJbX2kzNCsrXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX2kzNCA9IF9pdGVyYXRvcjMyLm5leHQoKTtcclxuICAgICAgICAgIGlmIChfaTM0LmRvbmUpIGJyZWFrO1xyXG4gICAgICAgICAgX3JlZjMxID0gX2kzNC52YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBmaWxlID0gX3JlZjMxO1xyXG5cclxuICAgICAgICBmaWxlLnN0YXR1cyA9IERyb3B6b25lLkVSUk9SO1xyXG4gICAgICAgIHRoaXMuZW1pdChcImVycm9yXCIsIGZpbGUsIG1lc3NhZ2UsIHhocik7XHJcbiAgICAgICAgdGhpcy5lbWl0KFwiY29tcGxldGVcIiwgZmlsZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy51cGxvYWRNdWx0aXBsZSkge1xyXG4gICAgICAgIHRoaXMuZW1pdChcImVycm9ybXVsdGlwbGVcIiwgZmlsZXMsIG1lc3NhZ2UsIHhocik7XHJcbiAgICAgICAgdGhpcy5lbWl0KFwiY29tcGxldGVtdWx0aXBsZVwiLCBmaWxlcyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXV0b1Byb2Nlc3NRdWV1ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NRdWV1ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfV0sIFt7XHJcbiAgICBrZXk6IFwidXVpZHY0XCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXVpZHY0KCkge1xyXG4gICAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgIHZhciByID0gTWF0aC5yYW5kb20oKSAqIDE2IHwgMCxcclxuICAgICAgICAgICAgdiA9IGMgPT09ICd4JyA/IHIgOiByICYgMHgzIHwgMHg4O1xyXG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfV0pO1xyXG5cclxuICByZXR1cm4gRHJvcHpvbmU7XHJcbn0oRW1pdHRlcik7XHJcblxyXG5Ecm9wem9uZS5pbml0Q2xhc3MoKTtcclxuXHJcbkRyb3B6b25lLnZlcnNpb24gPSBcIjUuNC4wXCI7XHJcblxyXG4vLyBUaGlzIGlzIGEgbWFwIG9mIG9wdGlvbnMgZm9yIHlvdXIgZGlmZmVyZW50IGRyb3B6b25lcy4gQWRkIGNvbmZpZ3VyYXRpb25zXHJcbi8vIHRvIHRoaXMgb2JqZWN0IGZvciB5b3VyIGRpZmZlcmVudCBkcm9wem9uZSBlbGVtZW5zLlxyXG4vL1xyXG4vLyBFeGFtcGxlOlxyXG4vL1xyXG4vLyAgICAgRHJvcHpvbmUub3B0aW9ucy5teURyb3B6b25lRWxlbWVudElkID0geyBtYXhGaWxlc2l6ZTogMSB9O1xyXG4vL1xyXG4vLyBUbyBkaXNhYmxlIGF1dG9EaXNjb3ZlciBmb3IgYSBzcGVjaWZpYyBlbGVtZW50LCB5b3UgY2FuIHNldCBgZmFsc2VgIGFzIGFuIG9wdGlvbjpcclxuLy9cclxuLy8gICAgIERyb3B6b25lLm9wdGlvbnMubXlEaXNhYmxlZEVsZW1lbnRJZCA9IGZhbHNlO1xyXG4vL1xyXG4vLyBBbmQgaW4gaHRtbDpcclxuLy9cclxuLy8gICAgIDxmb3JtIGFjdGlvbj1cIi91cGxvYWRcIiBpZD1cIm15LWRyb3B6b25lLWVsZW1lbnQtaWRcIiBjbGFzcz1cImRyb3B6b25lXCI+PC9mb3JtPlxyXG5Ecm9wem9uZS5vcHRpb25zID0ge307XHJcblxyXG4vLyBSZXR1cm5zIHRoZSBvcHRpb25zIGZvciBhbiBlbGVtZW50IG9yIHVuZGVmaW5lZCBpZiBub25lIGF2YWlsYWJsZS5cclxuRHJvcHpvbmUub3B0aW9uc0ZvckVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gIC8vIEdldCB0aGUgYERyb3B6b25lLm9wdGlvbnMuZWxlbWVudElkYCBmb3IgdGhpcyBlbGVtZW50IGlmIGl0IGV4aXN0c1xyXG4gIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZShcImlkXCIpKSB7XHJcbiAgICByZXR1cm4gRHJvcHpvbmUub3B0aW9uc1tjYW1lbGl6ZShlbGVtZW50LmdldEF0dHJpYnV0ZShcImlkXCIpKV07XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gSG9sZHMgYSBsaXN0IG9mIGFsbCBkcm9wem9uZSBpbnN0YW5jZXNcclxuRHJvcHpvbmUuaW5zdGFuY2VzID0gW107XHJcblxyXG4vLyBSZXR1cm5zIHRoZSBkcm9wem9uZSBmb3IgZ2l2ZW4gZWxlbWVudCBpZiBhbnlcclxuRHJvcHpvbmUuZm9yRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgaWYgKHR5cGVvZiBlbGVtZW50ID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50KTtcclxuICB9XHJcbiAgaWYgKChlbGVtZW50ICE9IG51bGwgPyBlbGVtZW50LmRyb3B6b25lIDogdW5kZWZpbmVkKSA9PSBudWxsKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBEcm9wem9uZSBmb3VuZCBmb3IgZ2l2ZW4gZWxlbWVudC4gVGhpcyBpcyBwcm9iYWJseSBiZWNhdXNlIHlvdSdyZSB0cnlpbmcgdG8gYWNjZXNzIGl0IGJlZm9yZSBEcm9wem9uZSBoYWQgdGhlIHRpbWUgdG8gaW5pdGlhbGl6ZS4gVXNlIHRoZSBgaW5pdGAgb3B0aW9uIHRvIHNldHVwIGFueSBhZGRpdGlvbmFsIG9ic2VydmVycyBvbiB5b3VyIERyb3B6b25lLlwiKTtcclxuICB9XHJcbiAgcmV0dXJuIGVsZW1lbnQuZHJvcHpvbmU7XHJcbn07XHJcblxyXG4vLyBTZXQgdG8gZmFsc2UgaWYgeW91IGRvbid0IHdhbnQgRHJvcHpvbmUgdG8gYXV0b21hdGljYWxseSBmaW5kIGFuZCBhdHRhY2ggdG8gLmRyb3B6b25lIGVsZW1lbnRzLlxyXG5Ecm9wem9uZS5hdXRvRGlzY292ZXIgPSB0cnVlO1xyXG5cclxuLy8gTG9va3MgZm9yIGFsbCAuZHJvcHpvbmUgZWxlbWVudHMgYW5kIGNyZWF0ZXMgYSBkcm9wem9uZSBmb3IgdGhlbVxyXG5Ecm9wem9uZS5kaXNjb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICB2YXIgZHJvcHpvbmVzID0gdm9pZCAwO1xyXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKSB7XHJcbiAgICBkcm9wem9uZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmRyb3B6b25lXCIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBkcm9wem9uZXMgPSBbXTtcclxuICAgIC8vIElFIDooXHJcbiAgICB2YXIgY2hlY2tFbGVtZW50cyA9IGZ1bmN0aW9uIGNoZWNrRWxlbWVudHMoZWxlbWVudHMpIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMzMgPSBlbGVtZW50cywgX2lzQXJyYXkzMyA9IHRydWUsIF9pMzUgPSAwLCBfaXRlcmF0b3IzMyA9IF9pc0FycmF5MzMgPyBfaXRlcmF0b3IzMyA6IF9pdGVyYXRvcjMzW1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICAgICAgICB2YXIgX3JlZjMyO1xyXG5cclxuICAgICAgICAgIGlmIChfaXNBcnJheTMzKSB7XHJcbiAgICAgICAgICAgIGlmIChfaTM1ID49IF9pdGVyYXRvcjMzLmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICAgIF9yZWYzMiA9IF9pdGVyYXRvcjMzW19pMzUrK107XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfaTM1ID0gX2l0ZXJhdG9yMzMubmV4dCgpO1xyXG4gICAgICAgICAgICBpZiAoX2kzNS5kb25lKSBicmVhaztcclxuICAgICAgICAgICAgX3JlZjMyID0gX2kzNS52YWx1ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB2YXIgZWwgPSBfcmVmMzI7XHJcblxyXG4gICAgICAgICAgaWYgKC8oXnwgKWRyb3B6b25lKCR8ICkvLnRlc3QoZWwuY2xhc3NOYW1lKSkge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChkcm9wem9uZXMucHVzaChlbCkpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2godW5kZWZpbmVkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSgpO1xyXG4gICAgfTtcclxuICAgIGNoZWNrRWxlbWVudHMoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkaXZcIikpO1xyXG4gICAgY2hlY2tFbGVtZW50cyhkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImZvcm1cIikpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgIGZvciAodmFyIF9pdGVyYXRvcjM0ID0gZHJvcHpvbmVzLCBfaXNBcnJheTM0ID0gdHJ1ZSwgX2kzNiA9IDAsIF9pdGVyYXRvcjM0ID0gX2lzQXJyYXkzNCA/IF9pdGVyYXRvcjM0IDogX2l0ZXJhdG9yMzRbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcclxuICAgICAgdmFyIF9yZWYzMztcclxuXHJcbiAgICAgIGlmIChfaXNBcnJheTM0KSB7XHJcbiAgICAgICAgaWYgKF9pMzYgPj0gX2l0ZXJhdG9yMzQubGVuZ3RoKSBicmVhaztcclxuICAgICAgICBfcmVmMzMgPSBfaXRlcmF0b3IzNFtfaTM2KytdO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIF9pMzYgPSBfaXRlcmF0b3IzNC5uZXh0KCk7XHJcbiAgICAgICAgaWYgKF9pMzYuZG9uZSkgYnJlYWs7XHJcbiAgICAgICAgX3JlZjMzID0gX2kzNi52YWx1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIGRyb3B6b25lID0gX3JlZjMzO1xyXG5cclxuICAgICAgLy8gQ3JlYXRlIGEgZHJvcHpvbmUgdW5sZXNzIGF1dG8gZGlzY292ZXIgaGFzIGJlZW4gZGlzYWJsZWQgZm9yIHNwZWNpZmljIGVsZW1lbnRcclxuICAgICAgaWYgKERyb3B6b25lLm9wdGlvbnNGb3JFbGVtZW50KGRyb3B6b25lKSAhPT0gZmFsc2UpIHtcclxuICAgICAgICByZXN1bHQucHVzaChuZXcgRHJvcHpvbmUoZHJvcHpvbmUpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXN1bHQucHVzaCh1bmRlZmluZWQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH0oKTtcclxufTtcclxuXHJcbi8vIFNpbmNlIHRoZSB3aG9sZSBEcmFnJ24nRHJvcCBBUEkgaXMgcHJldHR5IG5ldywgc29tZSBicm93c2VycyBpbXBsZW1lbnQgaXQsXHJcbi8vIGJ1dCBub3QgY29ycmVjdGx5LlxyXG4vLyBTbyBJIGNyZWF0ZWQgYSBibGFja2xpc3Qgb2YgdXNlckFnZW50cy4gWWVzLCB5ZXMuIEJyb3dzZXIgc25pZmZpbmcsIEkga25vdy5cclxuLy8gQnV0IHdoYXQgdG8gZG8gd2hlbiBicm93c2VycyAqdGhlb3JldGljYWxseSogc3VwcG9ydCBhbiBBUEksIGJ1dCBjcmFzaFxyXG4vLyB3aGVuIHVzaW5nIGl0LlxyXG4vL1xyXG4vLyBUaGlzIGlzIGEgbGlzdCBvZiByZWd1bGFyIGV4cHJlc3Npb25zIHRlc3RlZCBhZ2FpbnN0IG5hdmlnYXRvci51c2VyQWdlbnRcclxuLy9cclxuLy8gKiogSXQgc2hvdWxkIG9ubHkgYmUgdXNlZCBvbiBicm93c2VyIHRoYXQgKmRvKiBzdXBwb3J0IHRoZSBBUEksIGJ1dFxyXG4vLyBpbmNvcnJlY3RseSAqKlxyXG4vL1xyXG5Ecm9wem9uZS5ibGFja2xpc3RlZEJyb3dzZXJzID0gW1xyXG4vLyBUaGUgbWFjIG9zIGFuZCB3aW5kb3dzIHBob25lIHZlcnNpb24gb2Ygb3BlcmEgMTIgc2VlbXMgdG8gaGF2ZSBhIHByb2JsZW0gd2l0aCB0aGUgRmlsZSBkcmFnJ24nZHJvcCBBUEkuXHJcbi9vcGVyYS4qKE1hY2ludG9zaHxXaW5kb3dzIFBob25lKS4qdmVyc2lvblxcLzEyL2ldO1xyXG5cclxuLy8gQ2hlY2tzIGlmIHRoZSBicm93c2VyIGlzIHN1cHBvcnRlZFxyXG5Ecm9wem9uZS5pc0Jyb3dzZXJTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIGNhcGFibGVCcm93c2VyID0gdHJ1ZTtcclxuXHJcbiAgaWYgKHdpbmRvdy5GaWxlICYmIHdpbmRvdy5GaWxlUmVhZGVyICYmIHdpbmRvdy5GaWxlTGlzdCAmJiB3aW5kb3cuQmxvYiAmJiB3aW5kb3cuRm9ybURhdGEgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcikge1xyXG4gICAgaWYgKCEoXCJjbGFzc0xpc3RcIiBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSkpIHtcclxuICAgICAgY2FwYWJsZUJyb3dzZXIgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSBBUEksIGJ1dCBtYXkgYmUgYmxhY2tsaXN0ZWQuXHJcbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjM1ID0gRHJvcHpvbmUuYmxhY2tsaXN0ZWRCcm93c2VycywgX2lzQXJyYXkzNSA9IHRydWUsIF9pMzcgPSAwLCBfaXRlcmF0b3IzNSA9IF9pc0FycmF5MzUgPyBfaXRlcmF0b3IzNSA6IF9pdGVyYXRvcjM1W1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICAgICAgdmFyIF9yZWYzNDtcclxuXHJcbiAgICAgICAgaWYgKF9pc0FycmF5MzUpIHtcclxuICAgICAgICAgIGlmIChfaTM3ID49IF9pdGVyYXRvcjM1Lmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICBfcmVmMzQgPSBfaXRlcmF0b3IzNVtfaTM3KytdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBfaTM3ID0gX2l0ZXJhdG9yMzUubmV4dCgpO1xyXG4gICAgICAgICAgaWYgKF9pMzcuZG9uZSkgYnJlYWs7XHJcbiAgICAgICAgICBfcmVmMzQgPSBfaTM3LnZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJlZ2V4ID0gX3JlZjM0O1xyXG5cclxuICAgICAgICBpZiAocmVnZXgudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xyXG4gICAgICAgICAgY2FwYWJsZUJyb3dzZXIgPSBmYWxzZTtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBjYXBhYmxlQnJvd3NlciA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNhcGFibGVCcm93c2VyO1xyXG59O1xyXG5cclxuRHJvcHpvbmUuZGF0YVVSSXRvQmxvYiA9IGZ1bmN0aW9uIChkYXRhVVJJKSB7XHJcbiAgLy8gY29udmVydCBiYXNlNjQgdG8gcmF3IGJpbmFyeSBkYXRhIGhlbGQgaW4gYSBzdHJpbmdcclxuICAvLyBkb2Vzbid0IGhhbmRsZSBVUkxFbmNvZGVkIERhdGFVUklzIC0gc2VlIFNPIGFuc3dlciAjNjg1MDI3NiBmb3IgY29kZSB0aGF0IGRvZXMgdGhpc1xyXG4gIHZhciBieXRlU3RyaW5nID0gYXRvYihkYXRhVVJJLnNwbGl0KCcsJylbMV0pO1xyXG5cclxuICAvLyBzZXBhcmF0ZSBvdXQgdGhlIG1pbWUgY29tcG9uZW50XHJcbiAgdmFyIG1pbWVTdHJpbmcgPSBkYXRhVVJJLnNwbGl0KCcsJylbMF0uc3BsaXQoJzonKVsxXS5zcGxpdCgnOycpWzBdO1xyXG5cclxuICAvLyB3cml0ZSB0aGUgYnl0ZXMgb2YgdGhlIHN0cmluZyB0byBhbiBBcnJheUJ1ZmZlclxyXG4gIHZhciBhYiA9IG5ldyBBcnJheUJ1ZmZlcihieXRlU3RyaW5nLmxlbmd0aCk7XHJcbiAgdmFyIGlhID0gbmV3IFVpbnQ4QXJyYXkoYWIpO1xyXG4gIGZvciAodmFyIGkgPSAwLCBlbmQgPSBieXRlU3RyaW5nLmxlbmd0aCwgYXNjID0gMCA8PSBlbmQ7IGFzYyA/IGkgPD0gZW5kIDogaSA+PSBlbmQ7IGFzYyA/IGkrKyA6IGktLSkge1xyXG4gICAgaWFbaV0gPSBieXRlU3RyaW5nLmNoYXJDb2RlQXQoaSk7XHJcbiAgfVxyXG5cclxuICAvLyB3cml0ZSB0aGUgQXJyYXlCdWZmZXIgdG8gYSBibG9iXHJcbiAgcmV0dXJuIG5ldyBCbG9iKFthYl0sIHsgdHlwZTogbWltZVN0cmluZyB9KTtcclxufTtcclxuXHJcbi8vIFJldHVybnMgYW4gYXJyYXkgd2l0aG91dCB0aGUgcmVqZWN0ZWQgaXRlbVxyXG52YXIgd2l0aG91dCA9IGZ1bmN0aW9uIHdpdGhvdXQobGlzdCwgcmVqZWN0ZWRJdGVtKSB7XHJcbiAgcmV0dXJuIGxpc3QuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICByZXR1cm4gaXRlbSAhPT0gcmVqZWN0ZWRJdGVtO1xyXG4gIH0pLm1hcChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgcmV0dXJuIGl0ZW07XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vLyBhYmMtZGVmX2doaSAtPiBhYmNEZWZHaGlcclxudmFyIGNhbWVsaXplID0gZnVuY3Rpb24gY2FtZWxpemUoc3RyKSB7XHJcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bXFwtX10oXFx3KS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcclxuICAgIHJldHVybiBtYXRjaC5jaGFyQXQoMSkudG9VcHBlckNhc2UoKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8vIENyZWF0ZXMgYW4gZWxlbWVudCBmcm9tIHN0cmluZ1xyXG5Ecm9wem9uZS5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKHN0cmluZykge1xyXG4gIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGRpdi5pbm5lckhUTUwgPSBzdHJpbmc7XHJcbiAgcmV0dXJuIGRpdi5jaGlsZE5vZGVzWzBdO1xyXG59O1xyXG5cclxuLy8gVGVzdHMgaWYgZ2l2ZW4gZWxlbWVudCBpcyBpbnNpZGUgKG9yIHNpbXBseSBpcykgdGhlIGNvbnRhaW5lclxyXG5Ecm9wem9uZS5lbGVtZW50SW5zaWRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNvbnRhaW5lcikge1xyXG4gIGlmIChlbGVtZW50ID09PSBjb250YWluZXIpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gLy8gQ29mZmVlc2NyaXB0IGRvZXNuJ3Qgc3VwcG9ydCBkby93aGlsZSBsb29wc1xyXG4gIHdoaWxlIChlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlKSB7XHJcbiAgICBpZiAoZWxlbWVudCA9PT0gY29udGFpbmVyKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gZmFsc2U7XHJcbn07XHJcblxyXG5Ecm9wem9uZS5nZXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsLCBuYW1lKSB7XHJcbiAgdmFyIGVsZW1lbnQgPSB2b2lkIDA7XHJcbiAgaWYgKHR5cGVvZiBlbCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xyXG4gIH0gZWxzZSBpZiAoZWwubm9kZVR5cGUgIT0gbnVsbCkge1xyXG4gICAgZWxlbWVudCA9IGVsO1xyXG4gIH1cclxuICBpZiAoZWxlbWVudCA9PSBudWxsKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGBcIiArIG5hbWUgKyBcImAgb3B0aW9uIHByb3ZpZGVkLiBQbGVhc2UgcHJvdmlkZSBhIENTUyBzZWxlY3RvciBvciBhIHBsYWluIEhUTUwgZWxlbWVudC5cIik7XHJcbiAgfVxyXG4gIHJldHVybiBlbGVtZW50O1xyXG59O1xyXG5cclxuRHJvcHpvbmUuZ2V0RWxlbWVudHMgPSBmdW5jdGlvbiAoZWxzLCBuYW1lKSB7XHJcbiAgdmFyIGVsID0gdm9pZCAwLFxyXG4gICAgICBlbGVtZW50cyA9IHZvaWQgMDtcclxuICBpZiAoZWxzIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgIGVsZW1lbnRzID0gW107XHJcbiAgICB0cnkge1xyXG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3IzNiA9IGVscywgX2lzQXJyYXkzNiA9IHRydWUsIF9pMzggPSAwLCBfaXRlcmF0b3IzNiA9IF9pc0FycmF5MzYgPyBfaXRlcmF0b3IzNiA6IF9pdGVyYXRvcjM2W1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICAgICAgaWYgKF9pc0FycmF5MzYpIHtcclxuICAgICAgICAgIGlmIChfaTM4ID49IF9pdGVyYXRvcjM2Lmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICBlbCA9IF9pdGVyYXRvcjM2W19pMzgrK107XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIF9pMzggPSBfaXRlcmF0b3IzNi5uZXh0KCk7XHJcbiAgICAgICAgICBpZiAoX2kzOC5kb25lKSBicmVhaztcclxuICAgICAgICAgIGVsID0gX2kzOC52YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsZW1lbnRzLnB1c2godGhpcy5nZXRFbGVtZW50KGVsLCBuYW1lKSk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgZWxlbWVudHMgPSBudWxsO1xyXG4gICAgfVxyXG4gIH0gZWxzZSBpZiAodHlwZW9mIGVscyA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgZWxlbWVudHMgPSBbXTtcclxuICAgIGZvciAodmFyIF9pdGVyYXRvcjM3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbHMpLCBfaXNBcnJheTM3ID0gdHJ1ZSwgX2kzOSA9IDAsIF9pdGVyYXRvcjM3ID0gX2lzQXJyYXkzNyA/IF9pdGVyYXRvcjM3IDogX2l0ZXJhdG9yMzdbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcclxuICAgICAgaWYgKF9pc0FycmF5MzcpIHtcclxuICAgICAgICBpZiAoX2kzOSA+PSBfaXRlcmF0b3IzNy5sZW5ndGgpIGJyZWFrO1xyXG4gICAgICAgIGVsID0gX2l0ZXJhdG9yMzdbX2kzOSsrXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBfaTM5ID0gX2l0ZXJhdG9yMzcubmV4dCgpO1xyXG4gICAgICAgIGlmIChfaTM5LmRvbmUpIGJyZWFrO1xyXG4gICAgICAgIGVsID0gX2kzOS52YWx1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZWxlbWVudHMucHVzaChlbCk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIGlmIChlbHMubm9kZVR5cGUgIT0gbnVsbCkge1xyXG4gICAgZWxlbWVudHMgPSBbZWxzXTtcclxuICB9XHJcblxyXG4gIGlmIChlbGVtZW50cyA9PSBudWxsIHx8ICFlbGVtZW50cy5sZW5ndGgpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYFwiICsgbmFtZSArIFwiYCBvcHRpb24gcHJvdmlkZWQuIFBsZWFzZSBwcm92aWRlIGEgQ1NTIHNlbGVjdG9yLCBhIHBsYWluIEhUTUwgZWxlbWVudCBvciBhIGxpc3Qgb2YgdGhvc2UuXCIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGVsZW1lbnRzO1xyXG59O1xyXG5cclxuLy8gQXNrcyB0aGUgdXNlciB0aGUgcXVlc3Rpb24gYW5kIGNhbGxzIGFjY2VwdGVkIG9yIHJlamVjdGVkIGFjY29yZGluZ2x5XHJcbi8vXHJcbi8vIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGp1c3QgdXNlcyBgd2luZG93LmNvbmZpcm1gIGFuZCB0aGVuIGNhbGxzIHRoZVxyXG4vLyBhcHByb3ByaWF0ZSBjYWxsYmFjay5cclxuRHJvcHpvbmUuY29uZmlybSA9IGZ1bmN0aW9uIChxdWVzdGlvbiwgYWNjZXB0ZWQsIHJlamVjdGVkKSB7XHJcbiAgaWYgKHdpbmRvdy5jb25maXJtKHF1ZXN0aW9uKSkge1xyXG4gICAgcmV0dXJuIGFjY2VwdGVkKCk7XHJcbiAgfSBlbHNlIGlmIChyZWplY3RlZCAhPSBudWxsKSB7XHJcbiAgICByZXR1cm4gcmVqZWN0ZWQoKTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBWYWxpZGF0ZXMgdGhlIG1pbWUgdHlwZSBsaWtlIHRoaXM6XHJcbi8vXHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvSFRNTC9FbGVtZW50L2lucHV0I2F0dHItYWNjZXB0XHJcbkRyb3B6b25lLmlzVmFsaWRGaWxlID0gZnVuY3Rpb24gKGZpbGUsIGFjY2VwdGVkRmlsZXMpIHtcclxuICBpZiAoIWFjY2VwdGVkRmlsZXMpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gLy8gSWYgdGhlcmUgYXJlIG5vIGFjY2VwdGVkIG1pbWUgdHlwZXMsIGl0J3MgT0tcclxuICBhY2NlcHRlZEZpbGVzID0gYWNjZXB0ZWRGaWxlcy5zcGxpdChcIixcIik7XHJcblxyXG4gIHZhciBtaW1lVHlwZSA9IGZpbGUudHlwZTtcclxuICB2YXIgYmFzZU1pbWVUeXBlID0gbWltZVR5cGUucmVwbGFjZSgvXFwvLiokLywgXCJcIik7XHJcblxyXG4gIGZvciAodmFyIF9pdGVyYXRvcjM4ID0gYWNjZXB0ZWRGaWxlcywgX2lzQXJyYXkzOCA9IHRydWUsIF9pNDAgPSAwLCBfaXRlcmF0b3IzOCA9IF9pc0FycmF5MzggPyBfaXRlcmF0b3IzOCA6IF9pdGVyYXRvcjM4W1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XHJcbiAgICB2YXIgX3JlZjM1O1xyXG5cclxuICAgIGlmIChfaXNBcnJheTM4KSB7XHJcbiAgICAgIGlmIChfaTQwID49IF9pdGVyYXRvcjM4Lmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgIF9yZWYzNSA9IF9pdGVyYXRvcjM4W19pNDArK107XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBfaTQwID0gX2l0ZXJhdG9yMzgubmV4dCgpO1xyXG4gICAgICBpZiAoX2k0MC5kb25lKSBicmVhaztcclxuICAgICAgX3JlZjM1ID0gX2k0MC52YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdmFsaWRUeXBlID0gX3JlZjM1O1xyXG5cclxuICAgIHZhbGlkVHlwZSA9IHZhbGlkVHlwZS50cmltKCk7XHJcbiAgICBpZiAodmFsaWRUeXBlLmNoYXJBdCgwKSA9PT0gXCIuXCIpIHtcclxuICAgICAgaWYgKGZpbGUubmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsaWRUeXBlLnRvTG93ZXJDYXNlKCksIGZpbGUubmFtZS5sZW5ndGggLSB2YWxpZFR5cGUubGVuZ3RoKSAhPT0gLTEpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICgvXFwvXFwqJC8udGVzdCh2YWxpZFR5cGUpKSB7XHJcbiAgICAgIC8vIFRoaXMgaXMgc29tZXRoaW5nIGxpa2UgYSBpbWFnZS8qIG1pbWUgdHlwZVxyXG4gICAgICBpZiAoYmFzZU1pbWVUeXBlID09PSB2YWxpZFR5cGUucmVwbGFjZSgvXFwvLiokLywgXCJcIikpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKG1pbWVUeXBlID09PSB2YWxpZFR5cGUpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuLy8gQXVnbWVudCBqUXVlcnlcclxuaWYgKHR5cGVvZiBqUXVlcnkgIT09ICd1bmRlZmluZWQnICYmIGpRdWVyeSAhPT0gbnVsbCkge1xyXG4gIGpRdWVyeS5mbi5kcm9wem9uZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgcmV0dXJuIG5ldyBEcm9wem9uZSh0aGlzLCBvcHRpb25zKTtcclxuICAgIH0pO1xyXG4gIH07XHJcbn1cclxuXHJcbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUgIT09IG51bGwpIHtcclxuICBtb2R1bGUuZXhwb3J0cyA9IERyb3B6b25lO1xyXG59IGVsc2Uge1xyXG4gIHdpbmRvdy5Ecm9wem9uZSA9IERyb3B6b25lO1xyXG59XHJcblxyXG4vLyBEcm9wem9uZSBmaWxlIHN0YXR1cyBjb2Rlc1xyXG5Ecm9wem9uZS5BRERFRCA9IFwiYWRkZWRcIjtcclxuXHJcbkRyb3B6b25lLlFVRVVFRCA9IFwicXVldWVkXCI7XHJcbi8vIEZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS4gTm93LCBpZiBhIGZpbGUgaXMgYWNjZXB0ZWQsIGl0J3MgZWl0aGVyIHF1ZXVlZFxyXG4vLyBvciB1cGxvYWRpbmcuXHJcbkRyb3B6b25lLkFDQ0VQVEVEID0gRHJvcHpvbmUuUVVFVUVEO1xyXG5cclxuRHJvcHpvbmUuVVBMT0FESU5HID0gXCJ1cGxvYWRpbmdcIjtcclxuRHJvcHpvbmUuUFJPQ0VTU0lORyA9IERyb3B6b25lLlVQTE9BRElORzsgLy8gYWxpYXNcclxuXHJcbkRyb3B6b25lLkNBTkNFTEVEID0gXCJjYW5jZWxlZFwiO1xyXG5Ecm9wem9uZS5FUlJPUiA9IFwiZXJyb3JcIjtcclxuRHJvcHpvbmUuU1VDQ0VTUyA9IFwic3VjY2Vzc1wiO1xyXG5cclxuLypcclxuXHJcbiBCdWdmaXggZm9yIGlPUyA2IGFuZCA3XHJcbiBTb3VyY2U6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTE5MjkwOTkvaHRtbDUtY2FudmFzLWRyYXdpbWFnZS1yYXRpby1idWctaW9zXHJcbiBiYXNlZCBvbiB0aGUgd29yayBvZiBodHRwczovL2dpdGh1Yi5jb20vc3RvbWl0YS9pb3MtaW1hZ2VmaWxlLW1lZ2FwaXhlbFxyXG5cclxuICovXHJcblxyXG4vLyBEZXRlY3RpbmcgdmVydGljYWwgc3F1YXNoIGluIGxvYWRlZCBpbWFnZS5cclxuLy8gRml4ZXMgYSBidWcgd2hpY2ggc3F1YXNoIGltYWdlIHZlcnRpY2FsbHkgd2hpbGUgZHJhd2luZyBpbnRvIGNhbnZhcyBmb3Igc29tZSBpbWFnZXMuXHJcbi8vIFRoaXMgaXMgYSBidWcgaW4gaU9TNiBkZXZpY2VzLiBUaGlzIGZ1bmN0aW9uIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3N0b21pdGEvaW9zLWltYWdlZmlsZS1tZWdhcGl4ZWxcclxudmFyIGRldGVjdFZlcnRpY2FsU3F1YXNoID0gZnVuY3Rpb24gZGV0ZWN0VmVydGljYWxTcXVhc2goaW1nKSB7XHJcbiAgdmFyIGl3ID0gaW1nLm5hdHVyYWxXaWR0aDtcclxuICB2YXIgaWggPSBpbWcubmF0dXJhbEhlaWdodDtcclxuICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICBjYW52YXMud2lkdGggPSAxO1xyXG4gIGNhbnZhcy5oZWlnaHQgPSBpaDtcclxuICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7XHJcblxyXG4gIHZhciBfY3R4JGdldEltYWdlRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMSwgMCwgMSwgaWgpLFxyXG4gICAgICBkYXRhID0gX2N0eCRnZXRJbWFnZURhdGEuZGF0YTtcclxuXHJcbiAgLy8gc2VhcmNoIGltYWdlIGVkZ2UgcGl4ZWwgcG9zaXRpb24gaW4gY2FzZSBpdCBpcyBzcXVhc2hlZCB2ZXJ0aWNhbGx5LlxyXG5cclxuXHJcbiAgdmFyIHN5ID0gMDtcclxuICB2YXIgZXkgPSBpaDtcclxuICB2YXIgcHkgPSBpaDtcclxuICB3aGlsZSAocHkgPiBzeSkge1xyXG4gICAgdmFyIGFscGhhID0gZGF0YVsocHkgLSAxKSAqIDQgKyAzXTtcclxuXHJcbiAgICBpZiAoYWxwaGEgPT09IDApIHtcclxuICAgICAgZXkgPSBweTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHN5ID0gcHk7XHJcbiAgICB9XHJcblxyXG4gICAgcHkgPSBleSArIHN5ID4+IDE7XHJcbiAgfVxyXG4gIHZhciByYXRpbyA9IHB5IC8gaWg7XHJcblxyXG4gIGlmIChyYXRpbyA9PT0gMCkge1xyXG4gICAgcmV0dXJuIDE7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiByYXRpbztcclxuICB9XHJcbn07XHJcblxyXG4vLyBBIHJlcGxhY2VtZW50IGZvciBjb250ZXh0LmRyYXdJbWFnZVxyXG4vLyAoYXJncyBhcmUgZm9yIHNvdXJjZSBhbmQgZGVzdGluYXRpb24pLlxyXG52YXIgZHJhd0ltYWdlSU9TRml4ID0gZnVuY3Rpb24gZHJhd0ltYWdlSU9TRml4KGN0eCwgaW1nLCBzeCwgc3ksIHN3LCBzaCwgZHgsIGR5LCBkdywgZGgpIHtcclxuICB2YXIgdmVydFNxdWFzaFJhdGlvID0gZGV0ZWN0VmVydGljYWxTcXVhc2goaW1nKTtcclxuICByZXR1cm4gY3R4LmRyYXdJbWFnZShpbWcsIHN4LCBzeSwgc3csIHNoLCBkeCwgZHksIGR3LCBkaCAvIHZlcnRTcXVhc2hSYXRpbyk7XHJcbn07XHJcblxyXG4vLyBCYXNlZCBvbiBNaW5pZnlKcGVnXHJcbi8vIFNvdXJjZTogaHR0cDovL3d3dy5wZXJyeS5jei9maWxlcy9FeGlmUmVzdG9yZXIuanNcclxuLy8gaHR0cDovL2VsaWNvbi5ibG9nNTcuZmMyLmNvbS9ibG9nLWVudHJ5LTIwNi5odG1sXHJcblxyXG52YXIgRXhpZlJlc3RvcmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgZnVuY3Rpb24gRXhpZlJlc3RvcmUoKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRXhpZlJlc3RvcmUpO1xyXG4gIH1cclxuXHJcbiAgX2NyZWF0ZUNsYXNzKEV4aWZSZXN0b3JlLCBudWxsLCBbe1xyXG4gICAga2V5OiBcImluaXRDbGFzc1wiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRDbGFzcygpIHtcclxuICAgICAgdGhpcy5LRVlfU1RSID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JztcclxuICAgIH1cclxuICB9LCB7XHJcbiAgICBrZXk6IFwiZW5jb2RlNjRcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmNvZGU2NChpbnB1dCkge1xyXG4gICAgICB2YXIgb3V0cHV0ID0gJyc7XHJcbiAgICAgIHZhciBjaHIxID0gdW5kZWZpbmVkO1xyXG4gICAgICB2YXIgY2hyMiA9IHVuZGVmaW5lZDtcclxuICAgICAgdmFyIGNocjMgPSAnJztcclxuICAgICAgdmFyIGVuYzEgPSB1bmRlZmluZWQ7XHJcbiAgICAgIHZhciBlbmMyID0gdW5kZWZpbmVkO1xyXG4gICAgICB2YXIgZW5jMyA9IHVuZGVmaW5lZDtcclxuICAgICAgdmFyIGVuYzQgPSAnJztcclxuICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgIGNocjEgPSBpbnB1dFtpKytdO1xyXG4gICAgICAgIGNocjIgPSBpbnB1dFtpKytdO1xyXG4gICAgICAgIGNocjMgPSBpbnB1dFtpKytdO1xyXG4gICAgICAgIGVuYzEgPSBjaHIxID4+IDI7XHJcbiAgICAgICAgZW5jMiA9IChjaHIxICYgMykgPDwgNCB8IGNocjIgPj4gNDtcclxuICAgICAgICBlbmMzID0gKGNocjIgJiAxNSkgPDwgMiB8IGNocjMgPj4gNjtcclxuICAgICAgICBlbmM0ID0gY2hyMyAmIDYzO1xyXG4gICAgICAgIGlmIChpc05hTihjaHIyKSkge1xyXG4gICAgICAgICAgZW5jMyA9IGVuYzQgPSA2NDtcclxuICAgICAgICB9IGVsc2UgaWYgKGlzTmFOKGNocjMpKSB7XHJcbiAgICAgICAgICBlbmM0ID0gNjQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG91dHB1dCA9IG91dHB1dCArIHRoaXMuS0VZX1NUUi5jaGFyQXQoZW5jMSkgKyB0aGlzLktFWV9TVFIuY2hhckF0KGVuYzIpICsgdGhpcy5LRVlfU1RSLmNoYXJBdChlbmMzKSArIHRoaXMuS0VZX1NUUi5jaGFyQXQoZW5jNCk7XHJcbiAgICAgICAgY2hyMSA9IGNocjIgPSBjaHIzID0gJyc7XHJcbiAgICAgICAgZW5jMSA9IGVuYzIgPSBlbmMzID0gZW5jNCA9ICcnO1xyXG4gICAgICAgIGlmICghKGkgPCBpbnB1dC5sZW5ndGgpKSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH1cclxuICB9LCB7XHJcbiAgICBrZXk6IFwicmVzdG9yZVwiLFxyXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc3RvcmUob3JpZ0ZpbGVCYXNlNjQsIHJlc2l6ZWRGaWxlQmFzZTY0KSB7XHJcbiAgICAgIGlmICghb3JpZ0ZpbGVCYXNlNjQubWF0Y2goJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsJykpIHtcclxuICAgICAgICByZXR1cm4gcmVzaXplZEZpbGVCYXNlNjQ7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIHJhd0ltYWdlID0gdGhpcy5kZWNvZGU2NChvcmlnRmlsZUJhc2U2NC5yZXBsYWNlKCdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCcsICcnKSk7XHJcbiAgICAgIHZhciBzZWdtZW50cyA9IHRoaXMuc2xpY2UyU2VnbWVudHMocmF3SW1hZ2UpO1xyXG4gICAgICB2YXIgaW1hZ2UgPSB0aGlzLmV4aWZNYW5pcHVsYXRpb24ocmVzaXplZEZpbGVCYXNlNjQsIHNlZ21lbnRzKTtcclxuICAgICAgcmV0dXJuIFwiZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxcIiArIHRoaXMuZW5jb2RlNjQoaW1hZ2UpO1xyXG4gICAgfVxyXG4gIH0sIHtcclxuICAgIGtleTogXCJleGlmTWFuaXB1bGF0aW9uXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gZXhpZk1hbmlwdWxhdGlvbihyZXNpemVkRmlsZUJhc2U2NCwgc2VnbWVudHMpIHtcclxuICAgICAgdmFyIGV4aWZBcnJheSA9IHRoaXMuZ2V0RXhpZkFycmF5KHNlZ21lbnRzKTtcclxuICAgICAgdmFyIG5ld0ltYWdlQXJyYXkgPSB0aGlzLmluc2VydEV4aWYocmVzaXplZEZpbGVCYXNlNjQsIGV4aWZBcnJheSk7XHJcbiAgICAgIHZhciBhQnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkobmV3SW1hZ2VBcnJheSk7XHJcbiAgICAgIHJldHVybiBhQnVmZmVyO1xyXG4gICAgfVxyXG4gIH0sIHtcclxuICAgIGtleTogXCJnZXRFeGlmQXJyYXlcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRFeGlmQXJyYXkoc2VnbWVudHMpIHtcclxuICAgICAgdmFyIHNlZyA9IHVuZGVmaW5lZDtcclxuICAgICAgdmFyIHggPSAwO1xyXG4gICAgICB3aGlsZSAoeCA8IHNlZ21lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgIHNlZyA9IHNlZ21lbnRzW3hdO1xyXG4gICAgICAgIGlmIChzZWdbMF0gPT09IDI1NSAmIHNlZ1sxXSA9PT0gMjI1KSB7XHJcbiAgICAgICAgICByZXR1cm4gc2VnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB4Kys7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gIH0sIHtcclxuICAgIGtleTogXCJpbnNlcnRFeGlmXCIsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5zZXJ0RXhpZihyZXNpemVkRmlsZUJhc2U2NCwgZXhpZkFycmF5KSB7XHJcbiAgICAgIHZhciBpbWFnZURhdGEgPSByZXNpemVkRmlsZUJhc2U2NC5yZXBsYWNlKCdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCcsICcnKTtcclxuICAgICAgdmFyIGJ1ZiA9IHRoaXMuZGVjb2RlNjQoaW1hZ2VEYXRhKTtcclxuICAgICAgdmFyIHNlcGFyYXRlUG9pbnQgPSBidWYuaW5kZXhPZigyNTUsIDMpO1xyXG4gICAgICB2YXIgbWFlID0gYnVmLnNsaWNlKDAsIHNlcGFyYXRlUG9pbnQpO1xyXG4gICAgICB2YXIgYXRvID0gYnVmLnNsaWNlKHNlcGFyYXRlUG9pbnQpO1xyXG4gICAgICB2YXIgYXJyYXkgPSBtYWU7XHJcbiAgICAgIGFycmF5ID0gYXJyYXkuY29uY2F0KGV4aWZBcnJheSk7XHJcbiAgICAgIGFycmF5ID0gYXJyYXkuY29uY2F0KGF0byk7XHJcbiAgICAgIHJldHVybiBhcnJheTtcclxuICAgIH1cclxuICB9LCB7XHJcbiAgICBrZXk6IFwic2xpY2UyU2VnbWVudHNcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBzbGljZTJTZWdtZW50cyhyYXdJbWFnZUFycmF5KSB7XHJcbiAgICAgIHZhciBoZWFkID0gMDtcclxuICAgICAgdmFyIHNlZ21lbnRzID0gW107XHJcbiAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgdmFyIGxlbmd0aDtcclxuICAgICAgICBpZiAocmF3SW1hZ2VBcnJheVtoZWFkXSA9PT0gMjU1ICYgcmF3SW1hZ2VBcnJheVtoZWFkICsgMV0gPT09IDIxOCkge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyYXdJbWFnZUFycmF5W2hlYWRdID09PSAyNTUgJiByYXdJbWFnZUFycmF5W2hlYWQgKyAxXSA9PT0gMjE2KSB7XHJcbiAgICAgICAgICBoZWFkICs9IDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxlbmd0aCA9IHJhd0ltYWdlQXJyYXlbaGVhZCArIDJdICogMjU2ICsgcmF3SW1hZ2VBcnJheVtoZWFkICsgM107XHJcbiAgICAgICAgICB2YXIgZW5kUG9pbnQgPSBoZWFkICsgbGVuZ3RoICsgMjtcclxuICAgICAgICAgIHZhciBzZWcgPSByYXdJbWFnZUFycmF5LnNsaWNlKGhlYWQsIGVuZFBvaW50KTtcclxuICAgICAgICAgIHNlZ21lbnRzLnB1c2goc2VnKTtcclxuICAgICAgICAgIGhlYWQgPSBlbmRQb2ludDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGhlYWQgPiByYXdJbWFnZUFycmF5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzZWdtZW50cztcclxuICAgIH1cclxuICB9LCB7XHJcbiAgICBrZXk6IFwiZGVjb2RlNjRcIixcclxuICAgIHZhbHVlOiBmdW5jdGlvbiBkZWNvZGU2NChpbnB1dCkge1xyXG4gICAgICB2YXIgb3V0cHV0ID0gJyc7XHJcbiAgICAgIHZhciBjaHIxID0gdW5kZWZpbmVkO1xyXG4gICAgICB2YXIgY2hyMiA9IHVuZGVmaW5lZDtcclxuICAgICAgdmFyIGNocjMgPSAnJztcclxuICAgICAgdmFyIGVuYzEgPSB1bmRlZmluZWQ7XHJcbiAgICAgIHZhciBlbmMyID0gdW5kZWZpbmVkO1xyXG4gICAgICB2YXIgZW5jMyA9IHVuZGVmaW5lZDtcclxuICAgICAgdmFyIGVuYzQgPSAnJztcclxuICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICB2YXIgYnVmID0gW107XHJcbiAgICAgIC8vIHJlbW92ZSBhbGwgY2hhcmFjdGVycyB0aGF0IGFyZSBub3QgQS1aLCBhLXosIDAtOSwgKywgLywgb3IgPVxyXG4gICAgICB2YXIgYmFzZTY0dGVzdCA9IC9bXkEtWmEtejAtOVxcK1xcL1xcPV0vZztcclxuICAgICAgaWYgKGJhc2U2NHRlc3QuZXhlYyhpbnB1dCkpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1RoZXJlIHdlcmUgaW52YWxpZCBiYXNlNjQgY2hhcmFjdGVycyBpbiB0aGUgaW5wdXQgdGV4dC5cXG5WYWxpZCBiYXNlNjQgY2hhcmFjdGVycyBhcmUgQS1aLCBhLXosIDAtOSwgXFwnK1xcJywgXFwnL1xcJyxhbmQgXFwnPVxcJ1xcbkV4cGVjdCBlcnJvcnMgaW4gZGVjb2RpbmcuJyk7XHJcbiAgICAgIH1cclxuICAgICAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKC9bXkEtWmEtejAtOVxcK1xcL1xcPV0vZywgJycpO1xyXG4gICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgIGVuYzEgPSB0aGlzLktFWV9TVFIuaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7XHJcbiAgICAgICAgZW5jMiA9IHRoaXMuS0VZX1NUUi5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTtcclxuICAgICAgICBlbmMzID0gdGhpcy5LRVlfU1RSLmluZGV4T2YoaW5wdXQuY2hhckF0KGkrKykpO1xyXG4gICAgICAgIGVuYzQgPSB0aGlzLktFWV9TVFIuaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7XHJcbiAgICAgICAgY2hyMSA9IGVuYzEgPDwgMiB8IGVuYzIgPj4gNDtcclxuICAgICAgICBjaHIyID0gKGVuYzIgJiAxNSkgPDwgNCB8IGVuYzMgPj4gMjtcclxuICAgICAgICBjaHIzID0gKGVuYzMgJiAzKSA8PCA2IHwgZW5jNDtcclxuICAgICAgICBidWYucHVzaChjaHIxKTtcclxuICAgICAgICBpZiAoZW5jMyAhPT0gNjQpIHtcclxuICAgICAgICAgIGJ1Zi5wdXNoKGNocjIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZW5jNCAhPT0gNjQpIHtcclxuICAgICAgICAgIGJ1Zi5wdXNoKGNocjMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaHIxID0gY2hyMiA9IGNocjMgPSAnJztcclxuICAgICAgICBlbmMxID0gZW5jMiA9IGVuYzMgPSBlbmM0ID0gJyc7XHJcbiAgICAgICAgaWYgKCEoaSA8IGlucHV0Lmxlbmd0aCkpIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYnVmO1xyXG4gICAgfVxyXG4gIH1dKTtcclxuXHJcbiAgcmV0dXJuIEV4aWZSZXN0b3JlO1xyXG59KCk7XHJcblxyXG5FeGlmUmVzdG9yZS5pbml0Q2xhc3MoKTtcclxuXHJcbi8qXHJcbiAqIGNvbnRlbnRsb2FkZWQuanNcclxuICpcclxuICogQXV0aG9yOiBEaWVnbyBQZXJpbmkgKGRpZWdvLnBlcmluaSBhdCBnbWFpbC5jb20pXHJcbiAqIFN1bW1hcnk6IGNyb3NzLWJyb3dzZXIgd3JhcHBlciBmb3IgRE9NQ29udGVudExvYWRlZFxyXG4gKiBVcGRhdGVkOiAyMDEwMTAyMFxyXG4gKiBMaWNlbnNlOiBNSVRcclxuICogVmVyc2lvbjogMS4yXHJcbiAqXHJcbiAqIFVSTDpcclxuICogaHR0cDovL2phdmFzY3JpcHQubndib3guY29tL0NvbnRlbnRMb2FkZWQvXHJcbiAqIGh0dHA6Ly9qYXZhc2NyaXB0Lm53Ym94LmNvbS9Db250ZW50TG9hZGVkL01JVC1MSUNFTlNFXHJcbiAqL1xyXG5cclxuLy8gQHdpbiB3aW5kb3cgcmVmZXJlbmNlXHJcbi8vIEBmbiBmdW5jdGlvbiByZWZlcmVuY2VcclxudmFyIGNvbnRlbnRMb2FkZWQgPSBmdW5jdGlvbiBjb250ZW50TG9hZGVkKHdpbiwgZm4pIHtcclxuICB2YXIgZG9uZSA9IGZhbHNlO1xyXG4gIHZhciB0b3AgPSB0cnVlO1xyXG4gIHZhciBkb2MgPSB3aW4uZG9jdW1lbnQ7XHJcbiAgdmFyIHJvb3QgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xyXG4gIHZhciBhZGQgPSBkb2MuYWRkRXZlbnRMaXN0ZW5lciA/IFwiYWRkRXZlbnRMaXN0ZW5lclwiIDogXCJhdHRhY2hFdmVudFwiO1xyXG4gIHZhciByZW0gPSBkb2MuYWRkRXZlbnRMaXN0ZW5lciA/IFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiIDogXCJkZXRhY2hFdmVudFwiO1xyXG4gIHZhciBwcmUgPSBkb2MuYWRkRXZlbnRMaXN0ZW5lciA/IFwiXCIgOiBcIm9uXCI7XHJcbiAgdmFyIGluaXQgPSBmdW5jdGlvbiBpbml0KGUpIHtcclxuICAgIGlmIChlLnR5cGUgPT09IFwicmVhZHlzdGF0ZWNoYW5nZVwiICYmIGRvYy5yZWFkeVN0YXRlICE9PSBcImNvbXBsZXRlXCIpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgKGUudHlwZSA9PT0gXCJsb2FkXCIgPyB3aW4gOiBkb2MpW3JlbV0ocHJlICsgZS50eXBlLCBpbml0LCBmYWxzZSk7XHJcbiAgICBpZiAoIWRvbmUgJiYgKGRvbmUgPSB0cnVlKSkge1xyXG4gICAgICByZXR1cm4gZm4uY2FsbCh3aW4sIGUudHlwZSB8fCBlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgcG9sbCA9IGZ1bmN0aW9uIHBvbGwoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICByb290LmRvU2Nyb2xsKFwibGVmdFwiKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgc2V0VGltZW91dChwb2xsLCA1MCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHJldHVybiBpbml0KFwicG9sbFwiKTtcclxuICB9O1xyXG5cclxuICBpZiAoZG9jLnJlYWR5U3RhdGUgIT09IFwiY29tcGxldGVcIikge1xyXG4gICAgaWYgKGRvYy5jcmVhdGVFdmVudE9iamVjdCAmJiByb290LmRvU2Nyb2xsKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgdG9wID0gIXdpbi5mcmFtZUVsZW1lbnQ7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7fVxyXG4gICAgICBpZiAodG9wKSB7XHJcbiAgICAgICAgcG9sbCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBkb2NbYWRkXShwcmUgKyBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgaW5pdCwgZmFsc2UpO1xyXG4gICAgZG9jW2FkZF0ocHJlICsgXCJyZWFkeXN0YXRlY2hhbmdlXCIsIGluaXQsIGZhbHNlKTtcclxuICAgIHJldHVybiB3aW5bYWRkXShwcmUgKyBcImxvYWRcIiwgaW5pdCwgZmFsc2UpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEFzIGEgc2luZ2xlIGZ1bmN0aW9uIHRvIGJlIGFibGUgdG8gd3JpdGUgdGVzdHMuXHJcbkRyb3B6b25lLl9hdXRvRGlzY292ZXJGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICBpZiAoRHJvcHpvbmUuYXV0b0Rpc2NvdmVyKSB7XHJcbiAgICByZXR1cm4gRHJvcHpvbmUuZGlzY292ZXIoKTtcclxuICB9XHJcbn07XHJcbmNvbnRlbnRMb2FkZWQod2luZG93LCBEcm9wem9uZS5fYXV0b0Rpc2NvdmVyRnVuY3Rpb24pO1xyXG5cclxuZnVuY3Rpb24gX19ndWFyZF9fKHZhbHVlLCB0cmFuc2Zvcm0pIHtcclxuICByZXR1cm4gdHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSAhPT0gbnVsbCA/IHRyYW5zZm9ybSh2YWx1ZSkgOiB1bmRlZmluZWQ7XHJcbn1cclxuZnVuY3Rpb24gX19ndWFyZE1ldGhvZF9fKG9iaiwgbWV0aG9kTmFtZSwgdHJhbnNmb3JtKSB7XHJcbiAgaWYgKHR5cGVvZiBvYmogIT09ICd1bmRlZmluZWQnICYmIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqW21ldGhvZE5hbWVdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICByZXR1cm4gdHJhbnNmb3JtKG9iaiwgbWV0aG9kTmFtZSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Modules/Media/node_modules/dropzone/dist/dropzone.js\n");

/***/ }),

/***/ "./Modules/Media/Resources/assets/admin/js/ImagePicker.js":
/*!****************************************************************!*\
  !*** ./Modules/Media/Resources/assets/admin/js/ImagePicker.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ _default)\n/* harmony export */ });\n/* harmony import */ var _MediaPicker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MediaPicker */ \"./Modules/Media/Resources/assets/admin/js/MediaPicker.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nvar _default = /*#__PURE__*/function () {\n  function _default() {\n    var _this = this;\n    _classCallCheck(this, _default);\n    $('.image-picker').on('click', function (e) {\n      _this.pickImage(e);\n    });\n    this.sortable();\n    this.removeImageEventListener();\n  }\n  _createClass(_default, [{\n    key: \"pickImage\",\n    value: function pickImage(e) {\n      var _this2 = this;\n      var inputName = e.currentTarget.dataset.inputName;\n      var multiple = e.currentTarget.hasAttribute('data-multiple');\n      var picker = new _MediaPicker__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n        type: 'image',\n        multiple: multiple\n      });\n      picker.on('select', function (file) {\n        _this2.addImage(inputName, file, multiple, e.currentTarget);\n      });\n    }\n  }, {\n    key: \"addImage\",\n    value: function addImage(inputName, file, multiple, target) {\n      var html = this.getTemplate(inputName, file);\n      if (multiple) {\n        var multipleImagesWrapper = $(target).next('.multiple-images');\n        multipleImagesWrapper.find('.image-holder.placeholder').remove();\n        multipleImagesWrapper.find('.image-list').append(html);\n      } else {\n        $(target).siblings('.single-image').html(html);\n      }\n    }\n  }, {\n    key: \"getTemplate\",\n    value: function getTemplate(inputName, file) {\n      return $(\"\\n            <div class=\\\"image-holder\\\">\\n                <img src=\\\"\".concat(file.path, \"\\\">\\n                <button type=\\\"button\\\" class=\\\"btn remove-image\\\"></button>\\n                <input type=\\\"hidden\\\" name=\\\"\").concat(inputName, \"\\\" value=\\\"\").concat(file.id, \"\\\">\\n            </div>\\n        \"));\n    }\n  }, {\n    key: \"sortable\",\n    value: function sortable() {\n      var imageList = $('.image-list');\n      if (imageList.length > 0) {\n        Sortable.create(imageList[0], {\n          animation: 150\n        });\n      }\n    }\n  }, {\n    key: \"removeImageEventListener\",\n    value: function removeImageEventListener() {\n      var _this3 = this;\n      $('.image-holder-wrapper').on('click', '.remove-image', function (e) {\n        e.preventDefault();\n        var imageHolderWrapper = $(e.currentTarget).closest('.image-holder-wrapper');\n        if (imageHolderWrapper.find('.image-holder').length === 1) {\n          imageHolderWrapper.html(_this3.getImagePlaceholder(e.currentTarget.dataset.inputName));\n        }\n        $(e.currentTarget).parent().remove();\n      });\n    }\n  }, {\n    key: \"getImagePlaceholder\",\n    value: function getImagePlaceholder(inputName) {\n      return \"\\n            <div class=\\\"image-holder placeholder cursor-auto\\\">\\n                <i class=\\\"fa fa-picture-o\\\"></i>\\n                <input type=\\\"hidden\\\" name=\\\"\".concat(inputName, \"\\\">\\n            </div>\\n        \");\n    }\n  }]);\n  return _default;\n}();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9Nb2R1bGVzL01lZGlhL1Jlc291cmNlcy9hc3NldHMvYWRtaW4vanMvSW1hZ2VQaWNrZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBd0M7QUFBQSxJQUFBQyxRQUFBO0VBR3BDLFNBQUFBLFNBQUEsRUFBYztJQUFBLElBQUFDLEtBQUE7SUFBQUMsZUFBQSxPQUFBRixRQUFBO0lBQ1ZHLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQ0MsRUFBRSxDQUFDLE9BQU8sRUFBRSxVQUFDQyxDQUFDLEVBQUs7TUFDbENKLEtBQUksQ0FBQ0ssU0FBUyxDQUFDRCxDQUFDLENBQUM7SUFDckIsQ0FBQyxDQUFDO0lBRUYsSUFBSSxDQUFDRSxRQUFRLENBQUMsQ0FBQztJQUNmLElBQUksQ0FBQ0Msd0JBQXdCLENBQUMsQ0FBQztFQUNuQztFQUFDQyxZQUFBLENBQUFULFFBQUE7SUFBQVUsR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQUwsVUFBVUQsQ0FBQyxFQUFFO01BQUEsSUFBQU8sTUFBQTtNQUNULElBQUlDLFNBQVMsR0FBR1IsQ0FBQyxDQUFDUyxhQUFhLENBQUNDLE9BQU8sQ0FBQ0YsU0FBUztNQUNqRCxJQUFJRyxRQUFRLEdBQUdYLENBQUMsQ0FBQ1MsYUFBYSxDQUFDRyxZQUFZLENBQUMsZUFBZSxDQUFDO01BRTVELElBQUlDLE1BQU0sR0FBRyxJQUFJbkIsb0RBQVcsQ0FBQztRQUFFb0IsSUFBSSxFQUFFLE9BQU87UUFBRUgsUUFBUSxFQUFSQTtNQUFTLENBQUMsQ0FBQztNQUV6REUsTUFBTSxDQUFDZCxFQUFFLENBQUMsUUFBUSxFQUFFLFVBQUNnQixJQUFJLEVBQUs7UUFDMUJSLE1BQUksQ0FBQ1MsUUFBUSxDQUFDUixTQUFTLEVBQUVPLElBQUksRUFBRUosUUFBUSxFQUFFWCxDQUFDLENBQUNTLGFBQWEsQ0FBQztNQUM3RCxDQUFDLENBQUM7SUFDTjtFQUFDO0lBQUFKLEdBQUE7SUFBQUMsS0FBQSxFQUVELFNBQUFVLFNBQVNSLFNBQVMsRUFBRU8sSUFBSSxFQUFFSixRQUFRLEVBQUVNLE1BQU0sRUFBRTtNQUN4QyxJQUFJQyxJQUFJLEdBQUcsSUFBSSxDQUFDQyxXQUFXLENBQUNYLFNBQVMsRUFBRU8sSUFBSSxDQUFDO01BRTVDLElBQUlKLFFBQVEsRUFBRTtRQUNWLElBQUlTLHFCQUFxQixHQUFHdEIsQ0FBQyxDQUFDbUIsTUFBTSxDQUFDLENBQUNJLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztRQUU5REQscUJBQXFCLENBQUNFLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxDQUFDQyxNQUFNLENBQUMsQ0FBQztRQUNoRUgscUJBQXFCLENBQUNFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQ0UsTUFBTSxDQUFDTixJQUFJLENBQUM7TUFDMUQsQ0FBQyxNQUFNO1FBQ0hwQixDQUFDLENBQUNtQixNQUFNLENBQUMsQ0FBQ1EsUUFBUSxDQUFDLGVBQWUsQ0FBQyxDQUFDUCxJQUFJLENBQUNBLElBQUksQ0FBQztNQUNsRDtJQUNKO0VBQUM7SUFBQWIsR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQWEsWUFBWVgsU0FBUyxFQUFFTyxJQUFJLEVBQUU7TUFDekIsT0FBT2pCLENBQUMsMkVBQUE0QixNQUFBLENBRVlYLElBQUksQ0FBQ1ksSUFBSSx1SUFBQUQsTUFBQSxDQUVRbEIsU0FBUyxpQkFBQWtCLE1BQUEsQ0FBWVgsSUFBSSxDQUFDYSxFQUFFLHNDQUVoRSxDQUFDO0lBQ047RUFBQztJQUFBdkIsR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQUosU0FBQSxFQUFXO01BQ1AsSUFBSTJCLFNBQVMsR0FBRy9CLENBQUMsQ0FBQyxhQUFhLENBQUM7TUFFaEMsSUFBSStCLFNBQVMsQ0FBQ0MsTUFBTSxHQUFHLENBQUMsRUFBRTtRQUN0QkMsUUFBUSxDQUFDQyxNQUFNLENBQUNILFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtVQUFFSSxTQUFTLEVBQUU7UUFBSSxDQUFDLENBQUM7TUFDckQ7SUFDSjtFQUFDO0lBQUE1QixHQUFBO0lBQUFDLEtBQUEsRUFFRCxTQUFBSCx5QkFBQSxFQUEyQjtNQUFBLElBQUErQixNQUFBO01BQ3ZCcEMsQ0FBQyxDQUFDLHVCQUF1QixDQUFDLENBQUNDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsZUFBZSxFQUFFLFVBQUNDLENBQUMsRUFBSztRQUMzREEsQ0FBQyxDQUFDbUMsY0FBYyxDQUFDLENBQUM7UUFFbEIsSUFBSUMsa0JBQWtCLEdBQUd0QyxDQUFDLENBQUNFLENBQUMsQ0FBQ1MsYUFBYSxDQUFDLENBQUM0QixPQUFPLENBQUMsdUJBQXVCLENBQUM7UUFFNUUsSUFBSUQsa0JBQWtCLENBQUNkLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQ1EsTUFBTSxLQUFLLENBQUMsRUFBRTtVQUN2RE0sa0JBQWtCLENBQUNsQixJQUFJLENBQ25CZ0IsTUFBSSxDQUFDSSxtQkFBbUIsQ0FBQ3RDLENBQUMsQ0FBQ1MsYUFBYSxDQUFDQyxPQUFPLENBQUNGLFNBQVMsQ0FDOUQsQ0FBQztRQUNMO1FBRUFWLENBQUMsQ0FBQ0UsQ0FBQyxDQUFDUyxhQUFhLENBQUMsQ0FBQzhCLE1BQU0sQ0FBQyxDQUFDLENBQUNoQixNQUFNLENBQUMsQ0FBQztNQUN4QyxDQUFDLENBQUM7SUFDTjtFQUFDO0lBQUFsQixHQUFBO0lBQUFDLEtBQUEsRUFFRCxTQUFBZ0Msb0JBQW9COUIsU0FBUyxFQUFFO01BQzNCLCtLQUFBa0IsTUFBQSxDQUdxQ2xCLFNBQVM7SUFHbEQ7RUFBQztFQUFBLE9BQUFiLFFBQUE7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2ZsZWV0Y2FydC8uL01vZHVsZXMvTWVkaWEvUmVzb3VyY2VzL2Fzc2V0cy9hZG1pbi9qcy9JbWFnZVBpY2tlci5qcz8yNWI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNZWRpYVBpY2tlciBmcm9tICcuL01lZGlhUGlja2VyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgICQoJy5pbWFnZS1waWNrZXInKS5vbignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBpY2tJbWFnZShlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zb3J0YWJsZSgpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlSW1hZ2VFdmVudExpc3RlbmVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcGlja0ltYWdlKGUpIHtcclxuICAgICAgICBsZXQgaW5wdXROYW1lID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaW5wdXROYW1lO1xyXG4gICAgICAgIGxldCBtdWx0aXBsZSA9IGUuY3VycmVudFRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEtbXVsdGlwbGUnKTtcclxuXHJcbiAgICAgICAgbGV0IHBpY2tlciA9IG5ldyBNZWRpYVBpY2tlcih7IHR5cGU6ICdpbWFnZScsIG11bHRpcGxlIH0pO1xyXG5cclxuICAgICAgICBwaWNrZXIub24oJ3NlbGVjdCcsIChmaWxlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkSW1hZ2UoaW5wdXROYW1lLCBmaWxlLCBtdWx0aXBsZSwgZS5jdXJyZW50VGFyZ2V0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJbWFnZShpbnB1dE5hbWUsIGZpbGUsIG11bHRpcGxlLCB0YXJnZXQpIHtcclxuICAgICAgICBsZXQgaHRtbCA9IHRoaXMuZ2V0VGVtcGxhdGUoaW5wdXROYW1lLCBmaWxlKTtcclxuXHJcbiAgICAgICAgaWYgKG11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgIGxldCBtdWx0aXBsZUltYWdlc1dyYXBwZXIgPSAkKHRhcmdldCkubmV4dCgnLm11bHRpcGxlLWltYWdlcycpO1xyXG5cclxuICAgICAgICAgICAgbXVsdGlwbGVJbWFnZXNXcmFwcGVyLmZpbmQoJy5pbWFnZS1ob2xkZXIucGxhY2Vob2xkZXInKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgbXVsdGlwbGVJbWFnZXNXcmFwcGVyLmZpbmQoJy5pbWFnZS1saXN0JykuYXBwZW5kKGh0bWwpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQodGFyZ2V0KS5zaWJsaW5ncygnLnNpbmdsZS1pbWFnZScpLmh0bWwoaHRtbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFRlbXBsYXRlKGlucHV0TmFtZSwgZmlsZSkge1xyXG4gICAgICAgIHJldHVybiAkKGBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImltYWdlLWhvbGRlclwiPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2ZpbGUucGF0aH1cIj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIHJlbW92ZS1pbWFnZVwiPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiJHtpbnB1dE5hbWV9XCIgdmFsdWU9XCIke2ZpbGUuaWR9XCI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGApO1xyXG4gICAgfVxyXG5cclxuICAgIHNvcnRhYmxlKCkge1xyXG4gICAgICAgIGxldCBpbWFnZUxpc3QgPSAkKCcuaW1hZ2UtbGlzdCcpO1xyXG5cclxuICAgICAgICBpZiAoaW1hZ2VMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgU29ydGFibGUuY3JlYXRlKGltYWdlTGlzdFswXSwgeyBhbmltYXRpb246IDE1MCB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlSW1hZ2VFdmVudExpc3RlbmVyKCkge1xyXG4gICAgICAgICQoJy5pbWFnZS1ob2xkZXItd3JhcHBlcicpLm9uKCdjbGljaycsICcucmVtb3ZlLWltYWdlJywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGltYWdlSG9sZGVyV3JhcHBlciA9ICQoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcuaW1hZ2UtaG9sZGVyLXdyYXBwZXInKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbWFnZUhvbGRlcldyYXBwZXIuZmluZCgnLmltYWdlLWhvbGRlcicpLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VIb2xkZXJXcmFwcGVyLmh0bWwoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbWFnZVBsYWNlaG9sZGVyKGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmlucHV0TmFtZSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbWFnZVBsYWNlaG9sZGVyKGlucHV0TmFtZSkge1xyXG4gICAgICAgIHJldHVybiBgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbWFnZS1ob2xkZXIgcGxhY2Vob2xkZXIgY3Vyc29yLWF1dG9cIj5cclxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtcGljdHVyZS1vXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiJHtpbnB1dE5hbWV9XCI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk1lZGlhUGlja2VyIiwiX2RlZmF1bHQiLCJfdGhpcyIsIl9jbGFzc0NhbGxDaGVjayIsIiQiLCJvbiIsImUiLCJwaWNrSW1hZ2UiLCJzb3J0YWJsZSIsInJlbW92ZUltYWdlRXZlbnRMaXN0ZW5lciIsIl9jcmVhdGVDbGFzcyIsImtleSIsInZhbHVlIiwiX3RoaXMyIiwiaW5wdXROYW1lIiwiY3VycmVudFRhcmdldCIsImRhdGFzZXQiLCJtdWx0aXBsZSIsImhhc0F0dHJpYnV0ZSIsInBpY2tlciIsInR5cGUiLCJmaWxlIiwiYWRkSW1hZ2UiLCJ0YXJnZXQiLCJodG1sIiwiZ2V0VGVtcGxhdGUiLCJtdWx0aXBsZUltYWdlc1dyYXBwZXIiLCJuZXh0IiwiZmluZCIsInJlbW92ZSIsImFwcGVuZCIsInNpYmxpbmdzIiwiY29uY2F0IiwicGF0aCIsImlkIiwiaW1hZ2VMaXN0IiwibGVuZ3RoIiwiU29ydGFibGUiLCJjcmVhdGUiLCJhbmltYXRpb24iLCJfdGhpczMiLCJwcmV2ZW50RGVmYXVsdCIsImltYWdlSG9sZGVyV3JhcHBlciIsImNsb3Nlc3QiLCJnZXRJbWFnZVBsYWNlaG9sZGVyIiwicGFyZW50IiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Modules/Media/Resources/assets/admin/js/ImagePicker.js\n");

/***/ }),

/***/ "./Modules/Media/Resources/assets/admin/js/MediaPicker.js":
/*!****************************************************************!*\
  !*** ./Modules/Media/Resources/assets/admin/js/MediaPicker.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ _default)\n/* harmony export */ });\n/* harmony import */ var _sass_media_picker_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sass/media-picker.scss */ \"./Modules/Media/Resources/assets/admin/sass/media-picker.scss\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nvar _default = /*#__PURE__*/function () {\n  function _default(options) {\n    _classCallCheck(this, _default);\n    this.options = _.merge({\n      type: null,\n      multiple: false,\n      route: 'admin.file_manager.index',\n      title: trans('media::media.file_manager.title'),\n      message: trans('media::messages.image_has_been_added')\n    }, options);\n    this.events = {};\n    this.frame = this.getFrame();\n    this.appendModalToBody();\n    this.openFrame();\n  }\n  _createClass(_default, [{\n    key: \"on\",\n    value: function on(event, handler) {\n      this.events[event] = handler;\n    }\n  }, {\n    key: \"getFrame\",\n    value: function getFrame() {\n      var src = route(this.options.route, {\n        type: this.options.type,\n        multiple: this.options.multiple\n      });\n      return $(\"<iframe class=\\\"file-manager-iframe\\\" frameborder=\\\"0\\\" src=\\\"\".concat(src, \"\\\"></iframe>\"));\n    }\n  }, {\n    key: \"appendModalToBody\",\n    value: function appendModalToBody() {\n      if ($('.media-picker-modal').length === 1) {\n        return;\n      }\n      $('body').append(this.getModal());\n    }\n  }, {\n    key: \"openFrame\",\n    value: function openFrame() {\n      var _this = this;\n      this.showModal();\n      this.frame.on('load', function () {\n        _this.selectMedia();\n      });\n    }\n  }, {\n    key: \"showModal\",\n    value: function showModal() {\n      var modal = $('.media-picker-modal').modal('show');\n      this.setFrameHeight();\n      this.setModalTitle(modal);\n      this.setModalBody(modal);\n      this.closeModalOnEsc(modal);\n    }\n  }, {\n    key: \"setFrameHeight\",\n    value: function setFrameHeight() {\n      this.frame.css('height', window.innerHeight * 0.8);\n    }\n  }, {\n    key: \"setModalTitle\",\n    value: function setModalTitle(modal) {\n      modal.find('.modal-title').text(this.options.title);\n    }\n  }, {\n    key: \"setModalBody\",\n    value: function setModalBody(modal) {\n      modal.find('.modal-body').html(this.frame);\n    }\n  }, {\n    key: \"closeModalOnEsc\",\n    value: function closeModalOnEsc(modal) {\n      var _this2 = this;\n      $(document).on('keydown', function (e) {\n        if (e.keyCode === 27) {\n          modal.modal('hide');\n        }\n      });\n      this.frame.on('load keydown', function () {\n        _this2.frame.contents().on('keydown', function (e) {\n          if (e.keyCode === 27) {\n            modal.modal('hide');\n          }\n        });\n      });\n    }\n  }, {\n    key: \"selectMedia\",\n    value: function selectMedia() {\n      var _this3 = this;\n      this.frame.contents().find('.table').on('click', '.select-media', function (e) {\n        e.preventDefault();\n        _this3.events['select'](e.currentTarget.dataset);\n        if (_this3.options.multiple) {\n          if (_this3.options.message) {\n            notify('success', _this3.options.message, {\n              context: _this3.frame.contents()\n            });\n          }\n        } else {\n          $('.media-picker-modal').modal('hide');\n        }\n      });\n    }\n  }, {\n    key: \"getModal\",\n    value: function getModal() {\n      return \"\\n            <div class=\\\"media-picker-modal modal fade\\\" role=\\\"dialog\\\">\\n                <div class=\\\"modal-dialog clearfix\\\">\\n                    <div class=\\\"modal-content col-md-10 col-sm-11 clearfix\\\">\\n                        <div class=\\\"row\\\">\\n                            <div class=\\\"modal-header\\\">\\n                                <a type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\">&times;</a>\\n                                <h4 class=\\\"modal-title\\\"></h4>\\n                            </div>\\n\\n                            <div class=\\\"modal-body\\\"></div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        \";\n    }\n  }]);\n  return _default;\n}();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9Nb2R1bGVzL01lZGlhL1Jlc291cmNlcy9hc3NldHMvYWRtaW4vanMvTWVkaWFQaWNrZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBbUM7QUFBQSxJQUFBQSxRQUFBO0VBRy9CLFNBQUFBLFNBQVlDLE9BQU8sRUFBRTtJQUFBQyxlQUFBLE9BQUFGLFFBQUE7SUFDakIsSUFBSSxDQUFDQyxPQUFPLEdBQUdFLENBQUMsQ0FBQ0MsS0FBSyxDQUFDO01BQ25CQyxJQUFJLEVBQUUsSUFBSTtNQUNWQyxRQUFRLEVBQUUsS0FBSztNQUNmQyxLQUFLLEVBQUUsMEJBQTBCO01BQ2pDQyxLQUFLLEVBQUVDLEtBQUssQ0FBQyxpQ0FBaUMsQ0FBQztNQUMvQ0MsT0FBTyxFQUFFRCxLQUFLLENBQUMsc0NBQXNDO0lBQ3pELENBQUMsRUFBRVIsT0FBTyxDQUFDO0lBRVgsSUFBSSxDQUFDVSxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ2hCLElBQUksQ0FBQ0MsS0FBSyxHQUFHLElBQUksQ0FBQ0MsUUFBUSxDQUFDLENBQUM7SUFFNUIsSUFBSSxDQUFDQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ3hCLElBQUksQ0FBQ0MsU0FBUyxDQUFDLENBQUM7RUFDcEI7RUFBQ0MsWUFBQSxDQUFBaEIsUUFBQTtJQUFBaUIsR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQUMsR0FBR0MsS0FBSyxFQUFFQyxPQUFPLEVBQUU7TUFDZixJQUFJLENBQUNWLE1BQU0sQ0FBQ1MsS0FBSyxDQUFDLEdBQUdDLE9BQU87SUFDaEM7RUFBQztJQUFBSixHQUFBO0lBQUFDLEtBQUEsRUFFRCxTQUFBTCxTQUFBLEVBQVc7TUFDUCxJQUFJUyxHQUFHLEdBQUdmLEtBQUssQ0FBQyxJQUFJLENBQUNOLE9BQU8sQ0FBQ00sS0FBSyxFQUFFO1FBQ2hDRixJQUFJLEVBQUUsSUFBSSxDQUFDSixPQUFPLENBQUNJLElBQUk7UUFDdkJDLFFBQVEsRUFBRSxJQUFJLENBQUNMLE9BQU8sQ0FBQ0s7TUFDM0IsQ0FBQyxDQUFDO01BRUYsT0FBT2lCLENBQUMsa0VBQUFDLE1BQUEsQ0FBNkRGLEdBQUcsaUJBQWEsQ0FBQztJQUMxRjtFQUFDO0lBQUFMLEdBQUE7SUFBQUMsS0FBQSxFQUVELFNBQUFKLGtCQUFBLEVBQW9CO01BQ2hCLElBQUlTLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDRSxNQUFNLEtBQUssQ0FBQyxFQUFFO1FBQ3ZDO01BQ0o7TUFFQUYsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDRyxNQUFNLENBQUMsSUFBSSxDQUFDQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0lBQ3JDO0VBQUM7SUFBQVYsR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQUgsVUFBQSxFQUFZO01BQUEsSUFBQWEsS0FBQTtNQUNSLElBQUksQ0FBQ0MsU0FBUyxDQUFDLENBQUM7TUFFaEIsSUFBSSxDQUFDakIsS0FBSyxDQUFDTyxFQUFFLENBQUMsTUFBTSxFQUFFLFlBQU07UUFDeEJTLEtBQUksQ0FBQ0UsV0FBVyxDQUFDLENBQUM7TUFDdEIsQ0FBQyxDQUFDO0lBQ047RUFBQztJQUFBYixHQUFBO0lBQUFDLEtBQUEsRUFFRCxTQUFBVyxVQUFBLEVBQVk7TUFDUixJQUFJRSxLQUFLLEdBQUdSLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDUSxLQUFLLENBQUMsTUFBTSxDQUFDO01BRWxELElBQUksQ0FBQ0MsY0FBYyxDQUFDLENBQUM7TUFDckIsSUFBSSxDQUFDQyxhQUFhLENBQUNGLEtBQUssQ0FBQztNQUN6QixJQUFJLENBQUNHLFlBQVksQ0FBQ0gsS0FBSyxDQUFDO01BQ3hCLElBQUksQ0FBQ0ksZUFBZSxDQUFDSixLQUFLLENBQUM7SUFDL0I7RUFBQztJQUFBZCxHQUFBO0lBQUFDLEtBQUEsRUFFRCxTQUFBYyxlQUFBLEVBQWlCO01BQ2IsSUFBSSxDQUFDcEIsS0FBSyxDQUFDd0IsR0FBRyxDQUFDLFFBQVEsRUFBRUMsTUFBTSxDQUFDQyxXQUFXLEdBQUcsR0FBRyxDQUFDO0lBQ3REO0VBQUM7SUFBQXJCLEdBQUE7SUFBQUMsS0FBQSxFQUVELFNBQUFlLGNBQWNGLEtBQUssRUFBRTtNQUNqQkEsS0FBSyxDQUFDUSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUN2QyxPQUFPLENBQUNPLEtBQUssQ0FBQztJQUN2RDtFQUFDO0lBQUFTLEdBQUE7SUFBQUMsS0FBQSxFQUVELFNBQUFnQixhQUFhSCxLQUFLLEVBQUU7TUFDaEJBLEtBQUssQ0FBQ1EsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDRSxJQUFJLENBQUMsSUFBSSxDQUFDN0IsS0FBSyxDQUFDO0lBQzlDO0VBQUM7SUFBQUssR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQWlCLGdCQUFnQkosS0FBSyxFQUFFO01BQUEsSUFBQVcsTUFBQTtNQUNuQm5CLENBQUMsQ0FBQ29CLFFBQVEsQ0FBQyxDQUFDeEIsRUFBRSxDQUFDLFNBQVMsRUFBRSxVQUFDeUIsQ0FBQyxFQUFLO1FBQzdCLElBQUlBLENBQUMsQ0FBQ0MsT0FBTyxLQUFLLEVBQUUsRUFBRTtVQUNsQmQsS0FBSyxDQUFDQSxLQUFLLENBQUMsTUFBTSxDQUFDO1FBQ3ZCO01BQ0osQ0FBQyxDQUFDO01BRUYsSUFBSSxDQUFDbkIsS0FBSyxDQUFDTyxFQUFFLENBQUMsY0FBYyxFQUFFLFlBQU07UUFDaEN1QixNQUFJLENBQUM5QixLQUFLLENBQUNrQyxRQUFRLENBQUMsQ0FBQyxDQUFDM0IsRUFBRSxDQUFDLFNBQVMsRUFBRSxVQUFDeUIsQ0FBQyxFQUFLO1VBQ3ZDLElBQUlBLENBQUMsQ0FBQ0MsT0FBTyxLQUFLLEVBQUUsRUFBRTtZQUNsQmQsS0FBSyxDQUFDQSxLQUFLLENBQUMsTUFBTSxDQUFDO1VBQ3ZCO1FBQ0osQ0FBQyxDQUFDO01BQ04sQ0FBQyxDQUFDO0lBQ047RUFBQztJQUFBZCxHQUFBO0lBQUFDLEtBQUEsRUFFRCxTQUFBWSxZQUFBLEVBQWM7TUFBQSxJQUFBaUIsTUFBQTtNQUNWLElBQUksQ0FBQ25DLEtBQUssQ0FBQ2tDLFFBQVEsQ0FBQyxDQUFDLENBQUNQLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQ3BCLEVBQUUsQ0FBQyxPQUFPLEVBQUUsZUFBZSxFQUFFLFVBQUN5QixDQUFDLEVBQUs7UUFDckVBLENBQUMsQ0FBQ0ksY0FBYyxDQUFDLENBQUM7UUFFbEJELE1BQUksQ0FBQ3BDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQ2lDLENBQUMsQ0FBQ0ssYUFBYSxDQUFDQyxPQUFPLENBQUM7UUFFOUMsSUFBSUgsTUFBSSxDQUFDOUMsT0FBTyxDQUFDSyxRQUFRLEVBQUU7VUFDdkIsSUFBSXlDLE1BQUksQ0FBQzlDLE9BQU8sQ0FBQ1MsT0FBTyxFQUFFO1lBQ3RCeUMsTUFBTSxDQUFDLFNBQVMsRUFBRUosTUFBSSxDQUFDOUMsT0FBTyxDQUFDUyxPQUFPLEVBQUU7Y0FBRTBDLE9BQU8sRUFBRUwsTUFBSSxDQUFDbkMsS0FBSyxDQUFDa0MsUUFBUSxDQUFDO1lBQUUsQ0FBQyxDQUFDO1VBQy9FO1FBQ0osQ0FBQyxNQUFNO1VBQ0h2QixDQUFDLENBQUMscUJBQXFCLENBQUMsQ0FBQ1EsS0FBSyxDQUFDLE1BQU0sQ0FBQztRQUMxQztNQUNKLENBQUMsQ0FBQztJQUNOO0VBQUM7SUFBQWQsR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQVMsU0FBQSxFQUFXO01BQ1A7SUFnQko7RUFBQztFQUFBLE9BQUEzQixRQUFBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mbGVldGNhcnQvLi9Nb2R1bGVzL01lZGlhL1Jlc291cmNlcy9hc3NldHMvYWRtaW4vanMvTWVkaWFQaWNrZXIuanM/Y2Y1OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJy4uL3Nhc3MvbWVkaWEtcGlja2VyLnNjc3MnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IF8ubWVyZ2Uoe1xyXG4gICAgICAgICAgICB0eXBlOiBudWxsLFxyXG4gICAgICAgICAgICBtdWx0aXBsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHJvdXRlOiAnYWRtaW4uZmlsZV9tYW5hZ2VyLmluZGV4JyxcclxuICAgICAgICAgICAgdGl0bGU6IHRyYW5zKCdtZWRpYTo6bWVkaWEuZmlsZV9tYW5hZ2VyLnRpdGxlJyksXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRyYW5zKCdtZWRpYTo6bWVzc2FnZXMuaW1hZ2VfaGFzX2JlZW5fYWRkZWQnKSxcclxuICAgICAgICB9LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgdGhpcy5ldmVudHMgPSB7fTtcclxuICAgICAgICB0aGlzLmZyYW1lID0gdGhpcy5nZXRGcmFtZSgpO1xyXG5cclxuICAgICAgICB0aGlzLmFwcGVuZE1vZGFsVG9Cb2R5KCk7XHJcbiAgICAgICAgdGhpcy5vcGVuRnJhbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbihldmVudCwgaGFuZGxlcikge1xyXG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IGhhbmRsZXI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RnJhbWUoKSB7XHJcbiAgICAgICAgbGV0IHNyYyA9IHJvdXRlKHRoaXMub3B0aW9ucy5yb3V0ZSwge1xyXG4gICAgICAgICAgICB0eXBlOiB0aGlzLm9wdGlvbnMudHlwZSxcclxuICAgICAgICAgICAgbXVsdGlwbGU6IHRoaXMub3B0aW9ucy5tdWx0aXBsZSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuICQoYDxpZnJhbWUgY2xhc3M9XCJmaWxlLW1hbmFnZXItaWZyYW1lXCIgZnJhbWVib3JkZXI9XCIwXCIgc3JjPVwiJHtzcmN9XCI+PC9pZnJhbWU+YCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwZW5kTW9kYWxUb0JvZHkoKSB7XHJcbiAgICAgICAgaWYgKCQoJy5tZWRpYS1waWNrZXItbW9kYWwnKS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnYm9keScpLmFwcGVuZCh0aGlzLmdldE1vZGFsKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW5GcmFtZSgpIHtcclxuICAgICAgICB0aGlzLnNob3dNb2RhbCgpO1xyXG5cclxuICAgICAgICB0aGlzLmZyYW1lLm9uKCdsb2FkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE1lZGlhKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd01vZGFsKCkge1xyXG4gICAgICAgIGxldCBtb2RhbCA9ICQoJy5tZWRpYS1waWNrZXItbW9kYWwnKS5tb2RhbCgnc2hvdycpO1xyXG5cclxuICAgICAgICB0aGlzLnNldEZyYW1lSGVpZ2h0KCk7XHJcbiAgICAgICAgdGhpcy5zZXRNb2RhbFRpdGxlKG1vZGFsKTtcclxuICAgICAgICB0aGlzLnNldE1vZGFsQm9keShtb2RhbCk7XHJcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsT25Fc2MobW9kYWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEZyYW1lSGVpZ2h0KCkge1xyXG4gICAgICAgIHRoaXMuZnJhbWUuY3NzKCdoZWlnaHQnLCB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldE1vZGFsVGl0bGUobW9kYWwpIHtcclxuICAgICAgICBtb2RhbC5maW5kKCcubW9kYWwtdGl0bGUnKS50ZXh0KHRoaXMub3B0aW9ucy50aXRsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TW9kYWxCb2R5KG1vZGFsKSB7XHJcbiAgICAgICAgbW9kYWwuZmluZCgnLm1vZGFsLWJvZHknKS5odG1sKHRoaXMuZnJhbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlTW9kYWxPbkVzYyhtb2RhbCkge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdrZXlkb3duJywgKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHtcclxuICAgICAgICAgICAgICAgIG1vZGFsLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5mcmFtZS5vbignbG9hZCBrZXlkb3duJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZyYW1lLmNvbnRlbnRzKCkub24oJ2tleWRvd24nLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbC5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3RNZWRpYSgpIHtcclxuICAgICAgICB0aGlzLmZyYW1lLmNvbnRlbnRzKCkuZmluZCgnLnRhYmxlJykub24oJ2NsaWNrJywgJy5zZWxlY3QtbWVkaWEnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50c1snc2VsZWN0J10oZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tdWx0aXBsZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm90aWZ5KCdzdWNjZXNzJywgdGhpcy5vcHRpb25zLm1lc3NhZ2UsIHsgY29udGV4dDogdGhpcy5mcmFtZS5jb250ZW50cygpIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnLm1lZGlhLXBpY2tlci1tb2RhbCcpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRNb2RhbCgpIHtcclxuICAgICAgICByZXR1cm4gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWVkaWEtcGlja2VyLW1vZGFsIG1vZGFsIGZhZGVcIiByb2xlPVwiZGlhbG9nXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nIGNsZWFyZml4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnQgY29sLW1kLTEwIGNvbC1zbS0xMSBjbGVhcmZpeFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPiZ0aW1lczs8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj48L2g0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxufVxyXG4iXSwibmFtZXMiOlsiX2RlZmF1bHQiLCJvcHRpb25zIiwiX2NsYXNzQ2FsbENoZWNrIiwiXyIsIm1lcmdlIiwidHlwZSIsIm11bHRpcGxlIiwicm91dGUiLCJ0aXRsZSIsInRyYW5zIiwibWVzc2FnZSIsImV2ZW50cyIsImZyYW1lIiwiZ2V0RnJhbWUiLCJhcHBlbmRNb2RhbFRvQm9keSIsIm9wZW5GcmFtZSIsIl9jcmVhdGVDbGFzcyIsImtleSIsInZhbHVlIiwib24iLCJldmVudCIsImhhbmRsZXIiLCJzcmMiLCIkIiwiY29uY2F0IiwibGVuZ3RoIiwiYXBwZW5kIiwiZ2V0TW9kYWwiLCJfdGhpcyIsInNob3dNb2RhbCIsInNlbGVjdE1lZGlhIiwibW9kYWwiLCJzZXRGcmFtZUhlaWdodCIsInNldE1vZGFsVGl0bGUiLCJzZXRNb2RhbEJvZHkiLCJjbG9zZU1vZGFsT25Fc2MiLCJjc3MiLCJ3aW5kb3ciLCJpbm5lckhlaWdodCIsImZpbmQiLCJ0ZXh0IiwiaHRtbCIsIl90aGlzMiIsImRvY3VtZW50IiwiZSIsImtleUNvZGUiLCJjb250ZW50cyIsIl90aGlzMyIsInByZXZlbnREZWZhdWx0IiwiY3VycmVudFRhcmdldCIsImRhdGFzZXQiLCJub3RpZnkiLCJjb250ZXh0IiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Modules/Media/Resources/assets/admin/js/MediaPicker.js\n");

/***/ }),

/***/ "./Modules/Media/Resources/assets/admin/js/Uploader.js":
/*!*************************************************************!*\
  !*** ./Modules/Media/Resources/assets/admin/js/Uploader.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ _default)\n/* harmony export */ });\n/* harmony import */ var dropzone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dropzone */ \"./Modules/Media/node_modules/dropzone/dist/dropzone.js\");\n/* harmony import */ var dropzone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dropzone__WEBPACK_IMPORTED_MODULE_0__);\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nvar _default = /*#__PURE__*/function () {\n  function _default() {\n    _classCallCheck(this, _default);\n    (dropzone__WEBPACK_IMPORTED_MODULE_0___default().autoDiscover) = false;\n    this.dropzone = new (dropzone__WEBPACK_IMPORTED_MODULE_0___default())('.dropzone', {\n      url: route('admin.media.store'),\n      autoProcessQueue: true,\n      maxFilesize: FleetCart.maxFileSize\n    });\n    this.dropzone.on('sending', this.sending);\n    this.dropzone.on('success', this.success);\n    this.dropzone.on('error', this.error);\n  }\n  _createClass(_default, [{\n    key: \"sending\",\n    value: function sending(file, xhr) {\n      xhr.timeout = 3600000;\n      $('.alert-danger').remove();\n    }\n  }, {\n    key: \"success\",\n    value: function success() {\n      if (this.getUploadingFiles().length === 0 && this.getQueuedFiles().length === 0) {\n        setTimeout(DataTable.reload, 1000, '#media-table .table');\n      }\n    }\n  }, {\n    key: \"error\",\n    value: function error(file, response) {\n      $('.dz-progress').css('z-index', 1);\n      $(file.previewElement).find('.dz-error-message').text(response.message);\n    }\n  }]);\n  return _default;\n}();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9Nb2R1bGVzL01lZGlhL1Jlc291cmNlcy9hc3NldHMvYWRtaW4vanMvVXBsb2FkZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQWdDO0FBQUEsSUFBQUMsUUFBQTtFQUc1QixTQUFBQSxTQUFBLEVBQWM7SUFBQUMsZUFBQSxPQUFBRCxRQUFBO0lBQ1ZELDhEQUFxQixHQUFHLEtBQUs7SUFFN0IsSUFBSSxDQUFDSSxRQUFRLEdBQUcsSUFBSUosaURBQVEsQ0FBQyxXQUFXLEVBQUU7TUFDdENLLEdBQUcsRUFBRUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDO01BQy9CQyxnQkFBZ0IsRUFBRSxJQUFJO01BQ3RCQyxXQUFXLEVBQUVDLFNBQVMsQ0FBQ0M7SUFDM0IsQ0FBQyxDQUFDO0lBRUYsSUFBSSxDQUFDTixRQUFRLENBQUNPLEVBQUUsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDQyxPQUFPLENBQUM7SUFDekMsSUFBSSxDQUFDUixRQUFRLENBQUNPLEVBQUUsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDRSxPQUFPLENBQUM7SUFDekMsSUFBSSxDQUFDVCxRQUFRLENBQUNPLEVBQUUsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDRyxLQUFLLENBQUM7RUFDekM7RUFBQ0MsWUFBQSxDQUFBZCxRQUFBO0lBQUFlLEdBQUE7SUFBQUMsS0FBQSxFQUVELFNBQUFMLFFBQVFNLElBQUksRUFBRUMsR0FBRyxFQUFFO01BQ2ZBLEdBQUcsQ0FBQ0MsT0FBTyxHQUFHLE9BQU87TUFFckJDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQ0MsTUFBTSxDQUFDLENBQUM7SUFDL0I7RUFBQztJQUFBTixHQUFBO0lBQUFDLEtBQUEsRUFFRCxTQUFBSixRQUFBLEVBQVU7TUFDTixJQUFJLElBQUksQ0FBQ1UsaUJBQWlCLENBQUMsQ0FBQyxDQUFDQyxNQUFNLEtBQUssQ0FBQyxJQUFJLElBQUksQ0FBQ0MsY0FBYyxDQUFDLENBQUMsQ0FBQ0QsTUFBTSxLQUFLLENBQUMsRUFBRTtRQUM3RUUsVUFBVSxDQUFDQyxTQUFTLENBQUNDLE1BQU0sRUFBRSxJQUFJLEVBQUUscUJBQXFCLENBQUM7TUFDN0Q7SUFDSjtFQUFDO0lBQUFaLEdBQUE7SUFBQUMsS0FBQSxFQUVELFNBQUFILE1BQU1JLElBQUksRUFBRVcsUUFBUSxFQUFFO01BQ2xCUixDQUFDLENBQUMsY0FBYyxDQUFDLENBQUNTLEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDO01BQ25DVCxDQUFDLENBQUNILElBQUksQ0FBQ2EsY0FBYyxDQUFDLENBQUNDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDQyxJQUFJLENBQUNKLFFBQVEsQ0FBQ0ssT0FBTyxDQUFDO0lBQzNFO0VBQUM7RUFBQSxPQUFBakMsUUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxlZXRjYXJ0Ly4vTW9kdWxlcy9NZWRpYS9SZXNvdXJjZXMvYXNzZXRzL2FkbWluL2pzL1VwbG9hZGVyLmpzP2UwNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERyb3B6b25lIGZyb20gJ2Ryb3B6b25lJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIERyb3B6b25lLmF1dG9EaXNjb3ZlciA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLmRyb3B6b25lID0gbmV3IERyb3B6b25lKCcuZHJvcHpvbmUnLCB7XHJcbiAgICAgICAgICAgIHVybDogcm91dGUoJ2FkbWluLm1lZGlhLnN0b3JlJyksXHJcbiAgICAgICAgICAgIGF1dG9Qcm9jZXNzUXVldWU6IHRydWUsXHJcbiAgICAgICAgICAgIG1heEZpbGVzaXplOiBGbGVldENhcnQubWF4RmlsZVNpemUsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZHJvcHpvbmUub24oJ3NlbmRpbmcnLCB0aGlzLnNlbmRpbmcpO1xyXG4gICAgICAgIHRoaXMuZHJvcHpvbmUub24oJ3N1Y2Nlc3MnLCB0aGlzLnN1Y2Nlc3MpO1xyXG4gICAgICAgIHRoaXMuZHJvcHpvbmUub24oJ2Vycm9yJywgdGhpcy5lcnJvcik7XHJcbiAgICB9XHJcblxyXG4gICAgc2VuZGluZyhmaWxlLCB4aHIpIHtcclxuICAgICAgICB4aHIudGltZW91dCA9IDM2MDAwMDA7XHJcblxyXG4gICAgICAgICQoJy5hbGVydC1kYW5nZXInKS5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdWNjZXNzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmdldFVwbG9hZGluZ0ZpbGVzKCkubGVuZ3RoID09PSAwICYmIHRoaXMuZ2V0UXVldWVkRmlsZXMoKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChEYXRhVGFibGUucmVsb2FkLCAxMDAwLCAnI21lZGlhLXRhYmxlIC50YWJsZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBlcnJvcihmaWxlLCByZXNwb25zZSkge1xyXG4gICAgICAgICQoJy5kei1wcm9ncmVzcycpLmNzcygnei1pbmRleCcsIDEpO1xyXG4gICAgICAgICQoZmlsZS5wcmV2aWV3RWxlbWVudCkuZmluZCgnLmR6LWVycm9yLW1lc3NhZ2UnKS50ZXh0KHJlc3BvbnNlLm1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJEcm9wem9uZSIsIl9kZWZhdWx0IiwiX2NsYXNzQ2FsbENoZWNrIiwiYXV0b0Rpc2NvdmVyIiwiZHJvcHpvbmUiLCJ1cmwiLCJyb3V0ZSIsImF1dG9Qcm9jZXNzUXVldWUiLCJtYXhGaWxlc2l6ZSIsIkZsZWV0Q2FydCIsIm1heEZpbGVTaXplIiwib24iLCJzZW5kaW5nIiwic3VjY2VzcyIsImVycm9yIiwiX2NyZWF0ZUNsYXNzIiwia2V5IiwidmFsdWUiLCJmaWxlIiwieGhyIiwidGltZW91dCIsIiQiLCJyZW1vdmUiLCJnZXRVcGxvYWRpbmdGaWxlcyIsImxlbmd0aCIsImdldFF1ZXVlZEZpbGVzIiwic2V0VGltZW91dCIsIkRhdGFUYWJsZSIsInJlbG9hZCIsInJlc3BvbnNlIiwiY3NzIiwicHJldmlld0VsZW1lbnQiLCJmaW5kIiwidGV4dCIsIm1lc3NhZ2UiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Modules/Media/Resources/assets/admin/js/Uploader.js\n");

/***/ }),

/***/ "./Modules/Media/Resources/assets/admin/js/main.js":
/*!*********************************************************!*\
  !*** ./Modules/Media/Resources/assets/admin/js/main.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _ImagePicker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ImagePicker */ \"./Modules/Media/Resources/assets/admin/js/ImagePicker.js\");\n/* harmony import */ var _MediaPicker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MediaPicker */ \"./Modules/Media/Resources/assets/admin/js/MediaPicker.js\");\n/* harmony import */ var _Uploader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Uploader */ \"./Modules/Media/Resources/assets/admin/js/Uploader.js\");\n\n\n\nwindow.MediaPicker = _MediaPicker__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\nif ($('.image-picker').length !== 0) {\n  new _ImagePicker__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n}\nif ($('.dropzone').length !== 0) {\n  new _Uploader__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9Nb2R1bGVzL01lZGlhL1Jlc291cmNlcy9hc3NldHMvYWRtaW4vanMvbWFpbi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQXdDO0FBQ0E7QUFDTjtBQUVsQ0csTUFBTSxDQUFDRixXQUFXLEdBQUdBLG9EQUFXO0FBRWhDLElBQUlHLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQ0MsTUFBTSxLQUFLLENBQUMsRUFBRTtFQUNqQyxJQUFJTCxvREFBVyxDQUFDLENBQUM7QUFDckI7QUFFQSxJQUFJSSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUNDLE1BQU0sS0FBSyxDQUFDLEVBQUU7RUFDN0IsSUFBSUgsaURBQVEsQ0FBQyxDQUFDO0FBQ2xCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxlZXRjYXJ0Ly4vTW9kdWxlcy9NZWRpYS9SZXNvdXJjZXMvYXNzZXRzL2FkbWluL2pzL21haW4uanM/MjM5NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSW1hZ2VQaWNrZXIgZnJvbSAnLi9JbWFnZVBpY2tlcic7XHJcbmltcG9ydCBNZWRpYVBpY2tlciBmcm9tICcuL01lZGlhUGlja2VyJztcclxuaW1wb3J0IFVwbG9hZGVyIGZyb20gJy4vVXBsb2FkZXInO1xyXG5cclxud2luZG93Lk1lZGlhUGlja2VyID0gTWVkaWFQaWNrZXI7XHJcblxyXG5pZiAoJCgnLmltYWdlLXBpY2tlcicpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgbmV3IEltYWdlUGlja2VyKCk7XHJcbn1cclxuXHJcbmlmICgkKCcuZHJvcHpvbmUnKS5sZW5ndGggIT09IDApIHtcclxuICAgIG5ldyBVcGxvYWRlcigpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJJbWFnZVBpY2tlciIsIk1lZGlhUGlja2VyIiwiVXBsb2FkZXIiLCJ3aW5kb3ciLCIkIiwibGVuZ3RoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Modules/Media/Resources/assets/admin/js/main.js\n");

/***/ }),

/***/ "./node_modules/laravel-mix/node_modules/css-loader/dist/cjs.js??clonedRuleSet-28[0].rules[0].use[1]!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-28[0].rules[0].use[2]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-28[0].rules[0].use[3]!./Modules/Media/Resources/assets/admin/sass/media-picker.scss":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/laravel-mix/node_modules/css-loader/dist/cjs.js??clonedRuleSet-28[0].rules[0].use[1]!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-28[0].rules[0].use[2]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-28[0].rules[0].use[3]!./Modules/Media/Resources/assets/admin/sass/media-picker.scss ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_laravel_mix_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../../node_modules/laravel-mix/node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ \"./node_modules/laravel-mix/node_modules/css-loader/dist/runtime/cssWithMappingToString.js\");\n/* harmony import */ var _node_modules_laravel_mix_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_laravel_mix_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_laravel_mix_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../../node_modules/laravel-mix/node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/laravel-mix/node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_laravel_mix_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_laravel_mix_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_laravel_mix_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_laravel_mix_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".file-manager-iframe {\\n  width: 100%;\\n  vertical-align: bottom;\\n}\\n\\n.file-manager {\\n  background: #f9f9f9;\\n  margin-top: 20px;\\n  overflow-x: auto;\\n}\\n.file-manager #notification-toast {\\n  bottom: 0;\\n}\\n.file-manager .dataTable .btn {\\n  padding: 10px 16px 8px;\\n}\\n.file-manager .dataTable .btn > i {\\n  margin-top: 5px;\\n}\\n\\n.media-picker-modal {\\n  padding-right: 0 !important;\\n  z-index: 1050;\\n}\\n.media-picker-modal > i {\\n  margin-right: 5px;\\n}\\n.media-picker-modal .modal-dialog {\\n  width: auto;\\n  margin: 25px auto;\\n}\\n.media-picker-modal .modal-content {\\n  margin: auto;\\n  float: none;\\n  border: 1px solid #d2d6de;\\n  border-radius: 3px;\\n}\\n.media-picker-modal .modal-header {\\n  padding: 6px 15px;\\n  background: #f1f1f1;\\n}\\n.media-picker-modal .modal-header > .close {\\n  margin-top: 5px;\\n  -webkit-text-stroke: 0;\\n  transition: 200ms;\\n}\\n.media-picker-modal .modal-body {\\n  background: #f9f9f9;\\n  padding: 15px 0;\\n}\\n.media-picker-modal .modal.fade .modal-dialog {\\n  transform: scale(0.8);\\n  opacity: 0;\\n  transition: 200ms ease-in-out;\\n}\\n.media-picker-modal .modal.fade .modal-dialog.in .modal-dialog {\\n  transform: scale(1);\\n  opacity: 1;\\n}\\n\\n@media screen and (max-width: 767px) {\\n  .media-picker-modal .modal-dialog {\\n    margin: 10px;\\n  }\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./Modules/Media/Resources/assets/admin/sass/media-picker.scss\"],\"names\":[],\"mappings\":\"AAAA;EACC,WAAA;EACA,sBAAA;AACD;;AAEA;EACC,mBAAA;EACG,gBAAA;EACA,gBAAA;AACJ;AACI;EACI,SAAA;AACR;AAGQ;EACI,sBAAA;AADZ;AAGY;EACI,eAAA;AADhB;;AAOA;EACI,2BAAA;EACA,aAAA;AAJJ;AAMI;EACI,iBAAA;AAJR;AAOI;EACI,WAAA;EACA,iBAAA;AALR;AAQI;EACI,YAAA;EACA,WAAA;EACA,yBAAA;EACA,kBAAA;AANR;AASI;EACI,iBAAA;EACA,mBAAA;AAPR;AASQ;EACI,eAAA;EACA,sBAAA;EACA,iBAAA;AAPZ;AAWI;EACI,mBAAA;EACA,eAAA;AATR;AAYI;EACI,qBAAA;EACA,UAAA;EACA,6BAAA;AAVR;AAYQ;EACI,mBAAA;EACA,UAAA;AAVZ;;AAeA;EACC;IACC,YAAA;EAZA;AACF\",\"sourcesContent\":[\".file-manager-iframe {\\r\\n\\twidth: 100%;\\r\\n\\tvertical-align: bottom;\\r\\n}\\r\\n\\r\\n.file-manager {\\r\\n\\tbackground: #f9f9f9;\\r\\n    margin-top: 20px;\\r\\n    overflow-x: auto;\\r\\n\\r\\n    #notification-toast {\\r\\n        bottom: 0;\\r\\n    }\\r\\n\\r\\n    .dataTable {\\r\\n        .btn {\\r\\n            padding: 10px 16px 8px;\\r\\n\\r\\n            > i {\\r\\n                margin-top: 5px;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n.media-picker-modal {\\r\\n    padding-right: 0 !important;\\r\\n    z-index: 1050;\\r\\n\\r\\n    > i {\\r\\n        margin-right: 5px;\\r\\n    }\\r\\n\\r\\n    .modal-dialog {\\r\\n        width: auto;\\r\\n        margin: 25px auto;\\r\\n    }\\r\\n\\r\\n    .modal-content {\\r\\n        margin: auto;\\r\\n        float: none;\\r\\n        border: 1px solid #d2d6de;\\r\\n        border-radius: 3px;\\r\\n    }\\r\\n\\r\\n    .modal-header {\\r\\n        padding: 6px 15px;\\r\\n        background: #f1f1f1;\\r\\n\\r\\n        > .close {\\r\\n            margin-top: 5px;\\r\\n            -webkit-text-stroke: 0;\\r\\n            transition: 200ms;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    .modal-body {\\r\\n        background: #f9f9f9;\\r\\n        padding: 15px 0;\\r\\n    }\\r\\n\\r\\n    .modal.fade .modal-dialog {\\r\\n        transform: scale(0.8);\\r\\n        opacity: 0;\\r\\n        transition: 200ms ease-in-out;\\r\\n\\r\\n        &.in .modal-dialog {\\r\\n            transform: scale(1);\\r\\n            opacity: 1;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n@media screen and (max-width: 767px) {\\r\\n\\t.media-picker-modal .modal-dialog {\\r\\n\\t\\tmargin: 10px;\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbGFyYXZlbC1taXgvbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtMjhbMF0ucnVsZXNbMF0udXNlWzFdIS4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTI4WzBdLnJ1bGVzWzBdLnVzZVsyXSEuL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcz8/Y2xvbmVkUnVsZVNldC0yOFswXS5ydWxlc1swXS51c2VbM10hLi9Nb2R1bGVzL01lZGlhL1Jlc291cmNlcy9hc3NldHMvYWRtaW4vc2Fzcy9tZWRpYS1waWNrZXIuc2NzcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQzhKO0FBQzdCO0FBQ2pJLDhCQUE4Qiw0R0FBMkIsQ0FBQyxpSUFBcUM7QUFDL0Y7QUFDQSxnRUFBZ0UsZ0JBQWdCLDJCQUEyQixHQUFHLG1CQUFtQix3QkFBd0IscUJBQXFCLHFCQUFxQixHQUFHLHFDQUFxQyxjQUFjLEdBQUcsaUNBQWlDLDJCQUEyQixHQUFHLHFDQUFxQyxvQkFBb0IsR0FBRyx5QkFBeUIsZ0NBQWdDLGtCQUFrQixHQUFHLDJCQUEyQixzQkFBc0IsR0FBRyxxQ0FBcUMsZ0JBQWdCLHNCQUFzQixHQUFHLHNDQUFzQyxpQkFBaUIsZ0JBQWdCLDhCQUE4Qix1QkFBdUIsR0FBRyxxQ0FBcUMsc0JBQXNCLHdCQUF3QixHQUFHLDhDQUE4QyxvQkFBb0IsMkJBQTJCLHNCQUFzQixHQUFHLG1DQUFtQyx3QkFBd0Isb0JBQW9CLEdBQUcsaURBQWlELDBCQUEwQixlQUFlLGtDQUFrQyxHQUFHLGtFQUFrRSx3QkFBd0IsZUFBZSxHQUFHLDBDQUEwQyx1Q0FBdUMsbUJBQW1CLEtBQUssR0FBRyxPQUFPLDhIQUE4SCxVQUFVLFdBQVcsTUFBTSxLQUFLLFdBQVcsV0FBVyxXQUFXLEtBQUssS0FBSyxVQUFVLEtBQUssS0FBSyxXQUFXLEtBQUssS0FBSyxVQUFVLE9BQU8sS0FBSyxXQUFXLFVBQVUsS0FBSyxLQUFLLFdBQVcsS0FBSyxLQUFLLFVBQVUsV0FBVyxLQUFLLEtBQUssVUFBVSxVQUFVLFdBQVcsV0FBVyxLQUFLLEtBQUssV0FBVyxXQUFXLEtBQUssS0FBSyxVQUFVLFdBQVcsV0FBVyxLQUFLLEtBQUssV0FBVyxVQUFVLEtBQUssS0FBSyxXQUFXLFVBQVUsV0FBVyxLQUFLLEtBQUssV0FBVyxVQUFVLE1BQU0sS0FBSyxLQUFLLFVBQVUsS0FBSywrQ0FBK0Msa0JBQWtCLDZCQUE2QixLQUFLLHVCQUF1QiwwQkFBMEIseUJBQXlCLHlCQUF5QixpQ0FBaUMsc0JBQXNCLFNBQVMsd0JBQXdCLGtCQUFrQix1Q0FBdUMseUJBQXlCLG9DQUFvQyxpQkFBaUIsYUFBYSxTQUFTLEtBQUssNkJBQTZCLG9DQUFvQyxzQkFBc0IsaUJBQWlCLDhCQUE4QixTQUFTLDJCQUEyQix3QkFBd0IsOEJBQThCLFNBQVMsNEJBQTRCLHlCQUF5Qix3QkFBd0Isc0NBQXNDLCtCQUErQixTQUFTLDJCQUEyQiw4QkFBOEIsZ0NBQWdDLDBCQUEwQixnQ0FBZ0MsdUNBQXVDLGtDQUFrQyxhQUFhLFNBQVMseUJBQXlCLGdDQUFnQyw0QkFBNEIsU0FBUyx1Q0FBdUMsa0NBQWtDLHVCQUF1QiwwQ0FBMEMsb0NBQW9DLG9DQUFvQywyQkFBMkIsYUFBYSxTQUFTLEtBQUssOENBQThDLHlDQUF5QyxxQkFBcUIsT0FBTyxLQUFLLHVCQUF1QjtBQUNuOEc7QUFDQSxpRUFBZSx1QkFBdUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2ZsZWV0Y2FydC8uL01vZHVsZXMvTWVkaWEvUmVzb3VyY2VzL2Fzc2V0cy9hZG1pbi9zYXNzL21lZGlhLXBpY2tlci5zY3NzP2U1YzgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9sYXJhdmVsLW1peC9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvY3NzV2l0aE1hcHBpbmdUb1N0cmluZy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2xhcmF2ZWwtbWl4L25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIi5maWxlLW1hbmFnZXItaWZyYW1lIHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcXG59XFxuXFxuLmZpbGUtbWFuYWdlciB7XFxuICBiYWNrZ3JvdW5kOiAjZjlmOWY5O1xcbiAgbWFyZ2luLXRvcDogMjBweDtcXG4gIG92ZXJmbG93LXg6IGF1dG87XFxufVxcbi5maWxlLW1hbmFnZXIgI25vdGlmaWNhdGlvbi10b2FzdCB7XFxuICBib3R0b206IDA7XFxufVxcbi5maWxlLW1hbmFnZXIgLmRhdGFUYWJsZSAuYnRuIHtcXG4gIHBhZGRpbmc6IDEwcHggMTZweCA4cHg7XFxufVxcbi5maWxlLW1hbmFnZXIgLmRhdGFUYWJsZSAuYnRuID4gaSB7XFxuICBtYXJnaW4tdG9wOiA1cHg7XFxufVxcblxcbi5tZWRpYS1waWNrZXItbW9kYWwge1xcbiAgcGFkZGluZy1yaWdodDogMCAhaW1wb3J0YW50O1xcbiAgei1pbmRleDogMTA1MDtcXG59XFxuLm1lZGlhLXBpY2tlci1tb2RhbCA+IGkge1xcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XFxufVxcbi5tZWRpYS1waWNrZXItbW9kYWwgLm1vZGFsLWRpYWxvZyB7XFxuICB3aWR0aDogYXV0bztcXG4gIG1hcmdpbjogMjVweCBhdXRvO1xcbn1cXG4ubWVkaWEtcGlja2VyLW1vZGFsIC5tb2RhbC1jb250ZW50IHtcXG4gIG1hcmdpbjogYXV0bztcXG4gIGZsb2F0OiBub25lO1xcbiAgYm9yZGVyOiAxcHggc29saWQgI2QyZDZkZTtcXG4gIGJvcmRlci1yYWRpdXM6IDNweDtcXG59XFxuLm1lZGlhLXBpY2tlci1tb2RhbCAubW9kYWwtaGVhZGVyIHtcXG4gIHBhZGRpbmc6IDZweCAxNXB4O1xcbiAgYmFja2dyb3VuZDogI2YxZjFmMTtcXG59XFxuLm1lZGlhLXBpY2tlci1tb2RhbCAubW9kYWwtaGVhZGVyID4gLmNsb3NlIHtcXG4gIG1hcmdpbi10b3A6IDVweDtcXG4gIC13ZWJraXQtdGV4dC1zdHJva2U6IDA7XFxuICB0cmFuc2l0aW9uOiAyMDBtcztcXG59XFxuLm1lZGlhLXBpY2tlci1tb2RhbCAubW9kYWwtYm9keSB7XFxuICBiYWNrZ3JvdW5kOiAjZjlmOWY5O1xcbiAgcGFkZGluZzogMTVweCAwO1xcbn1cXG4ubWVkaWEtcGlja2VyLW1vZGFsIC5tb2RhbC5mYWRlIC5tb2RhbC1kaWFsb2cge1xcbiAgdHJhbnNmb3JtOiBzY2FsZSgwLjgpO1xcbiAgb3BhY2l0eTogMDtcXG4gIHRyYW5zaXRpb246IDIwMG1zIGVhc2UtaW4tb3V0O1xcbn1cXG4ubWVkaWEtcGlja2VyLW1vZGFsIC5tb2RhbC5mYWRlIC5tb2RhbC1kaWFsb2cuaW4gLm1vZGFsLWRpYWxvZyB7XFxuICB0cmFuc2Zvcm06IHNjYWxlKDEpO1xcbiAgb3BhY2l0eTogMTtcXG59XFxuXFxuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNzY3cHgpIHtcXG4gIC5tZWRpYS1waWNrZXItbW9kYWwgLm1vZGFsLWRpYWxvZyB7XFxuICAgIG1hcmdpbjogMTBweDtcXG4gIH1cXG59XCIsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vTW9kdWxlcy9NZWRpYS9SZXNvdXJjZXMvYXNzZXRzL2FkbWluL3Nhc3MvbWVkaWEtcGlja2VyLnNjc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7RUFDQyxXQUFBO0VBQ0Esc0JBQUE7QUFDRDs7QUFFQTtFQUNDLG1CQUFBO0VBQ0csZ0JBQUE7RUFDQSxnQkFBQTtBQUNKO0FBQ0k7RUFDSSxTQUFBO0FBQ1I7QUFHUTtFQUNJLHNCQUFBO0FBRFo7QUFHWTtFQUNJLGVBQUE7QUFEaEI7O0FBT0E7RUFDSSwyQkFBQTtFQUNBLGFBQUE7QUFKSjtBQU1JO0VBQ0ksaUJBQUE7QUFKUjtBQU9JO0VBQ0ksV0FBQTtFQUNBLGlCQUFBO0FBTFI7QUFRSTtFQUNJLFlBQUE7RUFDQSxXQUFBO0VBQ0EseUJBQUE7RUFDQSxrQkFBQTtBQU5SO0FBU0k7RUFDSSxpQkFBQTtFQUNBLG1CQUFBO0FBUFI7QUFTUTtFQUNJLGVBQUE7RUFDQSxzQkFBQTtFQUNBLGlCQUFBO0FBUFo7QUFXSTtFQUNJLG1CQUFBO0VBQ0EsZUFBQTtBQVRSO0FBWUk7RUFDSSxxQkFBQTtFQUNBLFVBQUE7RUFDQSw2QkFBQTtBQVZSO0FBWVE7RUFDSSxtQkFBQTtFQUNBLFVBQUE7QUFWWjs7QUFlQTtFQUNDO0lBQ0MsWUFBQTtFQVpBO0FBQ0ZcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLmZpbGUtbWFuYWdlci1pZnJhbWUge1xcclxcblxcdHdpZHRoOiAxMDAlO1xcclxcblxcdHZlcnRpY2FsLWFsaWduOiBib3R0b207XFxyXFxufVxcclxcblxcclxcbi5maWxlLW1hbmFnZXIge1xcclxcblxcdGJhY2tncm91bmQ6ICNmOWY5Zjk7XFxyXFxuICAgIG1hcmdpbi10b3A6IDIwcHg7XFxyXFxuICAgIG92ZXJmbG93LXg6IGF1dG87XFxyXFxuXFxyXFxuICAgICNub3RpZmljYXRpb24tdG9hc3Qge1xcclxcbiAgICAgICAgYm90dG9tOiAwO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIC5kYXRhVGFibGUge1xcclxcbiAgICAgICAgLmJ0biB7XFxyXFxuICAgICAgICAgICAgcGFkZGluZzogMTBweCAxNnB4IDhweDtcXHJcXG5cXHJcXG4gICAgICAgICAgICA+IGkge1xcclxcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgfVxcclxcbiAgICB9XFxyXFxufVxcclxcblxcclxcbi5tZWRpYS1waWNrZXItbW9kYWwge1xcclxcbiAgICBwYWRkaW5nLXJpZ2h0OiAwICFpbXBvcnRhbnQ7XFxyXFxuICAgIHotaW5kZXg6IDEwNTA7XFxyXFxuXFxyXFxuICAgID4gaSB7XFxyXFxuICAgICAgICBtYXJnaW4tcmlnaHQ6IDVweDtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICAubW9kYWwtZGlhbG9nIHtcXHJcXG4gICAgICAgIHdpZHRoOiBhdXRvO1xcclxcbiAgICAgICAgbWFyZ2luOiAyNXB4IGF1dG87XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgLm1vZGFsLWNvbnRlbnQge1xcclxcbiAgICAgICAgbWFyZ2luOiBhdXRvO1xcclxcbiAgICAgICAgZmxvYXQ6IG5vbmU7XFxyXFxuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZDJkNmRlO1xcclxcbiAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIC5tb2RhbC1oZWFkZXIge1xcclxcbiAgICAgICAgcGFkZGluZzogNnB4IDE1cHg7XFxyXFxuICAgICAgICBiYWNrZ3JvdW5kOiAjZjFmMWYxO1xcclxcblxcclxcbiAgICAgICAgPiAuY2xvc2Uge1xcclxcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDVweDtcXHJcXG4gICAgICAgICAgICAtd2Via2l0LXRleHQtc3Ryb2tlOiAwO1xcclxcbiAgICAgICAgICAgIHRyYW5zaXRpb246IDIwMG1zO1xcclxcbiAgICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIC5tb2RhbC1ib2R5IHtcXHJcXG4gICAgICAgIGJhY2tncm91bmQ6ICNmOWY5Zjk7XFxyXFxuICAgICAgICBwYWRkaW5nOiAxNXB4IDA7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgLm1vZGFsLmZhZGUgLm1vZGFsLWRpYWxvZyB7XFxyXFxuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDAuOCk7XFxyXFxuICAgICAgICBvcGFjaXR5OiAwO1xcclxcbiAgICAgICAgdHJhbnNpdGlvbjogMjAwbXMgZWFzZS1pbi1vdXQ7XFxyXFxuXFxyXFxuICAgICAgICAmLmluIC5tb2RhbC1kaWFsb2cge1xcclxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7XFxyXFxuICAgICAgICAgICAgb3BhY2l0eTogMTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfVxcclxcbn1cXHJcXG5cXHJcXG5AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjdweCkge1xcclxcblxcdC5tZWRpYS1waWNrZXItbW9kYWwgLm1vZGFsLWRpYWxvZyB7XFxyXFxuXFx0XFx0bWFyZ2luOiAxMHB4O1xcclxcblxcdH1cXHJcXG59XFxyXFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/laravel-mix/node_modules/css-loader/dist/cjs.js??clonedRuleSet-28[0].rules[0].use[1]!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-28[0].rules[0].use[2]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-28[0].rules[0].use[3]!./Modules/Media/Resources/assets/admin/sass/media-picker.scss\n");

/***/ }),

/***/ "./node_modules/laravel-mix/node_modules/css-loader/dist/runtime/api.js":
/*!******************************************************************************!*\
  !*** ./node_modules/laravel-mix/node_modules/css-loader/dist/runtime/api.js ***!
  \******************************************************************************/
/***/ ((module) => {

eval("\r\n\r\n/*\r\n  MIT License http://www.opensource.org/licenses/mit-license.php\r\n  Author Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\n// eslint-disable-next-line func-names\r\nmodule.exports = function (cssWithMappingToString) {\r\n  var list = []; // return the list of modules as css string\r\n\r\n  list.toString = function toString() {\r\n    return this.map(function (item) {\r\n      var content = cssWithMappingToString(item);\r\n\r\n      if (item[2]) {\r\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\r\n      }\r\n\r\n      return content;\r\n    }).join(\"\");\r\n  }; // import a list of modules into the list\r\n  // eslint-disable-next-line func-names\r\n\r\n\r\n  list.i = function (modules, mediaQuery, dedupe) {\r\n    if (typeof modules === \"string\") {\r\n      // eslint-disable-next-line no-param-reassign\r\n      modules = [[null, modules, \"\"]];\r\n    }\r\n\r\n    var alreadyImportedModules = {};\r\n\r\n    if (dedupe) {\r\n      for (var i = 0; i < this.length; i++) {\r\n        // eslint-disable-next-line prefer-destructuring\r\n        var id = this[i][0];\r\n\r\n        if (id != null) {\r\n          alreadyImportedModules[id] = true;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (var _i = 0; _i < modules.length; _i++) {\r\n      var item = [].concat(modules[_i]);\r\n\r\n      if (dedupe && alreadyImportedModules[item[0]]) {\r\n        // eslint-disable-next-line no-continue\r\n        continue;\r\n      }\r\n\r\n      if (mediaQuery) {\r\n        if (!item[2]) {\r\n          item[2] = mediaQuery;\r\n        } else {\r\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\r\n        }\r\n      }\r\n\r\n      list.push(item);\r\n    }\r\n  };\r\n\r\n  return list;\r\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbGFyYXZlbC1taXgvbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHFCQUFxQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixpQkFBaUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHFCQUFxQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2ZsZWV0Y2FydC8uL25vZGVfbW9kdWxlcy9sYXJhdmVsLW1peC9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzPzBmY2UiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vKlxyXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG4qL1xyXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKSB7XHJcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xyXG5cclxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgdmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0pO1xyXG5cclxuICAgICAgaWYgKGl0ZW1bMl0pIHtcclxuICAgICAgICByZXR1cm4gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGNvbnRlbnQsIFwifVwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XHJcbiAgICB9KS5qb2luKFwiXCIpO1xyXG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcclxuXHJcblxyXG4gIGxpc3QuaSA9IGZ1bmN0aW9uIChtb2R1bGVzLCBtZWRpYVF1ZXJ5LCBkZWR1cGUpIHtcclxuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cclxuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XHJcblxyXG4gICAgaWYgKGRlZHVwZSkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcclxuICAgICAgICB2YXIgaWQgPSB0aGlzW2ldWzBdO1xyXG5cclxuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtb2R1bGVzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19pXSk7XHJcblxyXG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udGludWVcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKG1lZGlhUXVlcnkpIHtcclxuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcclxuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpdGVtWzJdID0gXCJcIi5jb25jYXQobWVkaWFRdWVyeSwgXCIgYW5kIFwiKS5jb25jYXQoaXRlbVsyXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBsaXN0LnB1c2goaXRlbSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIGxpc3Q7XHJcbn07Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/laravel-mix/node_modules/css-loader/dist/runtime/api.js\n");

/***/ }),

/***/ "./node_modules/laravel-mix/node_modules/css-loader/dist/runtime/cssWithMappingToString.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/laravel-mix/node_modules/css-loader/dist/runtime/cssWithMappingToString.js ***!
  \*************************************************************************************************/
/***/ ((module) => {

eval("\r\n\r\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\r\n\r\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\nfunction _iterableToArrayLimit(arr, i) { var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]); if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\r\n\r\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\r\n\r\nmodule.exports = function cssWithMappingToString(item) {\r\n  var _item = _slicedToArray(item, 4),\r\n      content = _item[1],\r\n      cssMapping = _item[3];\r\n\r\n  if (!cssMapping) {\r\n    return content;\r\n  }\r\n\r\n  if (typeof btoa === \"function\") {\r\n    // eslint-disable-next-line no-undef\r\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\r\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\r\n    var sourceMapping = \"/*# \".concat(data, \" */\");\r\n    var sourceURLs = cssMapping.sources.map(function (source) {\r\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\r\n    });\r\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\r\n  }\r\n\r\n  return [content].join(\"\\n\");\r\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbGFyYXZlbC1taXgvbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2Nzc1dpdGhNYXBwaW5nVG9TdHJpbmcuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLGtDQUFrQztBQUNsQztBQUNBLDhCQUE4QjtBQUM5QjtBQUNBLGtEQUFrRCxnQkFBZ0IsZ0VBQWdFLHdEQUF3RCw2REFBNkQsc0RBQXNEO0FBQzdTO0FBQ0EsdUNBQXVDLHVEQUF1RCx1Q0FBdUMsU0FBUyxPQUFPLG9CQUFvQjtBQUN6SztBQUNBLHlDQUF5Qyw4RkFBOEYsd0JBQXdCLGVBQWUsZUFBZSxnQkFBZ0IsWUFBWSxNQUFNLHdCQUF3QiwrQkFBK0IsYUFBYSxxQkFBcUIsdUNBQXVDLGNBQWMsV0FBVyxZQUFZLFVBQVUsTUFBTSxtREFBbUQsVUFBVSxzQkFBc0I7QUFDdmU7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsY0FBYztBQUNyRTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2ZsZWV0Y2FydC8uL25vZGVfbW9kdWxlcy9sYXJhdmVsLW1peC9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvY3NzV2l0aE1hcHBpbmdUb1N0cmluZy5qcz9lZjZkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH1cclxuXHJcbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cclxuXHJcbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxyXG5cclxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XHJcblxyXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7IHZhciBfaSA9IGFyciAmJiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBhcnJbU3ltYm9sLml0ZXJhdG9yXSB8fCBhcnJbXCJAQGl0ZXJhdG9yXCJdKTsgaWYgKF9pID09IG51bGwpIHJldHVybjsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfcywgX2U7IHRyeSB7IGZvciAoX2kgPSBfaS5jYWxsKGFycik7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdICE9IG51bGwpIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfVxyXG5cclxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSkge1xyXG4gIHZhciBfaXRlbSA9IF9zbGljZWRUb0FycmF5KGl0ZW0sIDQpLFxyXG4gICAgICBjb250ZW50ID0gX2l0ZW1bMV0sXHJcbiAgICAgIGNzc01hcHBpbmcgPSBfaXRlbVszXTtcclxuXHJcbiAgaWYgKCFjc3NNYXBwaW5nKSB7XHJcbiAgICByZXR1cm4gY29udGVudDtcclxuICB9XHJcblxyXG4gIGlmICh0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcclxuICAgIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjc3NNYXBwaW5nKSkpKTtcclxuICAgIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcclxuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xyXG4gICAgdmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcclxuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290IHx8IFwiXCIpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKFwiXFxuXCIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKFwiXFxuXCIpO1xyXG59OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/laravel-mix/node_modules/css-loader/dist/runtime/cssWithMappingToString.js\n");

/***/ }),

/***/ "./Modules/Media/Resources/assets/admin/sass/media-picker.scss":
/*!*********************************************************************!*\
  !*** ./Modules/Media/Resources/assets/admin/sass/media-picker.scss ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_laravel_mix_node_modules_css_loader_dist_cjs_js_clonedRuleSet_28_0_rules_0_use_1_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_28_0_rules_0_use_2_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_28_0_rules_0_use_3_media_picker_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../../../../../../node_modules/laravel-mix/node_modules/css-loader/dist/cjs.js??clonedRuleSet-28[0].rules[0].use[1]!../../../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-28[0].rules[0].use[2]!../../../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-28[0].rules[0].use[3]!./media-picker.scss */ \"./node_modules/laravel-mix/node_modules/css-loader/dist/cjs.js??clonedRuleSet-28[0].rules[0].use[1]!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-28[0].rules[0].use[2]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-28[0].rules[0].use[3]!./Modules/Media/Resources/assets/admin/sass/media-picker.scss\");\n\n            \n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_laravel_mix_node_modules_css_loader_dist_cjs_js_clonedRuleSet_28_0_rules_0_use_1_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_28_0_rules_0_use_2_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_28_0_rules_0_use_3_media_picker_scss__WEBPACK_IMPORTED_MODULE_1__[\"default\"], options);\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_laravel_mix_node_modules_css_loader_dist_cjs_js_clonedRuleSet_28_0_rules_0_use_1_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_28_0_rules_0_use_2_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_28_0_rules_0_use_3_media_picker_scss__WEBPACK_IMPORTED_MODULE_1__[\"default\"].locals || {});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9Nb2R1bGVzL01lZGlhL1Jlc291cmNlcy9hc3NldHMvYWRtaW4vc2Fzcy9tZWRpYS1waWNrZXIuc2NzcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdHO0FBQ3hHLFlBQXVXOztBQUV2Vzs7QUFFQTtBQUNBOztBQUVBLGFBQWEsMEdBQUcsQ0FBQyx1U0FBTzs7OztBQUl4QixpRUFBZSx1U0FBTyxhQUFhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxlZXRjYXJ0Ly4vTW9kdWxlcy9NZWRpYS9SZXNvdXJjZXMvYXNzZXRzL2FkbWluL3Nhc3MvbWVkaWEtcGlja2VyLnNjc3M/MWY4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXBpIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCI7XG4gICAgICAgICAgICBpbXBvcnQgY29udGVudCBmcm9tIFwiISEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbGFyYXZlbC1taXgvbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtMjhbMF0ucnVsZXNbMF0udXNlWzFdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/Y2xvbmVkUnVsZVNldC0yOFswXS5ydWxlc1swXS51c2VbMl0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTI4WzBdLnJ1bGVzWzBdLnVzZVszXSEuL21lZGlhLXBpY2tlci5zY3NzXCI7XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgY29udGVudC5sb2NhbHMgfHwge307Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Modules/Media/Resources/assets/admin/sass/media-picker.scss\n");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\r\n\r\nvar isOldIE = function isOldIE() {\r\n  var memo;\r\n  return function memorize() {\r\n    if (typeof memo === 'undefined') {\r\n      // Test for IE <= 9 as proposed by Browserhacks\r\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\r\n      // Tests for existence of standard globals is to allow style-loader\r\n      // to operate correctly into non-standard environments\r\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\r\n      memo = Boolean(window && document && document.all && !window.atob);\r\n    }\r\n\r\n    return memo;\r\n  };\r\n}();\r\n\r\nvar getTarget = function getTarget() {\r\n  var memo = {};\r\n  return function memorize(target) {\r\n    if (typeof memo[target] === 'undefined') {\r\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\r\n\r\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\r\n        try {\r\n          // This will throw an exception if access to iframe is blocked\r\n          // due to cross-origin restrictions\r\n          styleTarget = styleTarget.contentDocument.head;\r\n        } catch (e) {\r\n          // istanbul ignore next\r\n          styleTarget = null;\r\n        }\r\n      }\r\n\r\n      memo[target] = styleTarget;\r\n    }\r\n\r\n    return memo[target];\r\n  };\r\n}();\r\n\r\nvar stylesInDom = [];\r\n\r\nfunction getIndexByIdentifier(identifier) {\r\n  var result = -1;\r\n\r\n  for (var i = 0; i < stylesInDom.length; i++) {\r\n    if (stylesInDom[i].identifier === identifier) {\r\n      result = i;\r\n      break;\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nfunction modulesToDom(list, options) {\r\n  var idCountMap = {};\r\n  var identifiers = [];\r\n\r\n  for (var i = 0; i < list.length; i++) {\r\n    var item = list[i];\r\n    var id = options.base ? item[0] + options.base : item[0];\r\n    var count = idCountMap[id] || 0;\r\n    var identifier = \"\".concat(id, \" \").concat(count);\r\n    idCountMap[id] = count + 1;\r\n    var index = getIndexByIdentifier(identifier);\r\n    var obj = {\r\n      css: item[1],\r\n      media: item[2],\r\n      sourceMap: item[3]\r\n    };\r\n\r\n    if (index !== -1) {\r\n      stylesInDom[index].references++;\r\n      stylesInDom[index].updater(obj);\r\n    } else {\r\n      stylesInDom.push({\r\n        identifier: identifier,\r\n        updater: addStyle(obj, options),\r\n        references: 1\r\n      });\r\n    }\r\n\r\n    identifiers.push(identifier);\r\n  }\r\n\r\n  return identifiers;\r\n}\r\n\r\nfunction insertStyleElement(options) {\r\n  var style = document.createElement('style');\r\n  var attributes = options.attributes || {};\r\n\r\n  if (typeof attributes.nonce === 'undefined') {\r\n    var nonce =  true ? __webpack_require__.nc : 0;\r\n\r\n    if (nonce) {\r\n      attributes.nonce = nonce;\r\n    }\r\n  }\r\n\r\n  Object.keys(attributes).forEach(function (key) {\r\n    style.setAttribute(key, attributes[key]);\r\n  });\r\n\r\n  if (typeof options.insert === 'function') {\r\n    options.insert(style);\r\n  } else {\r\n    var target = getTarget(options.insert || 'head');\r\n\r\n    if (!target) {\r\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\r\n    }\r\n\r\n    target.appendChild(style);\r\n  }\r\n\r\n  return style;\r\n}\r\n\r\nfunction removeStyleElement(style) {\r\n  // istanbul ignore if\r\n  if (style.parentNode === null) {\r\n    return false;\r\n  }\r\n\r\n  style.parentNode.removeChild(style);\r\n}\r\n/* istanbul ignore next  */\r\n\r\n\r\nvar replaceText = function replaceText() {\r\n  var textStore = [];\r\n  return function replace(index, replacement) {\r\n    textStore[index] = replacement;\r\n    return textStore.filter(Boolean).join('\\n');\r\n  };\r\n}();\r\n\r\nfunction applyToSingletonTag(style, index, remove, obj) {\r\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\r\n\r\n  /* istanbul ignore if  */\r\n\r\n  if (style.styleSheet) {\r\n    style.styleSheet.cssText = replaceText(index, css);\r\n  } else {\r\n    var cssNode = document.createTextNode(css);\r\n    var childNodes = style.childNodes;\r\n\r\n    if (childNodes[index]) {\r\n      style.removeChild(childNodes[index]);\r\n    }\r\n\r\n    if (childNodes.length) {\r\n      style.insertBefore(cssNode, childNodes[index]);\r\n    } else {\r\n      style.appendChild(cssNode);\r\n    }\r\n  }\r\n}\r\n\r\nfunction applyToTag(style, options, obj) {\r\n  var css = obj.css;\r\n  var media = obj.media;\r\n  var sourceMap = obj.sourceMap;\r\n\r\n  if (media) {\r\n    style.setAttribute('media', media);\r\n  } else {\r\n    style.removeAttribute('media');\r\n  }\r\n\r\n  if (sourceMap && typeof btoa !== 'undefined') {\r\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\r\n  } // For old IE\r\n\r\n  /* istanbul ignore if  */\r\n\r\n\r\n  if (style.styleSheet) {\r\n    style.styleSheet.cssText = css;\r\n  } else {\r\n    while (style.firstChild) {\r\n      style.removeChild(style.firstChild);\r\n    }\r\n\r\n    style.appendChild(document.createTextNode(css));\r\n  }\r\n}\r\n\r\nvar singleton = null;\r\nvar singletonCounter = 0;\r\n\r\nfunction addStyle(obj, options) {\r\n  var style;\r\n  var update;\r\n  var remove;\r\n\r\n  if (options.singleton) {\r\n    var styleIndex = singletonCounter++;\r\n    style = singleton || (singleton = insertStyleElement(options));\r\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\r\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\r\n  } else {\r\n    style = insertStyleElement(options);\r\n    update = applyToTag.bind(null, style, options);\r\n\r\n    remove = function remove() {\r\n      removeStyleElement(style);\r\n    };\r\n  }\r\n\r\n  update(obj);\r\n  return function updateStyle(newObj) {\r\n    if (newObj) {\r\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\r\n        return;\r\n      }\r\n\r\n      update(obj = newObj);\r\n    } else {\r\n      remove();\r\n    }\r\n  };\r\n}\r\n\r\nmodule.exports = function (list, options) {\r\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n  // tags it will allow on a page\r\n\r\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\r\n    options.singleton = isOldIE();\r\n  }\r\n\r\n  list = list || [];\r\n  var lastIdentifiers = modulesToDom(list, options);\r\n  return function update(newList) {\r\n    newList = newList || [];\r\n\r\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\r\n      return;\r\n    }\r\n\r\n    for (var i = 0; i < lastIdentifiers.length; i++) {\r\n      var identifier = lastIdentifiers[i];\r\n      var index = getIndexByIdentifier(identifier);\r\n      stylesInDom[index].references--;\r\n    }\r\n\r\n    var newLastIdentifiers = modulesToDom(newList, options);\r\n\r\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\r\n      var _identifier = lastIdentifiers[_i];\r\n\r\n      var _index = getIndexByIdentifier(_identifier);\r\n\r\n      if (stylesInDom[_index].references === 0) {\r\n        stylesInDom[_index].updater();\r\n\r\n        stylesInDom.splice(_index, 1);\r\n      }\r\n    }\r\n\r\n    lastIdentifiers = newLastIdentifiers;\r\n  };\r\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHdCQUF3QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpQkFBaUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLEtBQXdDLEdBQUcsc0JBQWlCLEdBQUcsQ0FBSTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxxRUFBcUUscUJBQXFCLGNBQWM7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pELElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsNEJBQTRCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDZCQUE2QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxlZXRjYXJ0Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzP2RiZDkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XHJcbiAgdmFyIG1lbW87XHJcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKCkge1xyXG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xyXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XHJcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXHJcbiAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xyXG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1lbW87XHJcbiAgfTtcclxufSgpO1xyXG5cclxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcclxuICB2YXIgbWVtbyA9IHt9O1xyXG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcclxuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXHJcblxyXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXHJcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xyXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxyXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcclxuICB9O1xyXG59KCk7XHJcblxyXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcclxuXHJcbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcclxuICB2YXIgcmVzdWx0ID0gLTE7XHJcblxyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5Eb20ubGVuZ3RoOyBpKyspIHtcclxuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XHJcbiAgICAgIHJlc3VsdCA9IGk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcclxuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xyXG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xyXG5cclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcclxuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xyXG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcclxuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xyXG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XHJcbiAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgIHZhciBvYmogPSB7XHJcbiAgICAgIGNzczogaXRlbVsxXSxcclxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXHJcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXVxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XHJcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS51cGRhdGVyKG9iaik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcclxuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxyXG4gICAgICAgIHVwZGF0ZXI6IGFkZFN0eWxlKG9iaiwgb3B0aW9ucyksXHJcbiAgICAgICAgcmVmZXJlbmNlczogMVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xyXG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XHJcblxyXG4gIGlmICh0eXBlb2YgYXR0cmlidXRlcy5ub25jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XHJcblxyXG4gICAgaWYgKG5vbmNlKSB7XHJcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcclxuICB9KTtcclxuXHJcbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KG9wdGlvbnMuaW5zZXJ0IHx8ICdoZWFkJyk7XHJcblxyXG4gICAgaWYgKCF0YXJnZXQpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHN0eWxlO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpIHtcclxuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcclxuICBpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XHJcbn1cclxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXHJcblxyXG5cclxudmFyIHJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gcmVwbGFjZVRleHQoKSB7XHJcbiAgdmFyIHRleHRTdG9yZSA9IFtdO1xyXG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xyXG4gICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xyXG4gICAgcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XHJcbiAgfTtcclxufSgpO1xyXG5cclxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XHJcbiAgdmFyIGNzcyA9IHJlbW92ZSA/ICcnIDogb2JqLm1lZGlhID8gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKS5jb25jYXQob2JqLmNzcywgXCJ9XCIpIDogb2JqLmNzczsgLy8gRm9yIG9sZCBJRVxyXG5cclxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXHJcblxyXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XHJcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xyXG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xyXG5cclxuICAgIGlmIChjaGlsZE5vZGVzW2luZGV4XSkge1xyXG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgIHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xyXG4gIHZhciBjc3MgPSBvYmouY3NzO1xyXG4gIHZhciBtZWRpYSA9IG9iai5tZWRpYTtcclxuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcclxuXHJcbiAgaWYgKG1lZGlhKSB7XHJcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbWVkaWEpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzdHlsZS5yZW1vdmVBdHRyaWJ1dGUoJ21lZGlhJyk7XHJcbiAgfVxyXG5cclxuICBpZiAoc291cmNlTWFwICYmIHR5cGVvZiBidG9hICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XHJcbiAgfSAvLyBGb3Igb2xkIElFXHJcblxyXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cclxuXHJcblxyXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XHJcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XHJcbiAgfSBlbHNlIHtcclxuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XHJcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xyXG4gIH1cclxufVxyXG5cclxudmFyIHNpbmdsZXRvbiA9IG51bGw7XHJcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcclxuXHJcbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xyXG4gIHZhciBzdHlsZTtcclxuICB2YXIgdXBkYXRlO1xyXG4gIHZhciByZW1vdmU7XHJcblxyXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xyXG4gICAgdmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XHJcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcclxuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xyXG4gICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcclxuICB9IGVsc2Uge1xyXG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XHJcbiAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xyXG5cclxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcclxuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICB1cGRhdGUob2JqKTtcclxuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XHJcbiAgICBpZiAobmV3T2JqKSB7XHJcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xyXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cclxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXHJcblxyXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcclxuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xyXG4gIH1cclxuXHJcbiAgbGlzdCA9IGxpc3QgfHwgW107XHJcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcclxuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcclxuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xyXG5cclxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xyXG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMtLTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xyXG5cclxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XHJcblxyXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xyXG5cclxuICAgICAgaWYgKHN0eWxlc0luRG9tW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xyXG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xyXG5cclxuICAgICAgICBzdHlsZXNJbkRvbS5zcGxpY2UoX2luZGV4LCAxKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcclxuICB9O1xyXG59OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./Modules/Media/Resources/assets/admin/js/main.js");
/******/ 	
/******/ })()
;